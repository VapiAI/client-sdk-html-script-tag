(function(ve){typeof define=="function"&&define.amd?define(ve):ve()})(function(){"use strict";var Cu=Object.defineProperty;var Tu=(ve,Ae,Je)=>Ae in ve?Cu(ve,Ae,{enumerable:!0,configurable:!0,writable:!0,value:Je}):ve[Ae]=Je;var x=(ve,Ae,Je)=>Tu(ve,typeof Ae!="symbol"?Ae+"":Ae,Je);var ve=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ae(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var Je={};function In(r,e){if(r==null)return{};var t,n,i=function(a,l){if(a==null)return{};var u={};for(var p in a)if({}.hasOwnProperty.call(a,p)){if(l.indexOf(p)!==-1)continue;u[p]=a[p]}return u}(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(n=0;n<o.length;n++)t=o[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function ce(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function J(r){return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(r)}function Ln(r){var e=function(t,n){if(J(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var o=i.call(t,n);if(J(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r,"string");return J(e)=="symbol"?e:e+""}function jn(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Ln(n.key),n)}}function le(r,e,t){return e&&jn(r.prototype,e),t&&jn(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function jt(r,e){if(e&&(J(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)}function ye(r){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(r)}function gt(r,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},gt(r,e)}function Dt(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&gt(r,e)}function we(r,e,t){return(e=Ln(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Dn(r,e,t,n,i,o,a){try{var l=r[o](a),u=l.value}catch(p){return void t(p)}l.done?e(u):Promise.resolve(u).then(n,i)}function N(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var o=r.apply(e,t);function a(u){Dn(o,n,i,a,l,"next",u)}function l(u){Dn(o,n,i,a,l,"throw",u)}a(void 0)})}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function te(r,e){return function(t){if(Array.isArray(t))return t}(r)||function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var o,a,l,u,p=[],f=!0,v=!1;try{if(l=(i=i.call(t)).next,n===0){if(Object(i)!==i)return;f=!1}else for(;!(f=(o=l.call(i)).done)&&(p.push(o.value),p.length!==n);f=!0);}catch(E){v=!0,a=E}finally{try{if(!f&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(v)throw a}}return p}}(r,e)||function(t,n){if(t){if(typeof t=="string")return Nn(t,n);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Nn(t,n):void 0}}(r,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Pa(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Rn,Nt={exports:{}},br=function(){if(Rn)return Nt.exports;Rn=1;var r,e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(g,y,S){return Function.prototype.apply.call(g,y,S)};r=e&&typeof e.ownKeys=="function"?e.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var n=Number.isNaN||function(g){return g!=g};function i(){i.init.call(this)}Nt.exports=i,Nt.exports.once=function(g,y){return new Promise(function(S,C){function M(D){g.removeListener(y,j),C(D)}function j(){typeof g.removeListener=="function"&&g.removeListener("error",M),S([].slice.call(arguments))}_(g,y,j,{once:!0}),y!=="error"&&function(D,q,W){typeof D.on=="function"&&_(D,"error",q,W)}(g,M,{once:!0})})},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function a(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function l(g){return g._maxListeners===void 0?i.defaultMaxListeners:g._maxListeners}function u(g,y,S,C){var M,j,D,q;if(a(S),(j=g._events)===void 0?(j=g._events=Object.create(null),g._eventsCount=0):(j.newListener!==void 0&&(g.emit("newListener",y,S.listener?S.listener:S),j=g._events),D=j[y]),D===void 0)D=j[y]=S,++g._eventsCount;else if(typeof D=="function"?D=j[y]=C?[S,D]:[D,S]:C?D.unshift(S):D.push(S),(M=l(g))>0&&D.length>M&&!D.warned){D.warned=!0;var W=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(y)+" listeners added. Use emitter.setMaxListeners() to increase limit");W.name="MaxListenersExceededWarning",W.emitter=g,W.type=y,W.count=D.length,q=W,console&&console.warn&&console.warn(q)}return g}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(g,y,S){var C={fired:!1,wrapFn:void 0,target:g,type:y,listener:S},M=p.bind(C);return M.listener=S,C.wrapFn=M,M}function v(g,y,S){var C=g._events;if(C===void 0)return[];var M=C[y];return M===void 0?[]:typeof M=="function"?S?[M.listener||M]:[M]:S?function(j){for(var D=new Array(j.length),q=0;q<D.length;++q)D[q]=j[q].listener||j[q];return D}(M):k(M,M.length)}function E(g){var y=this._events;if(y!==void 0){var S=y[g];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}function k(g,y){for(var S=new Array(y),C=0;C<y;++C)S[C]=g[C];return S}function _(g,y,S,C){if(typeof g.on=="function")C.once?g.once(y,S):g.on(y,S);else{if(typeof g.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof g);g.addEventListener(y,function M(j){C.once&&g.removeEventListener(y,M),S(j)})}}return Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(g){if(typeof g!="number"||g<0||n(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");o=g}}),i.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||n(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(g){for(var y=[],S=1;S<arguments.length;S++)y.push(arguments[S]);var C=g==="error",M=this._events;if(M!==void 0)C=C&&M.error===void 0;else if(!C)return!1;if(C){var j;if(y.length>0&&(j=y[0]),j instanceof Error)throw j;var D=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw D.context=j,D}var q=M[g];if(q===void 0)return!1;if(typeof q=="function")t(q,this,y);else{var W=q.length,ne=k(q,W);for(S=0;S<W;++S)t(ne[S],this,y)}return!0},i.prototype.addListener=function(g,y){return u(this,g,y,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(g,y){return u(this,g,y,!0)},i.prototype.once=function(g,y){return a(y),this.on(g,f(this,g,y)),this},i.prototype.prependOnceListener=function(g,y){return a(y),this.prependListener(g,f(this,g,y)),this},i.prototype.removeListener=function(g,y){var S,C,M,j,D;if(a(y),(C=this._events)===void 0)return this;if((S=C[g])===void 0)return this;if(S===y||S.listener===y)--this._eventsCount==0?this._events=Object.create(null):(delete C[g],C.removeListener&&this.emit("removeListener",g,S.listener||y));else if(typeof S!="function"){for(M=-1,j=S.length-1;j>=0;j--)if(S[j]===y||S[j].listener===y){D=S[j].listener,M=j;break}if(M<0)return this;M===0?S.shift():function(q,W){for(;W+1<q.length;W++)q[W]=q[W+1];q.pop()}(S,M),S.length===1&&(C[g]=S[0]),C.removeListener!==void 0&&this.emit("removeListener",g,D||y)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(g){var y,S,C;if((S=this._events)===void 0)return this;if(S.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):S[g]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete S[g]),this;if(arguments.length===0){var M,j=Object.keys(S);for(C=0;C<j.length;++C)(M=j[C])!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(y=S[g])=="function")this.removeListener(g,y);else if(y!==void 0)for(C=y.length-1;C>=0;C--)this.removeListener(g,y[C]);return this},i.prototype.listeners=function(g){return v(this,g,!0)},i.prototype.rawListeners=function(g){return v(this,g,!1)},i.listenerCount=function(g,y){return typeof g.listenerCount=="function"?g.listenerCount(y):E.call(g,y)},i.prototype.listenerCount=E,i.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]},Nt.exports}(),Rt=Pa(br),xn=Object.prototype.hasOwnProperty;function Fn(r,e,t){for(t of r.keys())if(ie(t,e))return t}function ie(r,e){var t,n,i;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&ie(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if((i=n)&&typeof i=="object"&&!(i=Fn(e,i))||!e.has(i))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if((i=n[0])&&typeof i=="object"&&!(i=Fn(e,i))||!ie(n[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){for(t in n=0,r)if(xn.call(r,t)&&++n&&!xn.call(e,t)||!(t in e)||!ie(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!=r&&e!=e}const Ia={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},qn={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},K={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},se={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},De={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class w{static getFirstMatch(e,t){const n=t.match(e);return n&&n.length>0&&n[1]||""}static getSecondMatch(e,t){const n=t.match(e);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(e,t,n){if(e.test(t))return n}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),t[0]===10)switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const t=e.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(t.push(0),!(t[0]===1&&t[1]<5))return t[0]===1&&t[1]<6?"Cupcake":t[0]===1&&t[1]>=6?"Donut":t[0]===2&&t[1]<2?"Eclair":t[0]===2&&t[1]===2?"Froyo":t[0]===2&&t[1]>2?"Gingerbread":t[0]===3?"Honeycomb":t[0]===4&&t[1]<1?"Ice Cream Sandwich":t[0]===4&&t[1]<4?"Jelly Bean":t[0]===4&&t[1]>=4?"KitKat":t[0]===5?"Lollipop":t[0]===6?"Marshmallow":t[0]===7?"Nougat":t[0]===8?"Oreo":t[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,n=!1){const i=w.getVersionPrecision(e),o=w.getVersionPrecision(t);let a=Math.max(i,o),l=0;const u=w.map([e,t],p=>{const f=a-w.getVersionPrecision(p),v=p+new Array(f+1).join(".0");return w.map(v.split("."),E=>new Array(20-E.length).join("0")+E).reverse()});for(n&&(l=a-Math.min(i,o)),a-=1;a>=l;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===l)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}}static map(e,t){const n=[];let i;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)n.push(t(e[i]));return n}static find(e,t){let n,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,i=e.length;n<i;n+=1){const o=e[n];if(t(o,n))return o}}static assign(e,...t){const n=e;let i,o;if(Object.assign)return Object.assign(e,...t);for(i=0,o=t.length;i<o;i+=1){const a=t[i];typeof a=="object"&&a!==null&&Object.keys(a).forEach(l=>{n[l]=a[l]})}return e}static getBrowserAlias(e){return Ia[e]}static getBrowserTypeByAlias(e){return qn[e]||""}}const z=/version\/(\d+(\.?_?\d+)+)/i,La=[{test:[/googlebot/i],describe(r){const e={name:"Googlebot"},t=w.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/opera/i],describe(r){const e={name:"Opera"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opr\/|opios/i],describe(r){const e={name:"Opera"},t=w.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/SamsungBrowser/i],describe(r){const e={name:"Samsung Internet for Android"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Whale/i],describe(r){const e={name:"NAVER Whale Browser"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MZBrowser/i],describe(r){const e={name:"MZ Browser"},t=w.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/focus/i],describe(r){const e={name:"Focus"},t=w.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/swing/i],describe(r){const e={name:"Swing"},t=w.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/coast/i],describe(r){const e={name:"Opera Coast"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(r){const e={name:"Opera Touch"},t=w.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/yabrowser/i],describe(r){const e={name:"Yandex Browser"},t=w.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/ucbrowser/i],describe(r){const e={name:"UC Browser"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/Maxthon|mxios/i],describe(r){const e={name:"Maxthon"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/epiphany/i],describe(r){const e={name:"Epiphany"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/puffin/i],describe(r){const e={name:"Puffin"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sleipnir/i],describe(r){const e={name:"Sleipnir"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/k-meleon/i],describe(r){const e={name:"K-Meleon"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/micromessenger/i],describe(r){const e={name:"WeChat"},t=w.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/qqbrowser/i],describe(r){const e={name:/qqbrowserlite/i.test(r)?"QQ Browser Lite":"QQ Browser"},t=w.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/msie|trident/i],describe(r){const e={name:"Internet Explorer"},t=w.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/\sedg\//i],describe(r){const e={name:"Microsoft Edge"},t=w.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/edg([ea]|ios)/i],describe(r){const e={name:"Microsoft Edge"},t=w.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/vivaldi/i],describe(r){const e={name:"Vivaldi"},t=w.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/seamonkey/i],describe(r){const e={name:"SeaMonkey"},t=w.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/sailfish/i],describe(r){const e={name:"Sailfish"},t=w.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,r);return t&&(e.version=t),e}},{test:[/silk/i],describe(r){const e={name:"Amazon Silk"},t=w.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/phantom/i],describe(r){const e={name:"PhantomJS"},t=w.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/slimerjs/i],describe(r){const e={name:"SlimerJS"},t=w.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e={name:"BlackBerry"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(web|hpw)[o0]s/i],describe(r){const e={name:"WebOS Browser"},t=w.getFirstMatch(z,r)||w.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/bada/i],describe(r){const e={name:"Bada"},t=w.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/tizen/i],describe(r){const e={name:"Tizen"},t=w.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/qupzilla/i],describe(r){const e={name:"QupZilla"},t=w.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/firefox|iceweasel|fxios/i],describe(r){const e={name:"Firefox"},t=w.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/electron/i],describe(r){const e={name:"Electron"},t=w.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/MiuiBrowser/i],describe(r){const e={name:"Miui"},t=w.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/chromium/i],describe(r){const e={name:"Chromium"},t=w.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,r)||w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/chrome|crios|crmo/i],describe(r){const e={name:"Chrome"},t=w.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/GSA/i],describe(r){const e={name:"Google Search"},t=w.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e={name:"Android Browser"},t=w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/playstation 4/i],describe(r){const e={name:"PlayStation 4"},t=w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/safari|applewebkit/i],describe(r){const e={name:"Safari"},t=w.getFirstMatch(z,r);return t&&(e.version=t),e}},{test:[/.*/i],describe(r){const e=r.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:w.getFirstMatch(e,r),version:w.getSecondMatch(e,r)}}}];var ja=[{test:[/Roku\/DVP/],describe(r){const e=w.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,r);return{name:se.Roku,version:e}}},{test:[/windows phone/i],describe(r){const e=w.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,r);return{name:se.WindowsPhone,version:e}}},{test:[/windows /i],describe(r){const e=w.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,r),t=w.getWindowsVersionName(e);return{name:se.Windows,version:e,versionName:t}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(r){const e={name:se.iOS},t=w.getSecondMatch(/(Version\/)(\d[\d.]+)/,r);return t&&(e.version=t),e}},{test:[/macintosh/i],describe(r){const e=w.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,r).replace(/[_\s]/g,"."),t=w.getMacOSVersionName(e),n={name:se.MacOS,version:e};return t&&(n.versionName=t),n}},{test:[/(ipod|iphone|ipad)/i],describe(r){const e=w.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,r).replace(/[_\s]/g,".");return{name:se.iOS,version:e}}},{test(r){const e=!r.test(/like android/i),t=r.test(/android/i);return e&&t},describe(r){const e=w.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,r),t=w.getAndroidVersionName(e),n={name:se.Android,version:e};return t&&(n.versionName=t),n}},{test:[/(web|hpw)[o0]s/i],describe(r){const e=w.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,r),t={name:se.WebOS};return e&&e.length&&(t.version=e),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(r){const e=w.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,r)||w.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,r)||w.getFirstMatch(/\bbb(\d+)/i,r);return{name:se.BlackBerry,version:e}}},{test:[/bada/i],describe(r){const e=w.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,r);return{name:se.Bada,version:e}}},{test:[/tizen/i],describe(r){const e=w.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,r);return{name:se.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:se.Linux})},{test:[/CrOS/],describe:()=>({name:se.ChromeOS})},{test:[/PlayStation 4/],describe(r){const e=w.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,r);return{name:se.PlayStation4,version:e}}}],Da=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(r){const e=w.getFirstMatch(/(can-l01)/i,r)&&"Nova",t={type:K.mobile,vendor:"Huawei"};return e&&(t.model=e),t}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:K.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:K.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:K.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:K.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:K.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:K.tablet})},{test(r){const e=r.test(/ipod|iphone/i),t=r.test(/like (ipod|iphone)/i);return e&&!t},describe(r){const e=w.getFirstMatch(/(ipod|iphone)/i,r);return{type:K.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:K.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:K.mobile})},{test:r=>r.getBrowserName(!0)==="blackberry",describe:()=>({type:K.mobile,vendor:"BlackBerry"})},{test:r=>r.getBrowserName(!0)==="bada",describe:()=>({type:K.mobile})},{test:r=>r.getBrowserName()==="windows phone",describe:()=>({type:K.mobile,vendor:"Microsoft"})},{test(r){const e=Number(String(r.getOSVersion()).split(".")[0]);return r.getOSName(!0)==="android"&&e>=3},describe:()=>({type:K.tablet})},{test:r=>r.getOSName(!0)==="android",describe:()=>({type:K.mobile})},{test:r=>r.getOSName(!0)==="macos",describe:()=>({type:K.desktop,vendor:"Apple"})},{test:r=>r.getOSName(!0)==="windows",describe:()=>({type:K.desktop})},{test:r=>r.getOSName(!0)==="linux",describe:()=>({type:K.desktop})},{test:r=>r.getOSName(!0)==="playstation 4",describe:()=>({type:K.tv})},{test:r=>r.getOSName(!0)==="roku",describe:()=>({type:K.tv})}],Na=[{test:r=>r.getBrowserName(!0)==="microsoft edge",describe(r){if(/\sedg\//i.test(r))return{name:De.Blink};const e=w.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,r);return{name:De.EdgeHTML,version:e}}},{test:[/trident/i],describe(r){const e={name:De.Trident},t=w.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:r=>r.test(/presto/i),describe(r){const e={name:De.Presto},t=w.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test(r){const e=r.test(/gecko/i),t=r.test(/like gecko/i);return e&&!t},describe(r){const e={name:De.Gecko},t=w.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:De.Blink})},{test:[/(apple)?webkit/i],describe(r){const e={name:De.WebKit},t=w.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,r);return t&&(e.version=t),e}}];class Vn{constructor(e,t=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},t!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=w.find(La,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=w.find(ja,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};const e=w.find(Da,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=w.find(Na,t=>{if(typeof t.test=="function")return t.test(this);if(t.test instanceof Array)return t.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return w.assign({},this.parsedResult)}satisfies(e){const t={};let n=0;const i={};let o=0;if(Object.keys(e).forEach(a=>{const l=e[a];typeof l=="string"?(i[a]=l,o+=1):typeof l=="object"&&(t[a]=l,n+=1)}),n>0){const a=Object.keys(t),l=w.find(a,p=>this.isOS(p));if(l){const p=this.satisfies(t[l]);if(p!==void 0)return p}const u=w.find(a,p=>this.isPlatform(p));if(u){const p=this.satisfies(t[u]);if(p!==void 0)return p}}if(o>0){const a=Object.keys(i),l=w.find(a,u=>this.isBrowser(u,!0));if(l!==void 0)return this.compareVersion(i[l])}}isBrowser(e,t=!1){const n=this.getBrowserName().toLowerCase();let i=e.toLowerCase();const o=w.getBrowserTypeByAlias(i);return t&&o&&(i=o.toLowerCase()),i===n}compareVersion(e){let t=[0],n=e,i=!1;const o=this.getBrowserVersion();if(typeof o=="string")return e[0]===">"||e[0]==="<"?(n=e.substr(1),e[1]==="="?(i=!0,n=e.substr(2)):t=[],e[0]===">"?t.push(1):t.push(-1)):e[0]==="="?n=e.substr(1):e[0]==="~"&&(i=!0,n=e.substr(1)),t.indexOf(w.compareVersions(o,n,i))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(t=>this.is(t))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class Ra{static getParser(e,t=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new Vn(e,t)}static parse(e){return new Vn(e).getResult()}static get BROWSER_MAP(){return qn}static get ENGINE_MAP(){return De}static get OS_MAP(){return se}static get PLATFORMS_MAP(){return K}}function xt(){return Date.now()+Math.random().toString()}function vt(){throw new Error("Method must be implemented in subclass")}function $n(r,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+r.substring(8):r}function Ft(r){return r!=null&&r.callObjectBundleUrlOverride?r.callObjectBundleUrlOverride:$n("https://c.daily.co/call-machine/versioned/".concat("0.80.0","/static/call-machine-object-bundle.js"),r)}function qt(r){try{new URL(r)}catch{return!1}return!0}const Q=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Be="8.55.0",B=globalThis;function Vt(r,e,t){const n=B,i=n.__SENTRY__=n.__SENTRY__||{},o=i[Be]=i[Be]||{};return o[r]||(o[r]=e())}const Ge=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,_r=["debug","info","warn","error","log","assert","trace"],$t={};function yt(r){if(!("console"in B))return r();const e=B.console,t={},n=Object.keys($t);n.forEach(i=>{const o=$t[i];t[i]=e[i],e[i]=o});try{return r()}finally{n.forEach(i=>{e[i]=t[i]})}}const R=Vt("logger",function(){let r=!1;const e={enable:()=>{r=!0},disable:()=>{r=!1},isEnabled:()=>r};return Ge?_r.forEach(t=>{e[t]=(...n)=>{r&&yt(()=>{B.console[t](`Sentry Logger [${t}]:`,...n)})}}):_r.forEach(t=>{e[t]=()=>{}}),e}),Ye="?",Un=/\(error: (.*)\)/,Jn=/captureMessage|captureException/;function Ut(r){return r[r.length-1]||{}}const Bn="<anonymous>";function Ne(r){try{return r&&typeof r=="function"&&r.name||Bn}catch{return Bn}}function Gn(r){const e=r.exception;if(e){const t=[];try{return e.values.forEach(n=>{n.stacktrace.frames&&t.push(...n.stacktrace.frames)}),t}catch{return}}}const Jt={},Yn={};function We(r,e){Jt[r]=Jt[r]||[],Jt[r].push(e)}function ze(r,e){if(!Yn[r]){Yn[r]=!0;try{e()}catch(t){Ge&&R.error(`Error while instrumenting ${r}`,t)}}}function be(r,e){const t=r&&Jt[r];if(t)for(const n of t)try{n(e)}catch(i){Ge&&R.error(`Error while triggering instrumentation handler.
Type: ${r}
Name: ${Ne(n)}
Error:`,i)}}let Sr=null;function xa(){Sr=B.onerror,B.onerror=function(r,e,t,n,i){return be("error",{column:n,error:i,line:t,msg:r,url:e}),!!Sr&&Sr.apply(this,arguments)},B.onerror.__SENTRY_INSTRUMENTED__=!0}let wr=null;function Fa(){wr=B.onunhandledrejection,B.onunhandledrejection=function(r){return be("unhandledrejection",r),!wr||wr.apply(this,arguments)},B.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Bt(){return Er(B),B}function Er(r){const e=r.__SENTRY__=r.__SENTRY__||{};return e.version=e.version||Be,e[Be]=e[Be]||{}}const Wn=Object.prototype.toString;function kr(r){switch(Wn.call(r)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return He(r,Error)}}function st(r,e){return Wn.call(r)===`[object ${e}]`}function zn(r){return st(r,"ErrorEvent")}function Hn(r){return st(r,"DOMError")}function Oe(r){return st(r,"String")}function Cr(r){return typeof r=="object"&&r!==null&&"__sentry_template_string__"in r&&"__sentry_template_values__"in r}function Tr(r){return r===null||Cr(r)||typeof r!="object"&&typeof r!="function"}function ot(r){return st(r,"Object")}function Gt(r){return typeof Event<"u"&&He(r,Event)}function Yt(r){return!!(r&&r.then&&typeof r.then=="function")}function He(r,e){try{return r instanceof e}catch{return!1}}function Qn(r){return!(typeof r!="object"||r===null||!r.__isVue&&!r._isVue)}const Ar=B;function Kn(r,e={}){if(!r)return"<unknown>";try{let t=r;const n=5,i=[];let o=0,a=0;const l=" > ",u=l.length;let p;const f=Array.isArray(e)?e:e.keyAttrs,v=!Array.isArray(e)&&e.maxStringLength||80;for(;t&&o++<n&&(p=qa(t,f),!(p==="html"||o>1&&a+i.length*u+p.length>=v));)i.push(p),a+=p.length,t=t.parentNode;return i.reverse().join(l)}catch{return"<unknown>"}}function qa(r,e){const t=r,n=[];if(!t||!t.tagName)return"";if(Ar.HTMLElement&&t instanceof HTMLElement&&t.dataset){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}n.push(t.tagName.toLowerCase());const i=e&&e.length?e.filter(a=>t.getAttribute(a)).map(a=>[a,t.getAttribute(a)]):null;if(i&&i.length)i.forEach(a=>{n.push(`[${a[0]}="${a[1]}"]`)});else{t.id&&n.push(`#${t.id}`);const a=t.className;if(a&&Oe(a)){const l=a.split(/\s+/);for(const u of l)n.push(`.${u}`)}}const o=["aria-label","type","name","title","alt"];for(const a of o){const l=t.getAttribute(a);l&&n.push(`[${a}="${l}"]`)}return n.join("")}function at(r,e=0){return typeof r!="string"||e===0||r.length<=e?r:`${r.slice(0,e)}...`}function Xn(r,e){if(!Array.isArray(r))return"";const t=[];for(let n=0;n<r.length;n++){const i=r[n];try{Qn(i)?t.push("[VueViewModel]"):t.push(String(i))}catch{t.push("[value cannot be serialized]")}}return t.join(e)}function Va(r,e,t=!1){return!!Oe(r)&&(st(e,"RegExp")?e.test(r):!!Oe(e)&&(t?r===e:r.includes(e)))}function Wt(r,e=[],t=!1){return e.some(n=>Va(r,n,t))}function ue(r,e,t){if(!(e in r))return;const n=r[e],i=t(n);typeof i=="function"&&Zn(i,n);try{r[e]=i}catch{Ge&&R.log(`Failed to replace method "${e}" in object`,r)}}function Qe(r,e,t){try{Object.defineProperty(r,e,{value:t,writable:!0,configurable:!0})}catch{Ge&&R.log(`Failed to add non-enumerable property "${e}" to object`,r)}}function Zn(r,e){try{const t=e.prototype||{};r.prototype=e.prototype=t,Qe(r,"__sentry_original__",e)}catch{}}function Or(r){return r.__sentry_original__}function ei(r){if(kr(r))return{message:r.message,name:r.name,stack:r.stack,...ri(r)};if(Gt(r)){const e={type:r.type,target:ti(r.target),currentTarget:ti(r.currentTarget),...ri(r)};return typeof CustomEvent<"u"&&He(r,CustomEvent)&&(e.detail=r.detail),e}return r}function ti(r){try{return e=r,typeof Element<"u"&&He(e,Element)?Kn(r):Object.prototype.toString.call(r)}catch{return"<unknown>"}var e}function ri(r){if(typeof r=="object"&&r!==null){const e={};for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e}return{}}function pe(r){return Mr(r,new Map)}function Mr(r,e){if(function(t){if(!ot(t))return!1;try{const n=Object.getPrototypeOf(t).constructor.name;return!n||n==="Object"}catch{return!0}}(r)){const t=e.get(r);if(t!==void 0)return t;const n={};e.set(r,n);for(const i of Object.getOwnPropertyNames(r))r[i]!==void 0&&(n[i]=Mr(r[i],e));return n}if(Array.isArray(r)){const t=e.get(r);if(t!==void 0)return t;const n=[];return e.set(r,n),r.forEach(i=>{n.push(Mr(i,e))}),n}return r}function bt(){return Date.now()/1e3}const Me=function(){const{performance:r}=B;if(!r||!r.now)return bt;const e=Date.now()-r.now(),t=r.timeOrigin==null?e:r.timeOrigin;return()=>(t+r.now())/1e3}();function he(){const r=B,e=r.crypto||r.msCrypto;let t=()=>16*Math.random();try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(t=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(15&t())>>n/4).toString(16))}function ni(r){return r.exception&&r.exception.values?r.exception.values[0]:void 0}function Re(r){const{message:e,event_id:t}=r;if(e)return e;const n=ni(r);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||t||"<unknown>":t||"<unknown>"}function Pr(r,e,t){const n=r.exception=r.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=e||""),o.type||(o.type="Error")}function ct(r,e){const t=ni(r);if(!t)return;const n=t.mechanism;if(t.mechanism={type:"generic",handled:!0,...n,...e},e&&"data"in e){const i={...n&&n.data,...e.data};t.mechanism.data=i}}function ii(r){if(function(e){try{return e.__sentry_captured__}catch{}}(r))return!0;try{Qe(r,"__sentry_captured__",!0)}catch{}return!1}var Pe;function Ke(r){return new fe(e=>{e(r)})}function zt(r){return new fe((e,t)=>{t(r)})}(()=>{const{performance:r}=B;!r||!r.now||(r.now(),r.timing&&r.timing.navigationStart)})(),function(r){r[r.PENDING=0]="PENDING",r[r.RESOLVED=1]="RESOLVED",r[r.REJECTED=2]="REJECTED"}(Pe||(Pe={}));class fe{constructor(e){fe.prototype.__init.call(this),fe.prototype.__init2.call(this),fe.prototype.__init3.call(this),fe.prototype.__init4.call(this),this._state=Pe.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new fe((n,i)=>{this._handlers.push([!1,o=>{if(e)try{n(e(o))}catch(a){i(a)}else n(o)},o=>{if(t)try{n(t(o))}catch(a){i(a)}else i(o)}]),this._executeHandlers()})}catch(e){return this.then(t=>t,e)}finally(e){return new fe((t,n)=>{let i,o;return this.then(a=>{o=!1,i=a,e&&e()},a=>{o=!0,i=a,e&&e()}).then(()=>{o?n(i):t(i)})})}__init(){this._resolve=e=>{this._setResult(Pe.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Pe.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Pe.PENDING&&(Yt(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Pe.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(t=>{t[0]||(this._state===Pe.RESOLVED&&t[1](this._value),this._state===Pe.REJECTED&&t[2](this._value),t[0]=!0)})}}}function $a(r){const e=Me(),t={sid:he(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(n){return pe({sid:`${n.sid}`,init:n.init,started:new Date(1e3*n.started).toISOString(),timestamp:new Date(1e3*n.timestamp).toISOString(),status:n.status,errors:n.errors,did:typeof n.did=="number"||typeof n.did=="string"?`${n.did}`:void 0,duration:n.duration,abnormal_mechanism:n.abnormal_mechanism,attrs:{release:n.release,environment:n.environment,ip_address:n.ipAddress,user_agent:n.userAgent}})}(t)};return r&&lt(t,r),t}function lt(r,e={}){if(e.user&&(!r.ipAddress&&e.user.ip_address&&(r.ipAddress=e.user.ip_address),r.did||e.did||(r.did=e.user.id||e.user.email||e.user.username)),r.timestamp=e.timestamp||Me(),e.abnormal_mechanism&&(r.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(r.ignoreDuration=e.ignoreDuration),e.sid&&(r.sid=e.sid.length===32?e.sid:he()),e.init!==void 0&&(r.init=e.init),!r.did&&e.did&&(r.did=`${e.did}`),typeof e.started=="number"&&(r.started=e.started),r.ignoreDuration)r.duration=void 0;else if(typeof e.duration=="number")r.duration=e.duration;else{const t=r.timestamp-r.started;r.duration=t>=0?t:0}e.release&&(r.release=e.release),e.environment&&(r.environment=e.environment),!r.ipAddress&&e.ipAddress&&(r.ipAddress=e.ipAddress),!r.userAgent&&e.userAgent&&(r.userAgent=e.userAgent),typeof e.errors=="number"&&(r.errors=e.errors),e.status&&(r.status=e.status)}function si(){return he()}function Ir(){return he().substring(16)}function Ht(r,e,t=2){if(!e||typeof e!="object"||t<=0)return e;if(r&&e&&Object.keys(e).length===0)return r;const n={...r};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=Ht(n[i],e[i],t-1));return n}const Lr="_sentrySpan";function oi(r,e){e?Qe(r,Lr,e):delete r[Lr]}function ai(r){return r[Lr]}class jr{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:si(),spanId:Ir()}}clone(){const e=new jr;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,oi(e,ai(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&lt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return t===null?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t=typeof e=="function"?e(this):e,[n,i]=t instanceof xe?[t.getScopeData(),t.getRequestSession()]:ot(t)?[e,e.requestSession]:[],{tags:o,extra:a,user:l,contexts:u,level:p,fingerprint:f=[],propagationContext:v}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...a},this._contexts={...this._contexts,...u},l&&Object.keys(l).length&&(this._user=l),p&&(this._level=p),f.length&&(this._fingerprint=f),v&&(this._propagationContext=v),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,oi(this,void 0),this._attachments=[],this.setPropagationContext({traceId:si()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n=typeof t=="number"?t:100;if(n<=0)return this;const i={timestamp:bt(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ai(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Ht(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:Ir(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:he();if(!this._client)return R.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...t,event_id:n},this),n}captureMessage(e,t,n){const i=n&&n.event_id?n.event_id:he();if(!this._client)return R.warn("No client configured on scope - will not capture message!"),i;const o=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:o,...n,event_id:i},this),i}captureEvent(e,t){const n=t&&t.event_id?t.event_id:he();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(R.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const xe=jr;class Ua{constructor(e,t){let n,i;n=e||new xe,i=t||new xe,this._stack=[{scope:n}],this._isolationScope=i}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(i){throw this._popScope(),i}return Yt(n)?n.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function ut(){const r=Er(Bt());return r.stack=r.stack||new Ua(Vt("defaultCurrentScope",()=>new xe),Vt("defaultIsolationScope",()=>new xe))}function Ja(r){return ut().withScope(r)}function Ba(r,e){const t=ut();return t.withScope(()=>(t.getStackTop().scope=r,e(r)))}function ci(r){return ut().withScope(()=>r(ut().getIsolationScope()))}function Dr(r){const e=Er(r);return e.acs?e.acs:{withIsolationScope:ci,withScope:Ja,withSetScope:Ba,withSetIsolationScope:(t,n)=>ci(n),getCurrentScope:()=>ut().getScope(),getIsolationScope:()=>ut().getIsolationScope()}}function Xe(){return Dr(Bt()).getCurrentScope()}function _t(){return Dr(Bt()).getIsolationScope()}function re(){return Xe().getClient()}function Ga(r){const e=r.getPropagationContext(),{traceId:t,spanId:n,parentSpanId:i}=e;return pe({trace_id:t,span_id:n,parent_span_id:i})}function Ya(r){const e=r._sentryMetrics;if(!e)return;const t={};for(const[,[n,i]]of e)(t[n]||(t[n]=[])).push(pe(i));return t}const Wa=/^sentry-/;function za(r){const e=function(n){if(!(!n||!Oe(n)&&!Array.isArray(n)))return Array.isArray(n)?n.reduce((i,o)=>{const a=li(o);return Object.entries(a).forEach(([l,u])=>{i[l]=u}),i},{}):li(n)}(r);if(!e)return;const t=Object.entries(e).reduce((n,[i,o])=>(i.match(Wa)&&(n[i.slice(7)]=o),n),{});return Object.keys(t).length>0?t:void 0}function li(r){return r.split(",").map(e=>e.split("=").map(t=>decodeURIComponent(t.trim()))).reduce((e,[t,n])=>(t&&n&&(e[t]=n),e),{})}let ui=!1;function Ha(r){const{spanId:e,traceId:t,isRemote:n}=r.spanContext();return pe({parent_span_id:n?e:Nr(r).parent_span_id,span_id:n?Ir():e,trace_id:t})}function di(r){return typeof r=="number"?pi(r):Array.isArray(r)?r[0]+r[1]/1e9:r instanceof Date?pi(r.getTime()):Me()}function pi(r){return r>9999999999?r/1e3:r}function Nr(r){if(function(e){return typeof e.getSpanJSON=="function"}(r))return r.getSpanJSON();try{const{spanId:e,traceId:t}=r.spanContext();if(function(n){const i=n;return!!(i.attributes&&i.startTime&&i.name&&i.endTime&&i.status)}(r)){const{attributes:n,startTime:i,name:o,endTime:a,parentSpanId:l,status:u}=r;return pe({span_id:e,trace_id:t,data:n,description:o,parent_span_id:l,start_timestamp:di(i),timestamp:di(a)||void 0,status:Qa(u),op:n["sentry.op"],origin:n["sentry.origin"],_metrics_summary:Ya(r)})}return{span_id:e,trace_id:t}}catch{return{}}}function Qa(r){if(r&&r.code!==0)return r.code===1?"ok":r.message||"unknown_error"}function hi(r){return r._sentryRootSpan||r}function Ka(){ui||(yt(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),ui=!0)}const Rr="production";function fi(r,e){const t=e.getOptions(),{publicKey:n}=e.getDsn()||{},i=pe({environment:t.environment||Rr,release:t.release,public_key:n,trace_id:r});return e.emit("createDsc",i),i}function Xa(r){const e=re();if(!e)return{};const t=hi(r),n=t._frozenDsc;if(n)return n;const i=t.spanContext().traceState,o=i&&i.get("sentry.dsc"),a=o&&za(o);if(a)return a;const l=fi(r.spanContext().traceId,e),u=Nr(t),p=u.data||{},f=p["sentry.sample_rate"];f!=null&&(l.sample_rate=`${f}`);const v=p["sentry.source"],E=u.description;return v!=="url"&&E&&(l.transaction=E),function(k){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const _=re(),g=_&&_.getOptions();return!!g&&(g.enableTracing||"tracesSampleRate"in g||"tracesSampler"in g)}()&&(l.sampled=String(function(k){const{traceFlags:_}=k.spanContext();return _===1}(t))),e.emit("createDsc",l,t),l}const Za=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Qt(r,e=!1){const{host:t,path:n,pass:i,port:o,projectId:a,protocol:l,publicKey:u}=r;return`${l}://${u}${e&&i?`:${i}`:""}@${t}${o?`:${o}`:""}/${n&&`${n}/`}${a}`}function mi(r){return{protocol:r.protocol,publicKey:r.publicKey||"",pass:r.pass||"",host:r.host,port:r.port||"",path:r.path||"",projectId:r.projectId}}function ec(r){const e=typeof r=="string"?function(t){const n=Za.exec(t);if(!n)return void yt(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});const[i,o,a="",l="",u="",p=""]=n.slice(1);let f="",v=p;const E=v.split("/");if(E.length>1&&(f=E.slice(0,-1).join("/"),v=E.pop()),v){const k=v.match(/^\d+/);k&&(v=k[0])}return mi({host:l,pass:a,path:f,projectId:v,port:u,protocol:i,publicKey:o})}(r):mi(r);if(e&&function(t){if(!Ge)return!0;const{port:n,projectId:i,protocol:o}=t;return!(["protocol","publicKey","host","projectId"].find(a=>!t[a]&&(R.error(`Invalid Sentry Dsn: ${a} missing`),!0))||(i.match(/^\d+$/)?function(a){return a==="http"||a==="https"}(o)?n&&isNaN(parseInt(n,10))&&(R.error(`Invalid Sentry Dsn: Invalid port ${n}`),1):(R.error(`Invalid Sentry Dsn: Invalid protocol ${o}`),1):(R.error(`Invalid Sentry Dsn: Invalid projectId ${i}`),1)))}(e))return e}function Ie(r,e=100,t=1/0){try{return xr("",r,e,t)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function gi(r,e=3,t=102400){const n=Ie(r,e);return i=n,function(o){return~-encodeURI(o).split(/%..|./).length}(JSON.stringify(i))>t?gi(r,e-1,t):n;var i}function xr(r,e,t=1/0,n=1/0,i=function(){const o=typeof WeakSet=="function",a=o?new WeakSet:[];return[function(l){if(o)return!!a.has(l)||(a.add(l),!1);for(let u=0;u<a.length;u++)if(a[u]===l)return!0;return a.push(l),!1},function(l){if(o)a.delete(l);else for(let u=0;u<a.length;u++)if(a[u]===l){a.splice(u,1);break}}]}()){const[o,a]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=function(k,_){try{if(k==="domain"&&_&&typeof _=="object"&&_._events)return"[Domain]";if(k==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&_===global)return"[Global]";if(typeof window<"u"&&_===window)return"[Window]";if(typeof document<"u"&&_===document)return"[Document]";if(Qn(_))return"[VueViewModel]";if(ot(g=_)&&"nativeEvent"in g&&"preventDefault"in g&&"stopPropagation"in g)return"[SyntheticEvent]";if(typeof _=="number"&&!Number.isFinite(_))return`[${_}]`;if(typeof _=="function")return`[Function: ${Ne(_)}]`;if(typeof _=="symbol")return`[${String(_)}]`;if(typeof _=="bigint")return`[BigInt: ${String(_)}]`;const y=function(S){const C=Object.getPrototypeOf(S);return C?C.constructor.name:"null prototype"}(_);return/^HTML(\w*)Element$/.test(y)?`[HTMLElement: ${y}]`:`[object ${y}]`}catch(y){return`**non-serializable** (${y})`}var g}(r,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:t;if(u===0)return l.replace("object ","");if(o(e))return"[Circular ~]";const p=e;if(p&&typeof p.toJSON=="function")try{return xr("",p.toJSON(),u-1,n,i)}catch{}const f=Array.isArray(e)?[]:{};let v=0;const E=ei(e);for(const k in E){if(!Object.prototype.hasOwnProperty.call(E,k))continue;if(v>=n){f[k]="[MaxProperties ~]";break}const _=E[k];f[k]=xr(k,_,u-1,n,i),v++}return a(e),f}function St(r,e=[]){return[r,e]}function tc(r,e){const[t,n]=r;return[t,[...n,e]]}function vi(r,e){const t=r[1];for(const n of t)if(e(n,n[0].type))return!0;return!1}function Fr(r){return B.__SENTRY__&&B.__SENTRY__.encodePolyfill?B.__SENTRY__.encodePolyfill(r):new TextEncoder().encode(r)}function rc(r){const[e,t]=r;let n=JSON.stringify(e);function i(o){typeof n=="string"?n=typeof o=="string"?n+o:[Fr(n),o]:n.push(typeof o=="string"?Fr(o):o)}for(const o of t){const[a,l]=o;if(i(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)i(l);else{let u;try{u=JSON.stringify(l)}catch{u=JSON.stringify(Ie(l))}i(u)}}return typeof n=="string"?n:function(o){const a=o.reduce((p,f)=>p+f.length,0),l=new Uint8Array(a);let u=0;for(const p of o)l.set(p,u),u+=p.length;return l}(n)}function nc(r){const e=typeof r.data=="string"?Fr(r.data):r.data;return[pe({type:"attachment",length:e.length,filename:r.filename,content_type:r.contentType,attachment_type:r.attachmentType}),e]}const ic={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function yi(r){return ic[r]}function bi(r){if(!r||!r.sdk)return;const{name:e,version:t}=r.sdk;return{name:e,version:t}}function sc(r,e,t,n){const i=bi(t),o=r.type&&r.type!=="replay_event"?r.type:"event";(function(l,u){u&&(l.sdk=l.sdk||{},l.sdk.name=l.sdk.name||u.name,l.sdk.version=l.sdk.version||u.version,l.sdk.integrations=[...l.sdk.integrations||[],...u.integrations||[]],l.sdk.packages=[...l.sdk.packages||[],...u.packages||[]])})(r,t&&t.sdk);const a=function(l,u,p,f){const v=l.sdkProcessingMetadata&&l.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:l.event_id,sent_at:new Date().toISOString(),...u&&{sdk:u},...!!p&&f&&{dsn:Qt(f)},...v&&{trace:pe({...v})}}}(r,i,n,e);return delete r.sdkProcessingMetadata,St(a,[[{type:o},r]])}function qr(r,e,t,n=0){return new fe((i,o)=>{const a=r[n];if(e===null||typeof a!="function")i(e);else{const l=a({...e},t);Q&&a.id&&l===null&&R.log(`Event processor "${a.id}" dropped event`),Yt(l)?l.then(u=>qr(r,u,t,n+1).then(i)).then(null,o):qr(r,l,t,n+1).then(i).then(null,o)}})}let Kt,_i,Vr;function oc(r,e){const{fingerprint:t,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=e;(function(a,l){const{extra:u,tags:p,user:f,contexts:v,level:E,transactionName:k}=l,_=pe(u);_&&Object.keys(_).length&&(a.extra={..._,...a.extra});const g=pe(p);g&&Object.keys(g).length&&(a.tags={...g,...a.tags});const y=pe(f);y&&Object.keys(y).length&&(a.user={...y,...a.user});const S=pe(v);S&&Object.keys(S).length&&(a.contexts={...S,...a.contexts}),E&&(a.level=E),k&&a.type!=="transaction"&&(a.transaction=k)})(r,e),n&&function(a,l){a.contexts={trace:Ha(l),...a.contexts},a.sdkProcessingMetadata={dynamicSamplingContext:Xa(l),...a.sdkProcessingMetadata};const u=hi(l),p=Nr(u).description;p&&!a.transaction&&a.type==="transaction"&&(a.transaction=p)}(r,n),function(a,l){a.fingerprint=a.fingerprint?Array.isArray(a.fingerprint)?a.fingerprint:[a.fingerprint]:[],l&&(a.fingerprint=a.fingerprint.concat(l)),a.fingerprint&&!a.fingerprint.length&&delete a.fingerprint}(r,t),function(a,l){const u=[...a.breadcrumbs||[],...l];a.breadcrumbs=u.length?u:void 0}(r,i),function(a,l){a.sdkProcessingMetadata={...a.sdkProcessingMetadata,...l}}(r,o)}function Si(r,e){const{extra:t,tags:n,user:i,contexts:o,level:a,sdkProcessingMetadata:l,breadcrumbs:u,fingerprint:p,eventProcessors:f,attachments:v,propagationContext:E,transactionName:k,span:_}=e;Xt(r,"extra",t),Xt(r,"tags",n),Xt(r,"user",i),Xt(r,"contexts",o),r.sdkProcessingMetadata=Ht(r.sdkProcessingMetadata,l,2),a&&(r.level=a),k&&(r.transactionName=k),_&&(r.span=_),u.length&&(r.breadcrumbs=[...r.breadcrumbs,...u]),p.length&&(r.fingerprint=[...r.fingerprint,...p]),f.length&&(r.eventProcessors=[...r.eventProcessors,...f]),v.length&&(r.attachments=[...r.attachments,...v]),r.propagationContext={...r.propagationContext,...E}}function Xt(r,e,t){r[e]=Ht(r[e],t,1)}function ac(r,e,t,n,i,o){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=r,u={...e,event_id:e.event_id||t.event_id||he(),timestamp:e.timestamp||bt()},p=t.integrations||r.integrations.map(_=>_.name);(function(_,g){const{environment:y,release:S,dist:C,maxValueLength:M=250}=g;_.environment=_.environment||y||Rr,!_.release&&S&&(_.release=S),!_.dist&&C&&(_.dist=C),_.message&&(_.message=at(_.message,M));const j=_.exception&&_.exception.values&&_.exception.values[0];j&&j.value&&(j.value=at(j.value,M));const D=_.request;D&&D.url&&(D.url=at(D.url,M))})(u,r),function(_,g){g.length>0&&(_.sdk=_.sdk||{},_.sdk.integrations=[..._.sdk.integrations||[],...g])}(u,p),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&function(_,g){const y=function(S){const C=B._sentryDebugIds;if(!C)return{};const M=Object.keys(C);return Vr&&M.length===_i||(_i=M.length,Vr=M.reduce((j,D)=>{Kt||(Kt={});const q=Kt[D];if(q)j[q[0]]=q[1];else{const W=S(D);for(let ne=W.length-1;ne>=0;ne--){const Ue=W[ne],O=Ue&&Ue.filename,G=C[D];if(O&&G){j[O]=G,Kt[D]=[O,G];break}}}return j},{})),Vr}(g);try{_.exception.values.forEach(S=>{S.stacktrace.frames.forEach(C=>{y&&C.filename&&(C.debug_id=y[C.filename])})})}catch{}}(u,r.stackParser);const f=function(_,g){if(!g)return _;const y=_?_.clone():new xe;return y.update(g),y}(n,t.captureContext);t.mechanism&&ct(u,t.mechanism);const v=i?i.getEventProcessors():[],E=Vt("globalScope",()=>new xe).getScopeData();o&&Si(E,o.getScopeData()),f&&Si(E,f.getScopeData());const k=[...t.attachments||[],...E.attachments];return k.length&&(t.attachments=k),oc(u,E),qr([...v,...E.eventProcessors],u,t).then(_=>(_&&function(g){const y={};try{g.exception.values.forEach(C=>{C.stacktrace.frames.forEach(M=>{M.debug_id&&(M.abs_path?y[M.abs_path]=M.debug_id:M.filename&&(y[M.filename]=M.debug_id),delete M.debug_id)})})}catch{}if(Object.keys(y).length===0)return;g.debug_meta=g.debug_meta||{},g.debug_meta.images=g.debug_meta.images||[];const S=g.debug_meta.images;Object.entries(y).forEach(([C,M])=>{S.push({type:"sourcemap",code_file:C,debug_id:M})})}(_),typeof a=="number"&&a>0?function(g,y,S){if(!g)return null;const C={...g,...g.breadcrumbs&&{breadcrumbs:g.breadcrumbs.map(M=>({...M,...M.data&&{data:Ie(M.data,y,S)}}))},...g.user&&{user:Ie(g.user,y,S)},...g.contexts&&{contexts:Ie(g.contexts,y,S)},...g.extra&&{extra:Ie(g.extra,y,S)}};return g.contexts&&g.contexts.trace&&C.contexts&&(C.contexts.trace=g.contexts.trace,g.contexts.trace.data&&(C.contexts.trace.data=Ie(g.contexts.trace.data,y,S))),g.spans&&(C.spans=g.spans.map(M=>({...M,...M.data&&{data:Ie(M.data,y,S)}}))),g.contexts&&g.contexts.flags&&C.contexts&&(C.contexts.flags=Ie(g.contexts.flags,3,S)),C}(_,a,l):_))}function Au(r){}function wi(r,e){return Xe().captureEvent(r,e)}function Ei(r){const e=re(),t=_t(),n=Xe(),{release:i,environment:o=Rr}=e&&e.getOptions()||{},{userAgent:a}=B.navigator||{},l=$a({release:i,environment:o,user:n.getUser()||t.getUser(),...a&&{userAgent:a},...r}),u=t.getSession();return u&&u.status==="ok"&&lt(u,{status:"exited"}),ki(),t.setSession(l),n.setSession(l),l}function ki(){const r=_t(),e=Xe(),t=e.getSession()||r.getSession();t&&function(n,i){let o={};n.status==="ok"&&(o={status:"exited"}),lt(n,o)}(t),Ci(),r.setSession(),e.setSession()}function Ci(){const r=_t(),e=Xe(),t=re(),n=e.getSession()||r.getSession();n&&t&&t.captureSession(n)}function Ti(r=!1){r?ki():Ci()}function cc(r,e,t){return e||`${function(n){return`${function(i){const o=i.protocol?`${i.protocol}:`:"",a=i.port?`:${i.port}`:"";return`${o}//${i.host}${a}${i.path?`/${i.path}`:""}/api/`}(n)}${n.projectId}/envelope/`}(r)}?${function(n,i){const o={sentry_version:"7"};return n.publicKey&&(o.sentry_key=n.publicKey),i&&(o.sentry_client=`${i.name}/${i.version}`),new URLSearchParams(o).toString()}(r,t)}`}const Ai=[];function Oi(r,e){for(const t of e)t&&t.afterAllSetup&&t.afterAllSetup(r)}function Mi(r,e,t){if(t[e.name])Q&&R.log(`Integration skipped because it was already installed: ${e.name}`);else{if(t[e.name]=e,Ai.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Ai.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(r),typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);r.on("preprocessEvent",(i,o)=>n(i,o,r))}if(typeof e.processEvent=="function"){const n=e.processEvent.bind(e),i=Object.assign((o,a)=>n(o,a,r),{id:e.name});r.addEventProcessor(i)}Q&&R.log(`Integration installed: ${e.name}`)}}class _e extends Error{constructor(e,t="warn"){super(e),this.message=e,this.logLevel=t}}const Pi="Not capturing exception because it's already been captured.";class lc{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=ec(e.dsn):Q&&R.warn("No DSN provided, client will not send events."),this._dsn){const n=cc(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}const t=["enableTracing","tracesSampleRate","tracesSampler"].find(n=>n in e&&e[n]==null);t&&yt(()=>{console.warn(`[Sentry] Deprecation warning: \`${t}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,t,n){const i=he();if(ii(e))return Q&&R.log(Pi),i;const o={event_id:i,...t};return this._process(this.eventFromException(e,o).then(a=>this._captureEvent(a,o,n))),o.event_id}captureMessage(e,t,n,i){const o={event_id:he(),...n},a=Cr(e)?e:String(e),l=Tr(e)?this.eventFromMessage(a,t,o):this.eventFromException(e,o);return this._process(l.then(u=>this._captureEvent(u,o,i))),o.event_id}captureEvent(e,t,n){const i=he();if(t&&t.originalException&&ii(t.originalException))return Q&&R.log(Pi),i;const o={event_id:i,...t},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,a||n)),o.event_id}captureSession(e){typeof e.release!="string"?Q&&R.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),lt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.emit("flush"),this._isClientDoneProcessing(e).then(n=>t.flush(e).then(i=>n&&i))):Ke(!0)}close(e){return this.flush(e).then(t=>(this.getOptions().enabled=!1,this.emit("close"),t))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];Mi(this,e,this._integrations),t||Oi(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=sc(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of t.attachments||[])n=tc(n,nc(o));const i=this.sendEnvelope(n);i&&i.then(o=>this.emit("afterSendEvent",e,o),null)}sendSession(e){const t=function(n,i,o,a){const l=bi(o);return St({sent_at:new Date().toISOString(),...l&&{sdk:l},...!!a&&i&&{dsn:Qt(i)}},["aggregates"in n?[{type:"sessions"},n]:[{type:"session"},n.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const i=typeof n=="number"?n:1,o=`${e}:${t}`;Q&&R.log(`Recording outcome: "${o}"${i>1?` (${i} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+i}}on(e,t){const n=this._hooks[e]=this._hooks[e]||[];return n.push(t),()=>{const i=n.indexOf(t);i>-1&&n.splice(i,1)}}emit(e,...t){const n=this._hooks[e];n&&n.forEach(i=>i(...t))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,t=>(Q&&R.error("Error while sending envelope:",t),t)):(Q&&R.error("Transport disabled"),Ke({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(t,n){const i={};return n.forEach(o=>{o&&Mi(t,o,i)}),i}(this,e),Oi(this,e)}_updateSessionFromEvent(e,t){let n=t.level==="fatal",i=!1;const o=t.exception&&t.exception.values;if(o){i=!0;for(const l of o){const u=l.mechanism;if(u&&u.handled===!1){n=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&n)&&(lt(e,{...n&&{status:"crashed"},errors:e.errors||Number(i||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new fe(t=>{let n=0;const i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),t(!0)):(n+=1,e&&n>=e&&(clearInterval(i),t(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,t,n=Xe(),i=_t()){const o=this.getOptions(),a=Object.keys(this._integrations);return!t.integrations&&a.length>0&&(t.integrations=a),this.emit("preprocessEvent",e,t),e.type||i.setLastEventId(e.event_id||t.event_id),ac(o,e,t,n,this,i).then(l=>{if(l===null)return l;l.contexts={trace:Ga(n),...l.contexts};const u=function(p,f){const v=f.getPropagationContext();return v.dsc||fi(v.traceId,p)}(this,n);return l.sdkProcessingMetadata={dynamicSamplingContext:u,...l.sdkProcessingMetadata},l})}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then(i=>i.event_id,i=>{Q&&(i instanceof _e&&i.logLevel==="log"?R.log(i.message):R.warn(i))})}_processEvent(e,t,n){const i=this.getOptions(),{sampleRate:o}=i,a=Li(e),l=Ii(e),u=e.type||"error",p=`before send for type \`${u}\``,f=o===void 0?void 0:function(k){if(typeof k=="boolean")return Number(k);const _=typeof k=="string"?parseFloat(k):k;if(!(typeof _!="number"||isNaN(_)||_<0||_>1))return _;Q&&R.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(k)} of type ${JSON.stringify(typeof k)}.`)}(o);if(l&&typeof f=="number"&&Math.random()>f)return this.recordDroppedEvent("sample_rate","error",e),zt(new _e(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const v=u==="replay_event"?"replay":u,E=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,E).then(k=>{if(k===null)throw this.recordDroppedEvent("event_processor",v,e),new _e("An event processor returned `null`, will not send event.","log");if(t.data&&t.data.__sentry__===!0)return k;const _=function(g,y,S,C){const{beforeSend:M,beforeSendTransaction:j,beforeSendSpan:D}=y;if(Ii(S)&&M)return M(S,C);if(Li(S)){if(S.spans&&D){const q=[];for(const W of S.spans){const ne=D(W);ne?q.push(ne):(Ka(),g.recordDroppedEvent("before_send","span"))}S.spans=q}if(j){if(S.spans){const q=S.spans.length;S.sdkProcessingMetadata={...S.sdkProcessingMetadata,spanCountBeforeProcessing:q}}return j(S,C)}}return S}(this,i,k,t);return function(g,y){const S=`${y} must return \`null\` or a valid event.`;if(Yt(g))return g.then(C=>{if(!ot(C)&&C!==null)throw new _e(S);return C},C=>{throw new _e(`${y} rejected with ${C}`)});if(!ot(g)&&g!==null)throw new _e(S);return g}(_,p)}).then(k=>{if(k===null){if(this.recordDroppedEvent("before_send",v,e),a){const y=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",y)}throw new _e(`${p} returned \`null\`, will not send event.`,"log")}const _=n&&n.getSession();if(!a&&_&&this._updateSessionFromEvent(_,k),a){const y=(k.sdkProcessingMetadata&&k.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(k.spans?k.spans.length:0);y>0&&this.recordDroppedEvent("before_send","span",y)}const g=k.transaction_info;if(a&&g&&k.transaction!==e.transaction){const y="custom";k.transaction_info={...g,source:y}}return this.sendEvent(k,t),k}).then(null,k=>{throw k instanceof _e?k:(this.captureException(k,{data:{__sentry__:!0},originalException:k}),new _e(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${k}`))})}_process(e){this._numProcessing++,e.then(t=>(this._numProcessing--,t),t=>(this._numProcessing--,t))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([t,n])=>{const[i,o]=t.split(":");return{reason:i,category:o,quantity:n}})}_flushOutcomes(){Q&&R.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0)return void(Q&&R.log("No outcomes to send"));if(!this._dsn)return void(Q&&R.log("No dsn provided, will not send outcomes"));Q&&R.log("Sending outcomes:",e);const t=(n=e,St((i=this._options.tunnel&&Qt(this._dsn))?{dsn:i}:{},[[{type:"client_report"},{timestamp:o||bt(),discarded_events:n}]]));var n,i,o;this.sendEnvelope(t)}}function Ii(r){return r.type===void 0}function Li(r){return r.type==="transaction"}function uc(r){const e=[];function t(n){return e.splice(e.indexOf(n),1)[0]||Promise.resolve(void 0)}return{$:e,add:function(n){if(!(r===void 0||e.length<r))return zt(new _e("Not adding Promise because buffer limit was reached."));const i=n();return e.indexOf(i)===-1&&e.push(i),i.then(()=>t(i)).then(null,()=>t(i).then(null,()=>{})),i},drain:function(n){return new fe((i,o)=>{let a=e.length;if(!a)return i(!0);const l=setTimeout(()=>{n&&n>0&&i(!1)},n);e.forEach(u=>{Ke(u).then(()=>{--a||(clearTimeout(l),i(!0))},o)})})}}}function dc(r,{statusCode:e,headers:t},n=Date.now()){const i={...r},o=t&&t["x-sentry-rate-limits"],a=t&&t["retry-after"];if(o)for(const l of o.trim().split(",")){const[u,p,,,f]=l.split(":",5),v=parseInt(u,10),E=1e3*(isNaN(v)?60:v);if(p)for(const k of p.split(";"))k==="metric_bucket"&&f&&!f.split(";").includes("custom")||(i[k]=n+E);else i.all=n+E}else a?i.all=n+function(l,u=Date.now()){const p=parseInt(`${l}`,10);if(!isNaN(p))return 1e3*p;const f=Date.parse(`${l}`);return isNaN(f)?6e4:f-u}(a,n):e===429&&(i.all=n+6e4);return i}function pc(r,e,t=uc(r.bufferSize||64)){let n={};return{send:function(i){const o=[];if(vi(i,(u,p)=>{const f=yi(p);if(function(v,E,k=Date.now()){return function(_,g){return _[g]||_.all||0}(v,E)>k}(n,f)){const v=ji(u,p);r.recordDroppedEvent("ratelimit_backoff",f,v)}else o.push(u)}),o.length===0)return Ke({});const a=St(i[0],o),l=u=>{vi(a,(p,f)=>{const v=ji(p,f);r.recordDroppedEvent(u,yi(f),v)})};return t.add(()=>e({body:rc(a)}).then(u=>(u.statusCode!==void 0&&(u.statusCode<200||u.statusCode>=300)&&Q&&R.warn(`Sentry responded with status code ${u.statusCode} to sent event.`),n=dc(n,u),u),u=>{throw l("network_error"),u})).then(u=>u,u=>{if(u instanceof _e)return Q&&R.error("Skipped sending event because buffer is full."),l("queue_overflow"),Ke({});throw u})},flush:i=>t.drain(i)}}function ji(r,e){if(e==="event"||e==="transaction")return Array.isArray(r)?r[1]:void 0}const hc=100;function Ze(r,e){const t=re(),n=_t();if(!t)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=hc}=t.getOptions();if(o<=0)return;const a={timestamp:bt(),...r},l=i?yt(()=>i(a,e)):a;l!==null&&(t.emit&&t.emit("beforeAddBreadcrumb",l,e),n.addBreadcrumb(l,o))}let Di;const Ni=new WeakMap,fc=()=>({name:"FunctionToString",setupOnce(){Di=Function.prototype.toString;try{Function.prototype.toString=function(...r){const e=Or(this),t=Ni.has(re())&&e!==void 0?e:this;return Di.apply(t,r)}}catch{}},setup(r){Ni.set(r,!0)}}),mc=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],gc=(r={})=>({name:"InboundFilters",processEvent(e,t,n){const i=n.getOptions(),o=function(a={},l={}){return{allowUrls:[...a.allowUrls||[],...l.allowUrls||[]],denyUrls:[...a.denyUrls||[],...l.denyUrls||[]],ignoreErrors:[...a.ignoreErrors||[],...l.ignoreErrors||[],...a.disableErrorDefaults?[]:mc],ignoreTransactions:[...a.ignoreTransactions||[],...l.ignoreTransactions||[]],ignoreInternal:a.ignoreInternal===void 0||a.ignoreInternal}}(r,i);return function(a,l){return l.ignoreInternal&&function(u){try{return u.exception.values[0].type==="SentryError"}catch{}return!1}(a)?(Q&&R.warn(`Event dropped due to being internal Sentry Error.
Event: ${Re(a)}`),!0):function(u,p){return u.type||!p||!p.length?!1:function(f){const v=[];f.message&&v.push(f.message);let E;try{E=f.exception.values[f.exception.values.length-1]}catch{}return E&&E.value&&(v.push(E.value),E.type&&v.push(`${E.type}: ${E.value}`)),v}(u).some(f=>Wt(f,p))}(a,l.ignoreErrors)?(Q&&R.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Re(a)}`),!0):function(u){return u.type||!u.exception||!u.exception.values||u.exception.values.length===0?!1:!u.message&&!u.exception.values.some(p=>p.stacktrace||p.type&&p.type!=="Error"||p.value)}(a)?(Q&&R.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Re(a)}`),!0):function(u,p){if(u.type!=="transaction"||!p||!p.length)return!1;const f=u.transaction;return!!f&&Wt(f,p)}(a,l.ignoreTransactions)?(Q&&R.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Re(a)}`),!0):function(u,p){if(!p||!p.length)return!1;const f=Zt(u);return!!f&&Wt(f,p)}(a,l.denyUrls)?(Q&&R.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Re(a)}.
Url: ${Zt(a)}`),!0):function(u,p){if(!p||!p.length)return!0;const f=Zt(u);return!f||Wt(f,p)}(a,l.allowUrls)?!1:(Q&&R.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Re(a)}.
Url: ${Zt(a)}`),!0)}(e,o)?null:e}});function Zt(r){try{let e;try{e=r.exception.values[0].stacktrace.frames}catch{}return e?function(t=[]){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i&&i.filename!=="<anonymous>"&&i.filename!=="[native code]")return i.filename||null}return null}(e):null}catch{return Q&&R.error(`Cannot extract url for event ${Re(r)}`),null}}function vc(r,e,t=250,n,i,o,a){if(!(o.exception&&o.exception.values&&a&&He(a.originalException,Error)))return;const l=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var u,p;l&&(o.exception.values=(u=$r(r,e,i,a.originalException,n,o.exception.values,l,0),p=t,u.map(f=>(f.value&&(f.value=at(f.value,p)),f))))}function $r(r,e,t,n,i,o,a,l){if(o.length>=t+1)return o;let u=[...o];if(He(n[i],Error)){Ri(a,l);const p=r(e,n[i]),f=u.length;xi(p,i,f,l),u=$r(r,e,t,n[i],i,[p,...u],p,f)}return Array.isArray(n.errors)&&n.errors.forEach((p,f)=>{if(He(p,Error)){Ri(a,l);const v=r(e,p),E=u.length;xi(v,`errors[${f}]`,E,l),u=$r(r,e,t,p,i,[v,...u],v,E)}}),u}function Ri(r,e){r.mechanism=r.mechanism||{type:"generic",handled:!0},r.mechanism={...r.mechanism,...r.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function xi(r,e,t,n){r.mechanism=r.mechanism||{type:"generic",handled:!0},r.mechanism={...r.mechanism,type:"chained",source:e,exception_id:t,parent_id:n}}function Ur(r){if(!r)return{};const e=r.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const t=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:t,hash:n,relative:e[5]+t+n}}function yc(){"console"in B&&_r.forEach(function(r){r in B.console&&ue(B.console,r,function(e){return $t[r]=e,function(...t){be("console",{args:t,level:r});const n=$t[r];n&&n.apply(B.console,t)}})})}function bc(r){return r==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(r)?r:"log"}const _c=()=>{let r;return{name:"Dedupe",processEvent(e){if(e.type)return e;try{if(function(t,n){return n?!!(function(i,o){const a=i.message,l=o.message;return!(!a&&!l||a&&!l||!a&&l||a!==l||!qi(i,o)||!Fi(i,o))}(t,n)||function(i,o){const a=Vi(o),l=Vi(i);return!(!a||!l||a.type!==l.type||a.value!==l.value||!qi(i,o)||!Fi(i,o))}(t,n)):!1}(e,r))return Q&&R.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return r=e}}};function Fi(r,e){let t=Gn(r),n=Gn(e);if(!t&&!n)return!0;if(t&&!n||!t&&n||n.length!==t.length)return!1;for(let i=0;i<n.length;i++){const o=n[i],a=t[i];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}function qi(r,e){let t=r.fingerprint,n=e.fingerprint;if(!t&&!n)return!0;if(t&&!n||!t&&n)return!1;try{return t.join("")===n.join("")}catch{return!1}}function Vi(r){return r.exception&&r.exception.values&&r.exception.values[0]}function $i(r){return r===void 0?void 0:r>=400&&r<500?"warning":r>=500?"error":void 0}const Jr=B;function Br(r){return r&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(r.toString())}function Sc(){if(typeof EdgeRuntime=="string")return!0;if(!function(){if(!("fetch"in Jr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Br(Jr.fetch))return!0;let r=!1;const e=Jr.document;if(e&&typeof e.createElement=="function")try{const t=e.createElement("iframe");t.hidden=!0,e.head.appendChild(t),t.contentWindow&&t.contentWindow.fetch&&(r=Br(t.contentWindow.fetch)),e.head.removeChild(t)}catch(t){Ge&&R.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return r}function wc(r,e){const t="fetch";We(t,r),ze(t,()=>function(n,i=!1){i&&!Sc()||ue(B,"fetch",function(o){return function(...a){const l=new Error,{method:u,url:p}=function(v){if(v.length===0)return{method:"GET",url:""};if(v.length===2){const[k,_]=v;return{url:Ui(k),method:Gr(_,"method")?String(_.method).toUpperCase():"GET"}}const E=v[0];return{url:Ui(E),method:Gr(E,"method")?String(E.method).toUpperCase():"GET"}}(a),f={args:a,fetchData:{method:u,url:p},startTimestamp:1e3*Me(),virtualError:l};return n||be("fetch",{...f}),o.apply(B,a).then(async v=>(n?n(v):be("fetch",{...f,endTimestamp:1e3*Me(),response:v}),v),v=>{throw be("fetch",{...f,endTimestamp:1e3*Me(),error:v}),kr(v)&&v.stack===void 0&&(v.stack=l.stack,Qe(v,"framesToPop",1)),v})}})}(void 0,e))}function Gr(r,e){return!!r&&typeof r=="object"&&!!r[e]}function Ui(r){return typeof r=="string"?r:r?Gr(r,"url")?r.url:r.toString?r.toString():"":""}const er=B,X=B;let Yr=0;function Ji(){return Yr>0}function dt(r,e={}){if(!function(n){return typeof n=="function"}(r))return r;try{const n=r.__sentry_wrapped__;if(n)return typeof n=="function"?n:r;if(Or(r))return r}catch{return r}const t=function(...n){try{const i=n.map(o=>dt(o,e));return r.apply(this,i)}catch(i){throw Yr++,setTimeout(()=>{Yr--}),function(...o){const a=Dr(Bt());if(o.length===2){const[l,u]=o;return l?a.withSetScope(l,u):a.withScope(u)}a.withScope(o[0])}(o=>{var a;o.addEventProcessor(l=>(e.mechanism&&(Pr(l,void 0),ct(l,e.mechanism)),l.extra={...l.extra,arguments:n},l)),a=i,Xe().captureException(a,void 0)}),i}};try{for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}catch{}Zn(t,r),Qe(r,"__sentry_wrapped__",t);try{Object.getOwnPropertyDescriptor(t,"name").configurable&&Object.defineProperty(t,"name",{get:()=>r.name})}catch{}return t}const tr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Wr(r,e){const t=Hr(r,e),n={type:Cc(e),value:Tc(e)};return t.length&&(n.stacktrace={frames:t}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function Ec(r,e,t,n){const i=re(),o=i&&i.getOptions().normalizeDepth,a=function(p){for(const f in p)if(Object.prototype.hasOwnProperty.call(p,f)){const v=p[f];if(v instanceof Error)return v}}(e),l={__serialized__:gi(e,o)};if(a)return{exception:{values:[Wr(r,a)]},extra:l};const u={exception:{values:[{type:Gt(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:Ac(e,{isUnhandledRejection:n})}]},extra:l};if(t){const p=Hr(r,t);p.length&&(u.exception.values[0].stacktrace={frames:p})}return u}function zr(r,e){return{exception:{values:[Wr(r,e)]}}}function Hr(r,e){const t=e.stacktrace||e.stack||"",n=function(o){return o&&kc.test(o.message)?1:0}(e),i=function(o){return typeof o.framesToPop=="number"?o.framesToPop:0}(e);try{return r(t,n,i)}catch{}return[]}const kc=/Minified React error #\d+;/i;function Bi(r){return typeof WebAssembly<"u"&&WebAssembly.Exception!==void 0&&r instanceof WebAssembly.Exception}function Cc(r){const e=r&&r.name;return!e&&Bi(r)?r.message&&Array.isArray(r.message)&&r.message.length==2?r.message[0]:"WebAssembly.Exception":e}function Tc(r){const e=r&&r.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:Bi(r)&&Array.isArray(r.message)&&r.message.length==2?r.message[1]:e:"No error message"}function Qr(r,e,t,n,i){let o;if(zn(e)&&e.error)return zr(r,e.error);if(Hn(e)||st(e,"DOMException")){const a=e;if("stack"in e)o=zr(r,e);else{const l=a.name||(Hn(a)?"DOMError":"DOMException"),u=a.message?`${l}: ${a.message}`:l;o=Kr(r,u,t,n),Pr(o,u)}return"code"in a&&(o.tags={...o.tags,"DOMException.code":`${a.code}`}),o}return kr(e)?zr(r,e):ot(e)||Gt(e)?(o=Ec(r,e,t,i),ct(o,{synthetic:!0}),o):(o=Kr(r,e,t,n),Pr(o,`${e}`),ct(o,{synthetic:!0}),o)}function Kr(r,e,t,n){const i={};if(n&&t){const o=Hr(r,t);o.length&&(i.exception={values:[{value:e,stacktrace:{frames:o}}]}),ct(i,{synthetic:!0})}if(Cr(e)){const{__sentry_template_string__:o,__sentry_template_values__:a}=e;return i.logentry={message:o,params:a},i}return i.message=e,i}function Ac(r,{isUnhandledRejection:e}){const t=function(i,o=40){const a=Object.keys(ei(i));a.sort();const l=a[0];if(!l)return"[object has no keys]";if(l.length>=o)return at(l,o);for(let u=a.length;u>0;u--){const p=a.slice(0,u).join(", ");if(!(p.length>o))return u===a.length?p:at(p,o)}return""}(r),n=e?"promise rejection":"exception";return zn(r)?`Event \`ErrorEvent\` captured as ${n} with message \`${r.message}\``:Gt(r)?`Event \`${function(i){try{const o=Object.getPrototypeOf(i);return o?o.constructor.name:void 0}catch{}}(r)}\` (type=${r.type}) captured as ${n}`:`Object captured as ${n} with keys: ${t}`}class Oc extends lc{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e};(function(n,i,o=[i],a="npm"){const l=n._metadata||{};l.sdk||(l.sdk={name:`sentry.javascript.${i}`,packages:o.map(u=>({name:`${a}:@sentry/${u}`,version:Be})),version:Be}),n._metadata=l})(t,"browser",["browser"],X.SENTRY_SDK_SOURCE||"npm"),super(t),t.sendClientReports&&X.document&&X.document.addEventListener("visibilitychange",()=>{X.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,t){return function(n,i,o,a){const l=Qr(n,i,o&&o.syntheticException||void 0,a);return ct(l),l.level="error",o&&o.event_id&&(l.event_id=o.event_id),Ke(l)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(i,o,a="info",l,u){const p=Kr(i,o,l&&l.syntheticException||void 0,u);return p.level=a,l&&l.event_id&&(p.event_id=l.event_id),Ke(p)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(tr&&R.warn("SDK not enabled, will not capture user feedback."));const t=function(n,{metadata:i,tunnel:o,dsn:a}){const l={event_id:n.event_id,sent_at:new Date().toISOString(),...i&&i.sdk&&{sdk:{name:i.sdk.name,version:i.sdk.version}},...!!o&&!!a&&{dsn:Qt(a)}};return St(l,[function(p){return[{type:"user_report"},p]}(n)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}}const Mc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,oe=B;let Gi,Xr,Zr,rr;function Pc(){if(!oe.document)return;const r=be.bind(null,"dom"),e=Yi(r,!0);oe.document.addEventListener("click",e,!1),oe.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(t=>{const n=oe[t],i=n&&n.prototype;i&&i.hasOwnProperty&&i.hasOwnProperty("addEventListener")&&(ue(i,"addEventListener",function(o){return function(a,l,u){if(a==="click"||a=="keypress")try{const p=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=p[a]=p[a]||{refCount:0};if(!f.handler){const v=Yi(r);f.handler=v,o.call(this,a,v,u)}f.refCount++}catch{}return o.call(this,a,l,u)}}),ue(i,"removeEventListener",function(o){return function(a,l,u){if(a==="click"||a=="keypress")try{const p=this.__sentry_instrumentation_handlers__||{},f=p[a];f&&(f.refCount--,f.refCount<=0&&(o.call(this,a,f.handler,u),f.handler=void 0,delete p[a]),Object.keys(p).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return o.call(this,a,l,u)}}))})}function Yi(r,e=!1){return t=>{if(!t||t._sentryCaptured)return;const n=function(o){try{return o.target}catch{return null}}(t);if(function(o,a){return o==="keypress"&&(!a||!a.tagName||a.tagName!=="INPUT"&&a.tagName!=="TEXTAREA"&&!a.isContentEditable)}(t.type,n))return;Qe(t,"_sentryCaptured",!0),n&&!n._sentryId&&Qe(n,"_sentryId",he());const i=t.type==="keypress"?"input":t.type;(function(o){if(o.type!==Xr)return!1;try{if(!o.target||o.target._sentryId!==Zr)return!1}catch{}return!0})(t)||(r({event:t,name:i,global:e}),Xr=t.type,Zr=n?n._sentryId:void 0),clearTimeout(Gi),Gi=oe.setTimeout(()=>{Zr=void 0,Xr=void 0},1e3)}}function Wi(r){const e="history";We(e,r),ze(e,Ic)}function Ic(){if(!function(){const t=er.chrome,n=t&&t.app&&t.app.runtime,i="history"in er&&!!er.history.pushState&&!!er.history.replaceState;return!n&&i}())return;const r=oe.onpopstate;function e(t){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const o=rr,a=String(i);rr=a,be("history",{from:o,to:a})}return t.apply(this,n)}}oe.onpopstate=function(...t){const n=oe.location.href,i=rr;if(rr=n,be("history",{from:i,to:n}),r)try{return r.apply(this,t)}catch{}},ue(oe.history,"pushState",e),ue(oe.history,"replaceState",e)}const nr={};function zi(r){nr[r]=void 0}const wt="__sentry_xhr_v3__";function Lc(){if(!oe.XMLHttpRequest)return;const r=XMLHttpRequest.prototype;r.open=new Proxy(r.open,{apply(e,t,n){const i=new Error,o=1e3*Me(),a=Oe(n[0])?n[0].toUpperCase():void 0,l=function(p){if(Oe(p))return p;try{return p.toString()}catch{}}(n[1]);if(!a||!l)return e.apply(t,n);t[wt]={method:a,url:l,request_headers:{}},a==="POST"&&l.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const u=()=>{const p=t[wt];if(p&&t.readyState===4){try{p.status_code=t.status}catch{}be("xhr",{endTimestamp:1e3*Me(),startTimestamp:o,xhr:t,virtualError:i})}};return"onreadystatechange"in t&&typeof t.onreadystatechange=="function"?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(p,f,v)=>(u(),p.apply(f,v))}):t.addEventListener("readystatechange",u),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(p,f,v){const[E,k]=v,_=f[wt];return _&&Oe(E)&&Oe(k)&&(_.request_headers[E.toLowerCase()]=k),p.apply(f,v)}}),e.apply(t,n)}}),r.send=new Proxy(r.send,{apply(e,t,n){const i=t[wt];return i?(n[0]!==void 0&&(i.body=n[0]),be("xhr",{startTimestamp:1e3*Me(),xhr:t}),e.apply(t,n)):e.apply(t,n)}})}function jc(r,e=function(t){const n=nr[t];if(n)return n;let i=oe[t];if(Br(i))return nr[t]=i.bind(oe);const o=oe.document;if(o&&typeof o.createElement=="function")try{const a=o.createElement("iframe");a.hidden=!0,o.head.appendChild(a);const l=a.contentWindow;l&&l[t]&&(i=l[t]),o.head.removeChild(a)}catch(a){Mc&&R.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,a)}return i&&(nr[t]=i.bind(oe))}("fetch")){let t=0,n=0;return pc(r,function(i){const o=i.body.length;t+=o,n++;const a={body:i.body,method:"POST",referrerPolicy:"origin",headers:r.headers,keepalive:t<=6e4&&n<15,...r.fetchOptions};if(!e)return zi("fetch"),zt("No fetch implementation available");try{return e(r.url,a).then(l=>(t-=o,n--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return zi("fetch"),t-=o,n--,zt(l)}})}function en(r,e,t,n){const i={filename:r,function:e==="<anonymous>"?Ye:e,in_app:!0};return t!==void 0&&(i.lineno=t),n!==void 0&&(i.colno=n),i}const Dc=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Nc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Rc=/\((\S*)(?::(\d+))(?::(\d+))\)/,xc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Fc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,qc=function(...r){const e=r.sort((t,n)=>t[0]-n[0]).map(t=>t[1]);return(t,n=0,i=0)=>{const o=[],a=t.split(`
`);for(let l=n;l<a.length;l++){const u=a[l];if(u.length>1024)continue;const p=Un.test(u)?u.replace(Un,"$1"):u;if(!p.match(/\S*Error: /)){for(const f of e){const v=f(p);if(v){o.push(v);break}}if(o.length>=50+i)break}}return function(l){if(!l.length)return[];const u=Array.from(l);return/sentryWrapped/.test(Ut(u).function||"")&&u.pop(),u.reverse(),Jn.test(Ut(u).function||"")&&(u.pop(),Jn.test(Ut(u).function||"")&&u.pop()),u.slice(0,50).map(p=>({...p,filename:p.filename||Ut(u).filename,function:p.function||Ye}))}(o.slice(i))}}([30,r=>{const e=Dc.exec(r);if(e){const[,n,i,o]=e;return en(n,Ye,+i,+o)}const t=Nc.exec(r);if(t){if(t[2]&&t[2].indexOf("eval")===0){const o=Rc.exec(t[2]);o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3])}const[n,i]=Hi(t[1]||Ye,t[2]);return en(i,n,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,r=>{const e=xc.exec(r);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=Fc.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let t=e[3],n=e[1]||Ye;return[n,t]=Hi(n,t),en(t,n,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]),Hi=(r,e)=>{const t=r.indexOf("safari-extension")!==-1,n=r.indexOf("safari-web-extension")!==-1;return t||n?[r.indexOf("@")!==-1?r.split("@")[0]:Ye,t?`safari-extension:${e}`:`safari-web-extension:${e}`]:[r,e]},Qi=1024,Vc=(r={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...r};return{name:"Breadcrumbs",setup(t){var n;e.console&&function(i){const o="console";We(o,i),ze(o,yc)}(function(i){return function(o){if(re()!==i)return;const a={category:"console",data:{arguments:o.args,logger:"console"},level:bc(o.level),message:Xn(o.args," ")};if(o.level==="assert"){if(o.args[0]!==!1)return;a.message=`Assertion failed: ${Xn(o.args.slice(1)," ")||"console.assert"}`,a.data.arguments=o.args.slice(1)}Ze(a,{input:o.args,level:o.level})}}(t)),e.dom&&(n=function(i,o){return function(a){if(re()!==i)return;let l,u,p=typeof o=="object"?o.serializeAttribute:void 0,f=typeof o=="object"&&typeof o.maxStringLength=="number"?o.maxStringLength:void 0;f&&f>Qi&&(tr&&R.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${f} was configured. Sentry will use 1024 instead.`),f=Qi),typeof p=="string"&&(p=[p]);try{const E=a.event,k=function(_){return!!_&&!!_.target}(E)?E.target:E;l=Kn(k,{keyAttrs:p,maxStringLength:f}),u=function(_){if(!Ar.HTMLElement)return null;let g=_;for(let y=0;y<5;y++){if(!g)return null;if(g instanceof HTMLElement){if(g.dataset.sentryComponent)return g.dataset.sentryComponent;if(g.dataset.sentryElement)return g.dataset.sentryElement}g=g.parentNode}return null}(k)}catch{l="<unknown>"}if(l.length===0)return;const v={category:`ui.${a.name}`,message:l};u&&(v.data={"ui.component_name":u}),Ze(v,{event:a.event,name:a.name,global:a.global})}}(t,e.dom),We("dom",n),ze("dom",Pc)),e.xhr&&function(i){We("xhr",i),ze("xhr",Lc)}(function(i){return function(o){if(re()!==i)return;const{startTimestamp:a,endTimestamp:l}=o,u=o.xhr[wt];if(!a||!l||!u)return;const{method:p,url:f,status_code:v,body:E}=u,k={method:p,url:f,status_code:v},_={xhr:o.xhr,input:E,startTimestamp:a,endTimestamp:l};Ze({category:"xhr",data:k,type:"http",level:$i(v)},_)}}(t)),e.fetch&&wc(function(i){return function(o){if(re()!==i)return;const{startTimestamp:a,endTimestamp:l}=o;if(l&&(!o.fetchData.url.match(/sentry_key/)||o.fetchData.method!=="POST"))if(o.error)Ze({category:"fetch",data:o.fetchData,level:"error",type:"http"},{data:o.error,input:o.args,startTimestamp:a,endTimestamp:l});else{const u=o.response,p={...o.fetchData,status_code:u&&u.status},f={input:o.args,response:u,startTimestamp:a,endTimestamp:l};Ze({category:"fetch",data:p,type:"http",level:$i(p.status_code)},f)}}}(t)),e.history&&Wi(function(i){return function(o){if(re()!==i)return;let a=o.from,l=o.to;const u=Ur(X.location.href);let p=a?Ur(a):void 0;const f=Ur(l);p&&p.path||(p=u),u.protocol===f.protocol&&u.host===f.host&&(l=f.relative),u.protocol===p.protocol&&u.host===p.host&&(a=p.relative),Ze({category:"navigation",data:{from:a,to:l}})}}(t)),e.sentry&&t.on("beforeSendEvent",function(i){return function(o){re()===i&&Ze({category:"sentry."+(o.type==="transaction"?"transaction":"event"),event_id:o.event_id,level:o.level,message:Re(o)},{event:o})}}(t))}}},$c=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Uc=(r={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...r};return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&ue(X,"setTimeout",Ki),e.setInterval&&ue(X,"setInterval",Ki),e.requestAnimationFrame&&ue(X,"requestAnimationFrame",Jc),e.XMLHttpRequest&&"XMLHttpRequest"in X&&ue(XMLHttpRequest.prototype,"send",Bc);const t=e.eventTarget;t&&(Array.isArray(t)?t:$c).forEach(Gc)}}};function Ki(r){return function(...e){const t=e[0];return e[0]=dt(t,{mechanism:{data:{function:Ne(r)},handled:!1,type:"instrument"}}),r.apply(this,e)}}function Jc(r){return function(e){return r.apply(this,[dt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Ne(r)},handled:!1,type:"instrument"}})])}}function Bc(r){return function(...e){const t=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(n=>{n in t&&typeof t[n]=="function"&&ue(t,n,function(i){const o={mechanism:{data:{function:n,handler:Ne(i)},handled:!1,type:"instrument"}},a=Or(i);return a&&(o.mechanism.data.handler=Ne(a)),dt(i,o)})}),r.apply(this,e)}}function Gc(r){const e=X[r],t=e&&e.prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(ue(t,"addEventListener",function(n){return function(i,o,a){try{typeof o.handleEvent=="function"&&(o.handleEvent=dt(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Ne(o),target:r},handled:!1,type:"instrument"}}))}catch{}return n.apply(this,[i,dt(o,{mechanism:{data:{function:"addEventListener",handler:Ne(o),target:r},handled:!1,type:"instrument"}}),a])}}),ue(t,"removeEventListener",function(n){return function(i,o,a){try{const l=o.__sentry_wrapped__;l&&n.call(this,i,l,a)}catch{}return n.call(this,i,o,a)}}))}const Yc=()=>({name:"BrowserSession",setupOnce(){X.document!==void 0?(Ei({ignoreDuration:!0}),Ti(),Wi(({from:r,to:e})=>{r!==void 0&&r!==e&&(Ei({ignoreDuration:!0}),Ti())})):tr&&R.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}),Wc=(r={})=>{const e={onerror:!0,onunhandledrejection:!0,...r};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(function(n){(function(i){const o="error";We(o,i),ze(o,xa)})(i=>{const{stackParser:o,attachStacktrace:a}=Zi();if(re()!==n||Ji())return;const{msg:l,url:u,line:p,column:f,error:v}=i,E=function(k,_,g,y){const S=k.exception=k.exception||{},C=S.values=S.values||[],M=C[0]=C[0]||{},j=M.stacktrace=M.stacktrace||{},D=j.frames=j.frames||[],q=y,W=g,ne=Oe(_)&&_.length>0?_:function(){try{return Ar.document.location.href}catch{return""}}();return D.length===0&&D.push({colno:q,filename:ne,function:Ye,in_app:!0,lineno:W}),k}(Qr(o,v||l,void 0,a,!1),u,p,f);E.level="error",wi(E,{originalException:v,mechanism:{handled:!1,type:"onerror"}})})}(t),Xi("onerror")),e.onunhandledrejection&&(function(n){(function(i){const o="unhandledrejection";We(o,i),ze(o,Fa)})(i=>{const{stackParser:o,attachStacktrace:a}=Zi();if(re()!==n||Ji())return;const l=function(p){if(Tr(p))return p;try{if("reason"in p)return p.reason;if("detail"in p&&"reason"in p.detail)return p.detail.reason}catch{}return p}(i),u=Tr(l)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(l)}`}]}}:Qr(o,l,void 0,a,!0);u.level="error",wi(u,{originalException:l,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(t),Xi("onunhandledrejection"))}}};function Xi(r){tr&&R.log(`Global Handler attached: ${r}`)}function Zi(){const r=re();return r&&r.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const zc=()=>({name:"HttpContext",preprocessEvent(r){if(!X.navigator&&!X.location&&!X.document)return;const e=r.request&&r.request.url||X.location&&X.location.href,{referrer:t}=X.document||{},{userAgent:n}=X.navigator||{},i={...r.request&&r.request.headers,...t&&{Referer:t},...n&&{"User-Agent":n}},o={...r.request,...e&&{url:e},headers:i};r.request=o}}),Hc=(r={})=>{const e=r.limit||5,t=r.key||"cause";return{name:"LinkedErrors",preprocessEvent(n,i,o){const a=o.getOptions();vc(Wr,a.stackParser,a.maxValueLength,t,e,n,i)}}};var tn="new",es="loading",ts="loaded",ir="joining-meeting",Fe="joined-meeting",qe="left-meeting",Le="error",Qc="blocked",Kc="off",Xc="sendable",Zc="loading",el="interrupted",rs="playable",sr="unknown",ns="full",tl="lobby",rl="none",is="base",nl="*",il="ejected",sl="nbf-room",ol="nbf-token",al="exp-room",cl="exp-token",rn="no-room",ll="meeting-full",ss="end-of-life",ul="not-allowed",os="connection-error",dl="cam-in-use",pl="mic-in-use",hl="cam-mic-in-use",fl="permissions",ml="undefined-mediadevices",gl="not-found",vl="constraints",yl="unknown",as="iframe-ready-for-launch-config",cs="iframe-launch-config",ls="theme-updated",us="loading",ds="load-attempt-failed",nn="loaded",ps="started-camera",hs="camera-error",fs="joining-meeting",ms="joined-meeting",gs="left-meeting",vs="participant-joined",ys="participant-updated",bs="participant-left",_s="participant-counts-updated",Ss="access-state-updated",ws="meeting-session-summary-updated",Es="meeting-session-state-updated",bl="meeting-session-data-error",ks="waiting-participant-added",Cs="waiting-participant-updated",Ts="waiting-participant-removed",As="track-started",Os="track-stopped",Ms="transcription-started",Ps="transcription-stopped",Is="transcription-error",sn="recording-started",on="recording-stopped",Ls="recording-stats",js="recording-error",Ds="recording-upload-completed",Ns="recording-data",Rs="app-message",xs="transcription-message",Fs="remote-media-player-started",qs="remote-media-player-updated",Vs="remote-media-player-stopped",$s="local-screen-share-started",Us="local-screen-share-stopped",Js="local-screen-share-canceled",Bs="active-speaker-change",Gs="active-speaker-mode-change",Ys="network-quality-change",Ws="network-connection",zs="cpu-load-change",Hs="face-counts-updated",Et="fullscreen",kt="exited-fullscreen",Qs="live-streaming-started",Ks="live-streaming-updated",Xs="live-streaming-stopped",Zs="live-streaming-error",eo="lang-updated",to="receive-settings-updated",an="input-settings-updated",cn="nonfatal-error",ln="error",un=4096,ro=102400,dn="iframe-call-message",no="local-screen-start",io="daily-method-update-live-streaming-endpoints",or="transmit-log",je="daily-custom-track",ar={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},so={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},pn={PLAY:"play",PAUSE:"pause"},hn=["jpg","png","jpeg"],_l="add-endpoints",Sl="remove-endpoints",oo="sip-call-transfer";function me(){return!$()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function $(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function ao(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function wl(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(r,e){if(!r||!e)return!0;switch(r){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(et(),cr())||$())}function co(){if($()||!document)return!1;var r=document.createElement("iframe");return!!r.requestFullscreen||!!r.webkitRequestFullscreen}var fn="none",El="software",kl="hardware",Cl=function(){try{var r,e=document.createElement("canvas"),t=!1;(r=e.getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))||(t=!0,r=e.getContext("webgl2"));var n=r!=null;return e.remove(),n?t?El:kl:fn}catch{return fn}}();function lo(){var r=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!$()&&Cl!==fn&&(r?function(){return fo()?!1:["Chrome","Firefox"].includes(et())}():function(){if(fo())return!1;var e=et();if(e==="Safari"){var t=gn();if(t.major<15||t.major===15&&t.minor<4)return!1}return e==="Chrome"?mn().major>=77:e==="Firefox"?vn().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}function uo(){if($()||ho()||typeof AudioWorkletNode>"u")return!1;switch(et()){case"Chrome":case"Firefox":return!0;case"Safari":var r=cr();return r.major>17||r.major===17&&r.minor>=4}return!1}function po(){return ao()&&!function(){var r,e=et();if(!me())return!0;switch(e){case"Chrome":return(r=mn()).major&&r.major>0&&r.major<75;case"Firefox":return(r=vn()).major<91;case"Safari":return(r=gn()).major<13||r.major===13&&r.minor<1;default:return!0}}()}function ho(){return me().match(/Linux; Android/)}function fo(){var r,e=me(),t=e.match(/Mac/)&&(!$()&&typeof window<"u"&&(r=window)!==null&&r!==void 0&&(r=r.navigator)!==null&&r!==void 0&&r.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(e.match(/Mobi/)||e.match(/Android/)||t)||!!me().match(/DailyAnd\//)||void 0}function et(){if(typeof window<"u"){var r=me();return mo()?"Safari":r.indexOf("Edge")>-1?"Edge":r.match(/Chrome\//)?"Chrome":r.indexOf("Safari")>-1||go()?"Safari":r.indexOf("Firefox")>-1?"Firefox":r.indexOf("MSIE")>-1||r.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function cr(){switch(et()){case"Chrome":return mn();case"Safari":return gn();case"Firefox":return vn();case"Edge":return function(){var r=0,e=0;if(typeof window<"u"){var t=me().match(/Edge\/(\d+).(\d+)/);if(t)try{r=parseInt(t[1]),e=parseInt(t[2])}catch{}}return{major:r,minor:e}}()}}function mn(){var r=0,e=0,t=0,n=0,i=!1;if(typeof window<"u"){var o=me(),a=o.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(a)try{r=parseInt(a[1]),e=parseInt(a[2]),t=parseInt(a[3]),n=parseInt(a[4]),i=o.indexOf("OPR/")>-1}catch{}}return{major:r,minor:e,build:t,patch:n,opera:i}}function mo(){return!!me().match(/iPad|iPhone|iPod/i)&&ao()}function go(){return me().indexOf("AppleWebKit/605.1.15")>-1}function gn(){var r=0,e=0,t=0;if(typeof window<"u"){var n=me().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(n)try{r=parseInt(n[1]),e=parseInt(n[2]),t=parseInt(n[4])}catch{}else(mo()||go())&&(r=14,e=0,t=3)}return{major:r,minor:e,point:t}}function vn(){var r=0,e=0;if(typeof window<"u"){var t=me().match(/Firefox\/(\d+).(\d+)/);if(t)try{r=parseInt(t[1]),e=parseInt(t[2])}catch{}}return{major:r,minor:e}}var vo=function(){return le(function r(){ce(this,r)},[{key:"addListenerForMessagesFromCallMachine",value:function(r,e,t){vt()}},{key:"addListenerForMessagesFromDailyJs",value:function(r,e,t){vt()}},{key:"sendMessageToCallMachine",value:function(r,e,t,n){vt()}},{key:"sendMessageToDailyJs",value:function(r,e){vt()}},{key:"removeListener",value:function(r){vt()}}])}();function yo(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yn(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yo(Object(t),!0).forEach(function(n){we(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):yo(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function bo(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bo=function(){return!!r})()}var Tl=function(){function r(){var e,t,n,i;return ce(this,r),t=this,n=ye(n=r),(e=jt(t,bo()?Reflect.construct(n,[],ye(t).constructor):n.apply(t,i)))._wrappedListeners={},e._messageCallbacks={},e}return Dt(r,vo),le(r,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,n){var i=this,o=function(a){if(a.data&&a.data.what==="iframe-call-message"&&(!a.data.callClientId||a.data.callClientId===t)&&(!a.data.from||a.data.from!=="module")){var l=yn({},a.data);if(delete l.from,l.callbackStamp&&i._messageCallbacks[l.callbackStamp]){var u=l.callbackStamp;i._messageCallbacks[u].call(n,l),delete i._messageCallbacks[u]}delete l.what,delete l.callbackStamp,e.call(n,l)}};this._wrappedListeners[e]=o,window.addEventListener("message",o)}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,n){var i=function(o){var a;if(!(!o.data||o.data.what!==dn||!o.data.action||o.data.from&&o.data.from!=="module"||o.data.callClientId&&t&&o.data.callClientId!==t||o!=null&&(a=o.data)!==null&&a!==void 0&&a.callFrameId)){var l=o.data;e.call(n,l)}};this._wrappedListeners[e]=i,window.addEventListener("message",i)}},{key:"sendMessageToCallMachine",value:function(e,t,n,i){if(!n)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var o=yn({},e);if(o.what=dn,o.from="module",o.callClientId=n,t){var a=xt();this._messageCallbacks[a]=t,o.callbackStamp=a}var l=i?i.contentWindow:window,u=this._callMachineTargetOrigin(i);u&&l.postMessage(o,u)}},{key:"sendMessageToDailyJs",value:function(e,t){e.what=dn,e.callClientId=t,e.from="embedded",window.postMessage(e,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"forwardPackagedMessageToCallMachine",value:function(e,t,n){var i=yn({},e);i.callClientId=n;var o=t?t.contentWindow:window,a=this._callMachineTargetOrigin(t);a&&o.postMessage(i,a)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(e,t){var n=function(i){if(i.data&&i.data.what==="iframe-call-message"&&(!i.data.callClientId||i.data.callClientId===t)&&(!i.data.from||i.data.from!=="module")){var o=i.data;e(o)}};return this._wrappedListeners[e]=n,window.addEventListener("message",n),e}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(e){var t=this._wrappedListeners[e];t&&(window.removeEventListener("message",t),delete this._wrappedListeners[e])}},{key:"_callMachineTargetOrigin",value:function(e){return e?e.src?new URL(e.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}])}();function _o(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function So(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(So=function(){return!!r})()}var Al=function(){function r(){var e,t,n,i;return ce(this,r),t=this,n=ye(n=r),e=jt(t,So()?Reflect.construct(n,[],ye(t).constructor):n.apply(t,i)),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new br.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new br.EventEmitter,e._wrappedListeners={},e._messageCallbacks={},e}return Dt(r,vo),le(r,[{key:"addListenerForMessagesFromCallMachine",value:function(e,t,n){this._addListener(e,global.callMachineToDailyJsEmitter,t,n,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(e,t,n){this._addListener(e,global.dailyJsToCallMachineEmitter,t,n,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(e,t,n){this._sendMessage(e,global.dailyJsToCallMachineEmitter,n,t,"sending message to call machine")}},{key:"sendMessageToDailyJs",value:function(e,t){this._sendMessage(e,global.callMachineToDailyJsEmitter,t,null,"sending message to daily-js")}},{key:"removeListener",value:function(e){var t=this._wrappedListeners[e];t&&(global.callMachineToDailyJsEmitter.removeListener("message",t),global.dailyJsToCallMachineEmitter.removeListener("message",t),delete this._wrappedListeners[e])}},{key:"_addListener",value:function(e,t,n,i,o){var a=this,l=function(u){if(u.callClientId===n){if(u.callbackStamp&&a._messageCallbacks[u.callbackStamp]){var p=u.callbackStamp;a._messageCallbacks[p].call(i,u),delete a._messageCallbacks[p]}e.call(i,u)}};this._wrappedListeners[e]=l,t.addListener("message",l)}},{key:"_sendMessage",value:function(e,t,n,i,o){var a=function(u){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?_o(Object(f),!0).forEach(function(v){we(u,v,f[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):_o(Object(f)).forEach(function(v){Object.defineProperty(u,v,Object.getOwnPropertyDescriptor(f,v))})}return u}({},e);if(a.callClientId=n,i){var l=xt();this._messageCallbacks[l]=i,a.callbackStamp=l}t.emit("message",a)}}])}(),bn="replace",_n="shallow-merge",wo=[bn,_n],Ol=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.data,n=e.mergeStrategy,i=n===void 0?bn:n;ce(this,r),r._validateMergeStrategy(i),r._validateData(t,i),this.mergeStrategy=i,this.data=t}return le(r,[{key:"isNoOp",value:function(){return r.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,t){return Object.keys(e).length===0&&t===_n}},{key:"_validateMergeStrategy",value:function(e){if(!wo.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(wo,"]"))}},{key:"_validateData",value:function(e,t){if(!function(l){if(l==null||J(l)!=="object")return!1;var u=Object.getPrototypeOf(l);return u==null||u===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var n;try{if(n=JSON.stringify(e),t===bn){var i=JSON.parse(n);ie(i,e)||console.warn("The meeting session data provided will be modified when serialized.",i,e)}else if(t===_n){for(var o in e)if(Object.hasOwnProperty.call(e,o)&&e[o]!==void 0){var a=JSON.parse(JSON.stringify(e[o]));ie(e[o],a)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",a,e[o])}}}catch(l){throw Error("Meeting session data must be serializable to JSON: ".concat(l))}if(n.length>ro)throw Error("Meeting session data is too large (".concat(n.length," characters). Maximum size suppported is ").concat(ro,"."))}}])}();function Eo(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Eo=function(){return!!r})()}function Sn(r){var e=typeof Map=="function"?new Map:void 0;return Sn=function(t){if(t===null||!function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(i,o,a){if(Eo())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,o);var u=new(i.bind.apply(i,l));return a&&gt(u,a.prototype),u}(t,arguments,ye(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),gt(n,t)},Sn(r)}function ko(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ko=function(){return!!r})()}function Co(r){var e,t=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(t){var n=t.indexOf(r);n!==-1&&t.splice(n,1)}}var Ml=function(){return le(function r(e){ce(this,r),this._currentLoad=null,this._callClientId=e},[{key:"load",value:function(){var r,e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void n(!0);r=this._callClientId,window._daily.pendings.push(r),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new Pl(t,function(){n(!1)},function(o,a){a||Co(e._callClientId),i(o,a)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Co(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}])}(),Pl=function(){return le(function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;ce(this,r),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=t,this._failureCallback=n},[{key:"start",value:function(){var r=this;if(!this._currentAttempt){var e=function(t){r._currentAttempt.cancelled||(r._attemptsRemaining--,r._failureCallback(t,r._attemptsRemaining>0),r._attemptsRemaining<=0||setTimeout(function(){r._currentAttempt.cancelled||(r._currentAttempt=new To(r._dailyConfig,r._successCallback,e),r._currentAttempt.start())},3e3))};this._currentAttempt=new To(this._dailyConfig,this._successCallback,e),this._currentAttempt.start()}}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}])}(),wn=function(){function r(){return ce(this,r),e=this,n=arguments,t=ye(t=r),jt(e,ko()?Reflect.construct(t,n||[],ye(e).constructor):t.apply(e,n));var e,t,n}return Dt(r,Sn(Error)),le(r)}(),lr=2e4,To=function(){return le(function e(t,n,i){ce(this,e),this._loadAttemptImpl=$()||!t.avoidEval?new Il(t,n,i):new Ll(t,n,i)},[{key:"start",value:(r=N(function*(){return this._loadAttemptImpl.start()}),function(){return r.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]);var r}(),Il=function(){return le(function i(o,a,l){ce(this,i),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=o,this._successCallback=a,this._failureCallback=l},[{key:"start",value:(n=N(function*(){var i=Ft(this._dailyConfig);!(yield this._tryLoadFromIOSCache(i))&&this._loadFromNetwork(i)}),function(){return n.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(t=N(function*(i){if(!this._iosCache)return!1;try{var o=yield this._iosCache.get(i);return!!this.cancelled||!!o&&(o.code?(Function('"use strict";'+o.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=o.refetchHeaders,!1))}catch{return!1}}),function(i){return t.apply(this,arguments)})},{key:"_loadFromNetwork",value:(e=N(function*(i){var o=this;this._networkTimeout=setTimeout(function(){o._networkTimedOut=!0,o._failureCallback({msg:"Timed out (>".concat(lr," ms) when loading call object bundle ").concat(i),type:"timeout"})},lr);try{var a=this._refetchHeaders?{headers:this._refetchHeaders}:{},l=yield fetch(i,a);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new wn;var u=yield this._getBundleCodeFromResponse(i,l);if(this.cancelled)throw new wn;Function('"use strict";'+u)(),this._iosCache&&this._iosCache.set(i,u,l.headers),this.succeeded=!0,this._successCallback()}catch(p){if(clearTimeout(this._networkTimeout),p instanceof wn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(i,": ").concat(p),type:p.message})}}),function(i){return e.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(r=N(function*(i,o){if(o.ok)return yield o.text();if(this._iosCache&&o.status===304)return(yield this._iosCache.renew(i,o.headers)).code;throw new Error("Received ".concat(o.status," response"))}),function(i,o){return r.apply(this,arguments)})}]);var r,e,t,n}(),Ll=function(){return le(function r(e,t,n){ce(this,r),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=t,this._failureCallback=n,this._attemptId=xt(),this._networkTimeout=null,this._scriptElement=null},[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var r=Ft(this._dailyConfig);(typeof document>"u"?"undefined":J(document))==="object"?this._startLoading(r):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(r){var e=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){e._stopLoading(),e._failureCallback({msg:"Timed out (>".concat(lr," ms) when loading call object bundle ").concat(r),type:"timeout"})},lr);var t=document.getElementsByTagName("head")[0],n=document.createElement("script");this._scriptElement=n,n.onload=function(){e._stopLoading(),e.succeeded=!0,e._successCallback()},n.onerror=function(i){e._stopLoading(),e._failureCallback({msg:"Failed to load call object bundle ".concat(i.target.src),type:i.message})},n.src=r,t.appendChild(n)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}])}(),ur=function(r,e,t){return Dl(r.local,e,t)===!0},jl=function(r,e,t){return r.local.streams&&r.local.streams[e]&&r.local.streams[e].stream&&r.local.streams[e].stream["get".concat(t==="video"?"Video":"Audio","Tracks")]()[0]},pt=function(r,e,t,n){var i=Nl(r,e,t,n);return i&&i.pendingTrack},Dl=function(r,e,t){if(!r)return!1;var n=function(o){switch(o){case"avatar":return!0;case"staged":return o;default:return!!o}},i=r.public.subscribedTracks;return i&&i[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(t)===-1&&i[e].custom?[!0,"staged"].includes(i[e].custom)?n(i[e].custom):n(i[e].custom[t]):n(i[e][t]):!i||n(i.ALL)},Nl=function(r,e,t,n){var i=Object.values(r.streams||{}).filter(function(o){return o.participantId===e&&o.type===t&&o.pendingTrack&&o.pendingTrack.kind===n}).sort(function(o,a){return new Date(a.starttime)-new Date(o.starttime)});return i&&i[0]},Rl=function(r,e){var t=r.local.public.customTracks;if(t&&t[e])return t[e].track};function Ao(r,e){for(var t=e.getState(),n=0,i=["cam","screen"];n<i.length;n++)for(var o=i[n],a=0,l=["video","audio"];a<l.length;a++){var u=l[a],p=o==="cam"?u:"screen".concat(u.charAt(0).toUpperCase()+u.slice(1)),f=r.tracks[p];if(f){var v=r.local?jl(t,o,u):pt(t,r.session_id,o,u);f.state==="playable"&&(f.track=v),f.persistentTrack=v}}}function Oo(r,e){try{var t=e.getState();for(var n in r.tracks)if(!xl(n)){var i=r.tracks[n].kind;if(i){var o=r.tracks[n];if(o){var a=r.local?Rl(t,n):pt(t,r.session_id,n,i);o.state==="playable"&&(r.tracks[n].track=a),o.persistentTrack=a}}else console.error("unknown type for custom track")}}catch(l){console.error(l)}}function xl(r){return["video","audio","screenVideo","screenAudio"].includes(r)}function Mo(r,e,t){var n=t.getState();if(r.local){if(r.audio)try{r.audioTrack=n.local.streams.cam.stream.getAudioTracks()[0],r.audioTrack||(r.audio=!1)}catch{}if(r.video)try{r.videoTrack=n.local.streams.cam.stream.getVideoTracks()[0],r.videoTrack||(r.video=!1)}catch{}if(r.screen)try{r.screenVideoTrack=n.local.streams.screen.stream.getVideoTracks()[0],r.screenAudioTrack=n.local.streams.screen.stream.getAudioTracks()[0],r.screenVideoTrack||r.screenAudioTrack||(r.screen=!1)}catch{}}else{var i=!0;try{var o=n.participants[r.session_id];o&&o.public&&o.public.rtcType&&o.public.rtcType.impl==="peer-to-peer"&&o.private&&!["connected","completed"].includes(o.private.peeringState)&&(i=!1)}catch(f){console.error(f)}if(!i)return r.audio=!1,r.audioTrack=!1,r.video=!1,r.videoTrack=!1,r.screen=!1,void(r.screenTrack=!1);try{if(n.streams,r.audio&&ur(n,r.session_id,"cam-audio")){var a=pt(n,r.session_id,"cam","audio");a&&(e&&e.audioTrack&&e.audioTrack.id===a.id?r.audioTrack=a:a.muted||(r.audioTrack=a)),r.audioTrack||(r.audio=!1)}if(r.video&&ur(n,r.session_id,"cam-video")){var l=pt(n,r.session_id,"cam","video");l&&(e&&e.videoTrack&&e.videoTrack.id===l.id?r.videoTrack=l:l.muted||(r.videoTrack=l)),r.videoTrack||(r.video=!1)}if(r.screen&&ur(n,r.session_id,"screen-audio")){var u=pt(n,r.session_id,"screen","audio");u&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===u.id?r.screenAudioTrack=u:u.muted||(r.screenAudioTrack=u))}if(r.screen&&ur(n,r.session_id,"screen-video")){var p=pt(n,r.session_id,"screen","video");p&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===p.id?r.screenVideoTrack=p:p.muted||(r.screenVideoTrack=p))}r.screenVideoTrack||r.screenAudioTrack||(r.screen=!1)}catch(f){console.error("unexpected error matching up tracks",f)}}}function Fl(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,p){if(u){if(typeof u=="string")return Po(u,p);var f={}.toString.call(u).slice(8,-1);return f==="Object"&&u.constructor&&(f=u.constructor.name),f==="Map"||f==="Set"?Array.from(u):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?Po(u,p):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){l=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(l)throw o}}}}function Po(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Ee=new Map,ht=null;function ql(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,p){if(u){if(typeof u=="string")return Io(u,p);var f={}.toString.call(u).slice(8,-1);return f==="Object"&&u.constructor&&(f=u.constructor.name),f==="Map"||f==="Set"?Array.from(u):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?Io(u,p):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){l=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(l)throw o}}}}function Io(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var ke=new Map,Ct=null;function Vl(r){Lo()?function(e){Ee.has(e)||(Ee.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(t){Ee.has(e)&&(Ee.get(e).lastDevicesString=JSON.stringify(t),ht||(ht=function(){var n=N(function*(){var i,o=yield navigator.mediaDevices.enumerateDevices(),a=Fl(Ee.keys());try{for(a.s();!(i=a.n()).done;){var l=i.value,u=JSON.stringify(o);u!==Ee.get(l).lastDevicesString&&(Ee.get(l).lastDevicesString=u,l(o))}}catch(p){a.e(p)}finally{a.f()}});return function(){return n.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",ht)))}).catch(function(){}))}(r):function(e){ke.has(e)||(ke.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(t){ke.has(e)&&(ke.get(e).lastDevicesString=JSON.stringify(t),Ct||(Ct=setInterval(N(function*(){var n,i=yield navigator.mediaDevices.enumerateDevices(),o=ql(ke.keys());try{for(o.s();!(n=o.n()).done;){var a=n.value,l=JSON.stringify(i);l!==ke.get(a).lastDevicesString&&(ke.get(a).lastDevicesString=l,a(i))}}catch(u){o.e(u)}finally{o.f()}}),3e3)))}))}(r)}function $l(r){Lo()?function(e){Ee.has(e)&&(Ee.delete(e),Ee.size===0&&ht&&(navigator.mediaDevices.removeEventListener("devicechange",ht),ht=null))}(r):function(e){ke.has(e)&&(ke.delete(e),ke.size===0&&Ct&&(clearInterval(Ct),Ct=null))}(r)}function Lo(){var r;return $()||((r=navigator.mediaDevices)===null||r===void 0?void 0:r.ondevicechange)!==void 0}var Ul=new Set;function Jl(r,e){return r&&r.readyState==="live"&&!function(t,n){return t.muted&&!Ul.has(t.id)}(r)}function jo(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ve(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jo(Object(t),!0).forEach(function(n){we(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):jo(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Tt=Object.freeze({VIDEO:"video",AUDIO:"audio",SCREEN_VIDEO:"screenVideo",SCREEN_AUDIO:"screenAudio",CUSTOM_VIDEO:"customVideo",CUSTOM_AUDIO:"customAudio"}),Bl=Object.freeze({PARTICIPANTS:"participants",STREAMING:"streaming",TRANSCRIPTION:"transcription"}),At=Object.values(Tt),Do=["v","a","sv","sa","cv","ca"];Object.freeze(At.reduce(function(r,e,t){return r[e]=Do[t],r},{})),Object.freeze(Do.reduce(function(r,e,t){return r[e]=At[t],r},{}));var Gl=[Tt.VIDEO,Tt.AUDIO,Tt.SCREEN_VIDEO,Tt.SCREEN_AUDIO],No=Object.values(Bl),Ro=["p","s","t"];Object.freeze(No.reduce(function(r,e,t){return r[e]=Ro[t],r},{})),Object.freeze(Ro.reduce(function(r,e,t){return r[e]=No[t],r},{}));var xo=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.base,n=e.byUserId,i=e.byParticipantId;ce(this,r),this.base=t,this.byUserId=n,this.byParticipantId=i}return le(r,[{key:"clone",value:function(){var e=new r;if(this.base instanceof ee?e.base=this.base.clone():e.base=this.base,this.byUserId!==void 0)for(var t in e.byUserId={},this.byUserId){var n=this.byUserId[t];e.byUserId[t]=n instanceof ee?n.clone():n}if(this.byParticipantId!==void 0)for(var i in e.byParticipantId={},this.byParticipantId){var o=this.byParticipantId[i];e.byParticipantId[i]=o instanceof ee?o.clone():o}return e}},{key:"toJSONObject",value:function(){var e={};if(typeof this.base=="boolean"?e.base=this.base:this.base instanceof ee&&(e.base=this.base.toJSONObject()),this.byUserId!==void 0)for(var t in e.byUserId={},this.byUserId){var n=this.byUserId[t];e.byUserId[t]=n instanceof ee?n.toJSONObject():n}if(this.byParticipantId!==void 0)for(var i in e.byParticipantId={},this.byParticipantId){var o=this.byParticipantId[i];e.byParticipantId[i]=o instanceof ee?o.toJSONObject():o}return e}},{key:"toMinifiedJSONObject",value:function(){var e={};if(this.base!==void 0&&(typeof this.base=="boolean"?e.b=this.base:e.b=this.base.toMinifiedJSONObject()),this.byUserId!==void 0)for(var t in e.u={},this.byUserId){var n=this.byUserId[t];e.u[t]=typeof n=="boolean"?n:n.toMinifiedJSONObject()}if(this.byParticipantId!==void 0)for(var i in e.p={},this.byParticipantId){var o=this.byParticipantId[i];e.p[i]=typeof o=="boolean"?o:o.toMinifiedJSONObject()}return e}},{key:"normalize",value:function(){return this.base instanceof ee&&(this.base=this.base.normalize()),this.byUserId&&(this.byUserId=Object.fromEntries(Object.entries(this.byUserId).map(function(e){var t=te(e,2),n=t[0],i=t[1];return[n,i instanceof ee?i.normalize():i]}))),this.byParticipantId&&(this.byParticipantId=Object.fromEntries(Object.entries(this.byParticipantId).map(function(e){var t=te(e,2),n=t[0],i=t[1];return[n,i instanceof ee?i.normalize():i]}))),this}}],[{key:"fromJSONObject",value:function(e){var t,n,i;if(e.base!==void 0&&(t=typeof e.base=="boolean"?e.base:ee.fromJSONObject(e.base)),e.byUserId!==void 0)for(var o in n={},e.byUserId){var a=e.byUserId[o];n[o]=typeof a=="boolean"?a:ee.fromJSONObject(a)}if(e.byParticipantId!==void 0)for(var l in i={},e.byParticipantId){var u=e.byParticipantId[l];i[l]=typeof u=="boolean"?u:ee.fromJSONObject(u)}return new r({base:t,byUserId:n,byParticipantId:i})}},{key:"fromMinifiedJSONObject",value:function(e){var t,n,i;if(e.b!==void 0&&(t=typeof e.b=="boolean"?e.b:ee.fromMinifiedJSONObject(e.b)),e.u!==void 0)for(var o in n={},e.u){var a=e.u[o];n[o]=typeof a=="boolean"?a:ee.fromMinifiedJSONObject(a)}if(e.p!==void 0)for(var l in i={},e.p){var u=e.p[l];i[l]=typeof u=="boolean"?u:ee.fromMinifiedJSONObject(u)}return new r({base:t,byUserId:n,byParticipantId:i})}},{key:"validateJSONObject",value:function(e){if(J(e)!=="object")return[!1,"canReceive must be an object"];for(var t=["base","byUserId","byParticipantId"],n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];if(!t.includes(o))return[!1,"canReceive can only contain keys (".concat(t.join(", "),")")];if(o==="base"){var a=te(ee.validateJSONObject(e.base,!0),2),l=a[0],u=a[1];if(!l)return[!1,u]}else{if(J(e[o])!=="object")return[!1,"invalid (non-object) value for field '".concat(o,"' in canReceive")];for(var p=0,f=Object.values(e[o]);p<f.length;p++){var v=f[p],E=te(ee.validateJSONObject(v),2),k=E[0],_=E[1];if(!k)return[!1,_]}}}return[!0]}}])}(),ee=function(){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.video,n=e.audio,i=e.screenVideo,o=e.screenAudio,a=e.customVideo,l=e.customAudio;ce(this,r),this.video=t,this.audio=n,this.screenVideo=i,this.screenAudio=o,this.customVideo=a,this.customAudio=l}return le(r,[{key:"clone",value:function(){var e=new r;return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=Ve({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=Ve({},this.customAudio)),e}},{key:"toJSONObject",value:function(){var e={};return this.video!==void 0&&(e.video=this.video),this.audio!==void 0&&(e.audio=this.audio),this.screenVideo!==void 0&&(e.screenVideo=this.screenVideo),this.screenAudio!==void 0&&(e.screenAudio=this.screenAudio),this.customVideo!==void 0&&(e.customVideo=Ve({},this.customVideo)),this.customAudio!==void 0&&(e.customAudio=Ve({},this.customAudio)),e}},{key:"toMinifiedJSONObject",value:function(){var e={};return this.video!==void 0&&(e.v=this.video),this.audio!==void 0&&(e.a=this.audio),this.screenVideo!==void 0&&(e.sv=this.screenVideo),this.screenAudio!==void 0&&(e.sa=this.screenAudio),this.customVideo!==void 0&&(e.cv=Ve({},this.customVideo)),this.customAudio!==void 0&&(e.ca=Ve({},this.customAudio)),e}},{key:"normalize",value:function(){function e(t,n){return t&&Object.keys(t).length===1&&t["*"]===n}return!(this.video!==!0||this.audio!==!0||this.screenVideo!==!0||this.screenAudio!==!0||!e(this.customVideo,!0)||!e(this.customAudio,!0))||(this.video!==!1||this.audio!==!1||this.screenVideo!==!1||this.screenAudio!==!1||!e(this.customVideo,!1)||!e(this.customAudio,!1))&&this}}],[{key:"fromBoolean",value:function(e){return new r({video:e,audio:e,screenVideo:e,screenAudio:e,customVideo:{"*":e},customAudio:{"*":e}})}},{key:"fromJSONObject",value:function(e){return new r({video:e.video,audio:e.audio,screenVideo:e.screenVideo,screenAudio:e.screenAudio,customVideo:e.customVideo!==void 0?Ve({},e.customVideo):void 0,customAudio:e.customAudio!==void 0?Ve({},e.customAudio):void 0})}},{key:"fromMinifiedJSONObject",value:function(e){return new r({video:e.v,audio:e.a,screenVideo:e.sv,screenAudio:e.sa,customVideo:e.cv,customAudio:e.ca})}},{key:"validateJSONObject",value:function(e,t){if(typeof e=="boolean")return[!0];if(J(e)!=="object")return[!1,"invalid (non-object, non-boolean) value in canReceive"];for(var n=Object.keys(e),i=0,o=n;i<o.length;i++){var a=o[i];if(!At.includes(a))return[!1,"invalid media type '".concat(a,"' in canReceive")];if(Gl.includes(a)){if(typeof e[a]!="boolean")return[!1,"invalid (non-boolean) value for media type '".concat(a,"' in canReceive")]}else{if(J(e[a])!=="object")return[!1,"invalid (non-object) value for media type '".concat(a,"' in canReceive")];for(var l=0,u=Object.values(e[a]);l<u.length;l++)if(typeof u[l]!="boolean")return[!1,"invalid (non-boolean) value for entry within '".concat(a,"' in canReceive")];if(t&&e[a]["*"]===void 0)return[!1,`canReceive "base" permission must specify "*" as an entry within '`.concat(a,"'")]}}return t&&n.length!==At.length?[!1,'canReceive "base" permission must specify all media types: '.concat(At.join(", ")," (or be set to a boolean shorthand)")]:[!0]}}])}(),Yl=["result"],Wl=["preserveIframe"];function Fo(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function L(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fo(Object(t),!0).forEach(function(n){we(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Fo(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function qo(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qo=function(){return!!r})()}function Vo(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,p){if(u){if(typeof u=="string")return $o(u,p);var f={}.toString.call(u).slice(8,-1);return f==="Object"&&u.constructor&&(f=u.constructor.name),f==="Map"||f==="Set"?Array.from(u):f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?$o(u,p):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,a=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return a=u.done,u},e:function(u){l=!0,o=u},f:function(){try{a||t.return==null||t.return()}finally{if(l)throw o}}}}function $o(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var tt={},Uo="video",zl="voice",Jo=$()?{data:{}}:{data:{},topology:"none"},Bo={present:0,hidden:0},Go={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},En=Object.keys(Go),Yo=["state","volume","simulcastEncodings"],Wo={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},dr={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string",visualState:"'default' | 'sidebar-open' | 'active'"}},kn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},rt={customIntegrations:{validate:ra,help:ea()},customTrayButtons:{validate:ta,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(dr))},url:{validate:function(r){return typeof r=="string"},help:"url should be a string"},baseUrl:{validate:function(r){return typeof r=="string"},help:"baseUrl should be a string"},token:{validate:function(r){return typeof r=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(r,e){try{return e.validateDailyConfig(r),!0}catch(t){console.error("Failed to validate dailyConfig",t)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(r){return na(r,Wo)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Wo),", all fields optional")},lang:{validate:function(r){return["da","de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(r)},help:"language not supported. Options are: da, de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(r){try{return zo(r),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,allowLocalVideo:!0,allowLocalAudio:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(r,e){if(typeof r=="boolean")return e._preloadCache.allowLocalVideo=r,!0;var t;if(r instanceof MediaStreamTrack)e._sharedTracks.videoTrack=r,t={customTrack:je};else{if(delete e._sharedTracks.videoTrack,typeof r!="string")return console.error("videoSource must be a MediaStreamTrack, boolean, or a string"),!1;t={deviceId:r}}return e._updatePreloadCacheInputSettings({video:{settings:t}},!1),!0}},audioSource:{validate:function(r,e){if(typeof r=="boolean")return e._preloadCache.allowLocalAudio=r,!0;var t;if(r instanceof MediaStreamTrack)e._sharedTracks.audioTrack=r,t={customTrack:je};else{if(delete e._sharedTracks.audioTrack,typeof r!="string")return console.error("audioSource must be a MediaStreamTrack, boolean, or a string"),!1;t={deviceId:r}}return e._updatePreloadCacheInputSettings({audio:{settings:t}},!1),!0}},subscribeToTracksAutomatically:{validate:function(r,e){return e._preloadCache.subscribeToTracksAutomatically=r,!0}},theme:{validate:function(r){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],t=function(n){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=o[i];if(!e.includes(a))return console.error('unsupported color "'.concat(a,'". Valid colors: ').concat(e.join(", "))),!1;if(!n[a].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(a,' theme color should be provided in valid hex color format. Received: "').concat(n[a],'"')),!1}return!0};return J(r)==="object"&&("light"in r&&"dark"in r||"colors"in r)?"light"in r&&"dark"in r?"colors"in r.light?"colors"in r.dark?t(r.light.colors)&&t(r.dark.colors):(console.error('Dark theme is missing "colors" property.',r),!1):(console.error('Light theme is missing "colors" property.',r),!1):t(r.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',r),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(r){if("grid"in r){var e=r.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(r){return Ho(r,{allowAllParticipantsKey:!1})},help:Zo({allowAllParticipantsKey:!1})},sendSettings:{validate:function(r,e){return!!function(t,n){try{return n.validateUpdateSendSettings(t),!0}catch(i){return console.error("Failed to validate send settings",i),!1}}(r,e)&&(e._preloadCache.sendSettings=r,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(r,e){var t;return!!Qo(r)&&(e._inputSettings||(e._inputSettings={}),Ko(r,(t=e.properties)===null||t===void 0?void 0:t.dailyConfig,e._sharedTracks),e._updatePreloadCacheInputSettings(r,!0),!0)},help:An()},layout:{validate:function(r){return r==="custom-v1"||r==="browser"||r==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},pr={styles:{validate:function(r){for(var e in r)if(e!=="cam"&&e!=="screen")return!1;if(r.cam){for(var t in r.cam)if(t!=="div"&&t!=="video")return!1}if(r.screen){for(var n in r.screen)if(n!=="div"&&n!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(r,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var t=[!0,!1,"staged"];if(t.includes(r)||!$()&&r==="avatar")return!0;var n=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"],i=function(o){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var l in o)if(l==="custom"){if(!t.includes(o[l])&&!i(o[l],!0))return!1}else{var u=!a&&!n.includes(l),p=!t.includes(o[l]);if(u||p)return!1}return!0};return i(r)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat($()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(r){return r===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(r){for(var e=0,t=Object.entries(r);e<t.length;e++){var n=te(t[e],2),i=n[0],o=n[1];switch(i){case"hasPresence":if(typeof o!="boolean")return!1;break;case"canSend":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var a,l=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],u=Vo(o);try{for(u.s();!(a=u.n()).done;){var p=a.value;if(!l.includes(p))return!1}}catch(S){u.e(S)}finally{u.f()}}else if(typeof o!="boolean")return!1;(o instanceof Array||Array.isArray(o))&&(r.canSend=new Set(o));break;case"canReceive":var f=te(xo.validateJSONObject(o),2),v=f[0],E=f[1];if(!v)return console.error(E),!1;break;case"canAdmin":if(o instanceof Set||o instanceof Array||Array.isArray(o)){var k,_=["participants","streaming","transcription"],g=Vo(o);try{for(g.s();!(k=g.n()).done;){var y=k.value;if(!_.includes(y))return!1}}catch(S){g.e(S)}finally{g.f()}}else if(typeof o!="boolean")return!1;(o instanceof Array||Array.isArray(o))&&(r.canAdmin=new Set(o));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, canReceive, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canReceive must be an object specifying base, byUserId, and/or byParticipantId fields (see documentation for more details). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var r=N(function*(e){return new Promise(function(t,n){var i=[];e.forEach(function(o){return Promise.resolve(o).then(function(a){t(a)}).catch(function(a){i.push(a),i.length===e.length&&n(i)})})})});return function(e){return r.apply(this,arguments)}}());var Hl=function(){function r(s){var d,c,h,m,b,T,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ce(this,r),h=this,m=ye(m=r),we(c=jt(h,qo()?Reflect.construct(m,[],ye(h).constructor):m.apply(h,b)),"startListeningForDeviceChanges",function(){Vl(c.handleDeviceChange)}),we(c,"stopListeningForDeviceChanges",function(){$l(c.handleDeviceChange)}),we(c,"handleDeviceChange",function(F){F=F.map(function(U){return JSON.parse(JSON.stringify(U))}),c.emitDailyJSEvent({action:"available-devices-updated",availableDevices:F})}),we(c,"handleNativeAppStateChange",function(){var F=N(function*(U){if(U==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield c.destroy());var Te=U==="active";c.disableReactNativeAutoDeviceManagement("video")||(Te?c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!0):(c.camUnmutedBeforeLosingNativeActiveState=c.localVideo(),c.camUnmutedBeforeLosingNativeActiveState&&c.setLocalVideo(!1)))});return function(U){return F.apply(this,arguments)}}()),we(c,"handleNativeAudioFocusChange",function(F){c.disableReactNativeAutoDeviceManagement("audio")||(c._hasNativeAudioFocus=F,c.toggleParticipantAudioBasedOnNativeAudioFocus(),c._hasNativeAudioFocus?c.micUnmutedBeforeLosingNativeAudioFocus&&c.setLocalAudio(!0):(c.micUnmutedBeforeLosingNativeAudioFocus=c.localAudio(),c.setLocalAudio(!1)))}),we(c,"handleNativeSystemScreenCaptureStop",function(){c.stopScreenShare()}),c.strictMode=A.strictMode===void 0||A.strictMode,c.allowMultipleCallInstances=(d=A.allowMultipleCallInstances)!==null&&d!==void 0&&d,Object.keys(tt).length&&(c._logDuplicateInstanceAttempt(),!c.allowMultipleCallInstances)){if(c.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),c.callClientId=xt(),tt[(T=c).callClientId]=T,window._daily.instances[c.callClientId]={},c._sharedTracks={},window._daily.instances[c.callClientId].tracks=c._sharedTracks,A.dailyJsVersion=r.version(),c._iframe=s,c._callObjectMode=A.layout==="none"&&!c._iframe,c._preloadCache={subscribeToTracksAutomatically:!0,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},A.showLocalVideo!==void 0?c._callObjectMode?console.error("showLocalVideo is not available in call object mode"):c._showLocalVideo=!!A.showLocalVideo:c._showLocalVideo=!0,A.showParticipantsBar!==void 0?c._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):c._showParticipantsBar=!!A.showParticipantsBar:c._showParticipantsBar=!0,A.customIntegrations!==void 0?c._callObjectMode?console.error("customIntegrations is not available in call object mode"):c._customIntegrations=A.customIntegrations:c._customIntegrations={},A.customTrayButtons!==void 0?c._callObjectMode?console.error("customTrayButtons is not available in call object mode"):c._customTrayButtons=A.customTrayButtons:c._customTrayButtons={},A.activeSpeakerMode!==void 0?c._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):c._activeSpeakerMode=!!A.activeSpeakerMode:c._activeSpeakerMode=!1,A.receiveSettings?c._callObjectMode?c._receiveSettings=A.receiveSettings:console.error("receiveSettings is only available in call object mode"):c._receiveSettings={},c.validateProperties(A),c.properties=L({},A),c._inputSettings||(c._inputSettings={}),c._callObjectLoader=c._callObjectMode?new Ml(c.callClientId):null,c._callState=tn,c._isPreparingToJoin=!1,c._accessState={access:sr},c._meetingSessionSummary={},c._finalSummaryOfPrevSession={},c._meetingSessionState=On(Jo,c._callObjectMode),c._nativeInCallAudioMode=Uo,c._participants={},c._isScreenSharing=!1,c._participantCounts=Bo,c._rmpPlayerState={},c._waitingParticipants={},c._network={threshold:"good",quality:100,networkState:"unknown",stats:{}},c._activeSpeaker={},c._localAudioLevel=0,c._isLocalAudioLevelObserverRunning=!1,c._remoteParticipantsAudioLevel={},c._isRemoteParticipantsAudioLevelObserverRunning=!1,c._maxAppMessageSize=un,c._messageChannel=$()?new Al:new Tl,c._iframe&&(c._iframe.requestFullscreen?c._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===c._iframe?(c.emitDailyJSEvent({action:Et}),c.sendMessageToCallMachine({action:Et})):(c.emitDailyJSEvent({action:kt}),c.sendMessageToCallMachine({action:kt}))}):c._iframe.webkitRequestFullscreen&&c._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===c._iframe?(c.emitDailyJSEvent({action:Et}),c.sendMessageToCallMachine({action:Et})):(c.emitDailyJSEvent({action:kt}),c.sendMessageToCallMachine({action:kt}))})),$()){var I=c.nativeUtils();I.addAudioFocusChangeListener&&I.removeAudioFocusChangeListener&&I.addAppStateChangeListener&&I.removeAppStateChangeListener&&I.addSystemScreenCaptureStopListener&&I.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),c._hasNativeAudioFocus=!0,I.addAudioFocusChangeListener(c.handleNativeAudioFocusChange),I.addAppStateChangeListener(c.handleNativeAppStateChange),I.addSystemScreenCaptureStopListener(c.handleNativeSystemScreenCaptureStop)}return c._callObjectMode&&c.startListeningForDeviceChanges(),c._messageChannel.addListenerForMessagesFromCallMachine(c.handleMessageFromCallMachine,c.callClientId,c),c}return Dt(r,Rt),le(r,[{key:"destroy",value:(Oa=N(function*(){var s;try{yield this.leave()}catch{}var d=this._iframe;if(d){var c=d.parentElement;c&&c.removeChild(d)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),$()){var h=this.nativeUtils();h.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),h.removeAppStateChangeListener(this.handleNativeAppStateChange),h.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete tt[this.callClientId],!((s=window)===null||s===void 0||(s=s._daily)===null||s===void 0)&&s.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return Oa.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(s){var d=s.bodyClass,c=s.cssFile,h=s.cssText;return V(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(c),bodyClass:d,cssText:h}),this}},{key:"iframe",value:function(){return V(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return Se(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return Se(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(s,d){for(var c in d){if(!pr[c])throw new Error("unrecognized updateParticipant property ".concat(c));if(pr[c].validate&&!pr[c].validate(d[c],this,this._participants[s]))throw new Error(pr[c].help)}}},{key:"updateParticipant",value:function(s,d){return this._participants.local&&this._participants.local.session_id===s&&(s="local"),s&&d&&(this.validateParticipantProperties(s,d),this.sendMessageToCallMachine({action:"update-participant",id:s,properties:d})),this}},{key:"updateParticipants",value:function(s){var d=this._participants.local&&this._participants.local.session_id;for(var c in s)c===d&&(c="local"),c&&s[c]&&this.validateParticipantProperties(c,s[c]);return this.sendMessageToCallMachine({action:"update-participants",participants:s}),this}},{key:"updateWaitingParticipant",value:(Aa=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Se(this._callObjectMode,"updateWaitingParticipant()"),H(this._callState,"updateWaitingParticipant()"),typeof d!="string"||J(c)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(h,m){s.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:d,updates:c},function(b){b.error&&m(b.error),b.id||m(new Error("unknown error in updateWaitingParticipant()")),h({id:b.id})})})}),function(){return Aa.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(Ta=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Se(this._callObjectMode,"updateWaitingParticipants()"),H(this._callState,"updateWaitingParticipants()"),J(d)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(c,h){s.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:d},function(m){m.error&&h(m.error),m.ids||h(new Error("unknown error in updateWaitingParticipants()")),c({ids:m.ids})})})}),function(){return Ta.apply(this,arguments)})},{key:"requestAccess",value:(Ca=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=d.access,h=c===void 0?{level:ns}:c,m=d.name,b=m===void 0?"":m;return Se(this._callObjectMode,"requestAccess()"),H(this._callState,"requestAccess()"),new Promise(function(T,A){s.sendMessageToCallMachine({action:"daily-method-request-access",access:h,name:b},function(I){I.error&&A(I.error),I.access||A(new Error("unknown error in requestAccess()")),T({access:I.access,granted:I.granted})})})}),function(){return Ca.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in d&&($()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),d={}):s&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),d={})),this.sendMessageToCallMachine({action:"local-audio",state:s,options:d}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(s){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:s}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(s){return this.sendMessageToCallMachine({action:"local-video",state:s}),this}},{key:"_setAllowLocalAudio",value:function(s){if(this._preloadCache.allowLocalAudio=s,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-audio",state:s}),this}},{key:"_setAllowLocalVideo",value:function(s){if(this._preloadCache.allowLocalVideo=s,this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-allow-local-video",state:s}),this}},{key:"getReceiveSettings",value:(ka=N(function*(s){var d=this,c=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,h=c!==void 0&&c;if(Se(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(J(s)){case"string":return new Promise(function(m){d.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:s,showInheritedValues:h},function(b){m(b.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(s){return ka.apply(this,arguments)})},{key:"updateReceiveSettings",value:(Ea=N(function*(s){var d=this;if(Se(this._callObjectMode,"updateReceiveSettings()"),!Ho(s,{allowAllParticipantsKey:!0}))throw new Error(Zo({allowAllParticipantsKey:!0}));return H(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(c){d.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:s},function(h){c({receiveSettings:h.receiveSettings})})})}),function(s){return Ea.apply(this,arguments)})},{key:"_prepInputSettingsForSharing",value:function(s,d){if(s){var c={};if(s.audio){var h,m,b;s.audio.settings&&(!Object.keys(s.audio.settings).length&&d||(c.audio={settings:L({},s.audio.settings)})),d&&(h=c.audio)!==null&&h!==void 0&&(h=h.settings)!==null&&h!==void 0&&h.customTrack&&(c.audio.settings={customTrack:this._sharedTracks.audioTrack});var T=((m=s.audio.processor)===null||m===void 0?void 0:m.type)==="none"&&((b=s.audio.processor)===null||b===void 0?void 0:b._isDefaultWhenNone);if(s.audio.processor&&!T){var A=L({},s.audio.processor);delete A._isDefaultWhenNone,c.audio=L(L({},c.audio),{},{processor:A})}}if(s.video){var I,F,U;s.video.settings&&(!Object.keys(s.video.settings).length&&d||(c.video={settings:L({},s.video.settings)})),d&&(I=c.video)!==null&&I!==void 0&&(I=I.settings)!==null&&I!==void 0&&I.customTrack&&(c.video.settings={customTrack:this._sharedTracks.videoTrack});var Te=((F=s.video.processor)===null||F===void 0?void 0:F.type)==="none"&&((U=s.video.processor)===null||U===void 0?void 0:U._isDefaultWhenNone);if(s.video.processor&&!Te){var nt=L({},s.video.processor);delete nt._isDefaultWhenNone,c.video=L(L({},c.video),{},{processor:nt})}}return c}}},{key:"getInputSettings",value:function(){var s=this;return V(),new Promise(function(d){d(s._getInputSettings())})}},{key:"_getInputSettings",value:function(){var s,d,c,h,m,b,T={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(s=((c=this._inputSettings)===null||c===void 0?void 0:c.video)||T,d=((h=this._inputSettings)===null||h===void 0?void 0:h.audio)||T):(s=((m=this._preloadCache)===null||m===void 0||(m=m.inputSettings)===null||m===void 0?void 0:m.video)||T,d=((b=this._preloadCache)===null||b===void 0||(b=b.inputSettings)===null||b===void 0?void 0:b.audio)||T);var A={audio:d,video:s};return this._prepInputSettingsForSharing(A,!0)}},{key:"_updatePreloadCacheInputSettings",value:function(s,d){var c=this._inputSettings||{},h={};if(s.video){var m,b,T;h.video={},s.video.settings?(h.video.settings={},d||s.video.settings.customTrack||(T=c.video)===null||T===void 0||!T.settings?h.video.settings=s.video.settings:h.video.settings=L(L({},c.video.settings),s.video.settings),Object.keys(h.video.settings).length||delete h.video.settings):(m=c.video)!==null&&m!==void 0&&m.settings&&(h.video.settings=c.video.settings),s.video.processor?h.video.processor=s.video.processor:(b=c.video)!==null&&b!==void 0&&b.processor&&(h.video.processor=c.video.processor)}else c.video&&(h.video=c.video);if(s.audio){var A,I,F;h.audio={},s.audio.settings?(h.audio.settings={},d||s.audio.settings.customTrack||(F=c.audio)===null||F===void 0||!F.settings?h.audio.settings=s.audio.settings:h.audio.settings=L(L({},c.audio.settings),s.audio.settings),Object.keys(h.audio.settings).length||delete h.audio.settings):(A=c.audio)!==null&&A!==void 0&&A.settings&&(h.audio.settings=c.audio.settings),s.audio.processor?h.audio.processor=s.audio.processor:(I=c.audio)!==null&&I!==void 0&&I.processor&&(h.audio.processor=c.audio.processor)}else c.audio&&(h.audio=c.audio);this._maybeUpdateInputSettings(h)}},{key:"_devicesFromInputSettings",value:function(s){var d,c,h=(s==null||(d=s.video)===null||d===void 0||(d=d.settings)===null||d===void 0?void 0:d.deviceId)||null,m=(s==null||(c=s.audio)===null||c===void 0||(c=c.settings)===null||c===void 0?void 0:c.deviceId)||null,b=this._preloadCache.outputDeviceId||null;return{camera:h?{deviceId:h}:{},mic:m?{deviceId:m}:{},speaker:b?{deviceId:b}:{}}}},{key:"updateInputSettings",value:(wa=N(function*(s){var d=this;return V(),Qo(s)?s.video||s.audio?(Ko(s,this.properties.dailyConfig,this._sharedTracks),this._callObjectMode&&!this._callMachineInitialized?(this._updatePreloadCacheInputSettings(s,!0),this._getInputSettings()):new Promise(function(c,h){d.sendMessageToCallMachine({action:"update-input-settings",inputSettings:s},function(m){if(m.error)h(m.error);else{if(m.returnPreloadCache)return d._updatePreloadCacheInputSettings(s,!0),void c(d._getInputSettings());d._maybeUpdateInputSettings(m.inputSettings),c(d._prepInputSettingsForSharing(m.inputSettings,!0))}})})):this._getInputSettings():(console.error(An()),Promise.reject(An()))}),function(s){return wa.apply(this,arguments)})},{key:"setBandwidth",value:function(s){var d=s.kbs,c=s.trackConstraints;if(V(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:d,trackConstraints:c}),this}},{key:"getDailyLang",value:function(){var s=this;if(V(),this._callMachineInitialized)return new Promise(function(d){s.sendMessageToCallMachine({action:"get-daily-lang"},function(c){delete c.action,delete c.callbackStamp,d(c)})})}},{key:"setDailyLang",value:function(s){return V(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:s}),this}},{key:"setProxyUrl",value:function(s){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:s}),this}},{key:"setIceConfig",value:function(s){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:s}),this}},{key:"meetingSessionSummary",value:function(){return[qe,Le].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(Sa=N(function*(){var s=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),H(this._callState,"getMeetingSession()"),new Promise(function(d){s.sendMessageToCallMachine({action:"get-meeting-session"},function(c){delete c.action,delete c.callbackStamp,d(c)})})}),function(){return Sa.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return H(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";Se(this._callObjectMode,"setMeetingSessionData()"),H(this._callState,"setMeetingSessionData");try{(function(c,h){new Ol({data:c,mergeStrategy:h})})(s,d)}catch(c){throw console.error(c),c}try{this.sendMessageToCallMachine({action:"set-session-data",data:s,mergeStrategy:d})}catch(c){throw new Error("Error setting meeting session data: ".concat(c))}}},{key:"setUserName",value:function(s,d){var c=this;return this.properties.userName=s,new Promise(function(h){c.sendMessageToCallMachine({action:"set-user-name",name:s??"",thisMeetingOnly:$()||!!d&&!!d.thisMeetingOnly},function(m){delete m.action,delete m.callbackStamp,h(m)})})}},{key:"setUserData",value:(_a=N(function*(s){var d=this;try{zo(s)}catch(c){throw console.error(c),c}if(this.properties.userData=s,this._callMachineInitialized)return new Promise(function(c){try{d.sendMessageToCallMachine({action:"set-user-data",userData:s},function(h){delete h.action,delete h.callbackStamp,c(h)})}catch(h){throw new Error("Error setting user data: ".concat(h))}})}),function(s){return _a.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(s){if(s&&(s<100||typeof s!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(s){var d=this;if(typeof AudioWorkletNode>"u"&&!$())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(s),this._callMachineInitialized)return this._isLocalAudioLevelObserverRunning=!0,new Promise(function(c,h){d.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:s},function(m){d._isLocalAudioLevelObserverRunning=!m.error,m.error?h({error:m.error}):c()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:s}}},{key:"isLocalAudioLevelObserverRunning",value:function(){return this._isLocalAudioLevelObserverRunning}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(s){var d=this;if(this.validateAudioLevelInterval(s),this._callMachineInitialized)return this._isRemoteParticipantsAudioLevelObserverRunning=!0,new Promise(function(c,h){d.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:s},function(m){d._isRemoteParticipantsAudioLevelObserverRunning=!m.error,m.error?h({error:m.error}):c()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:s}}},{key:"isRemoteParticipantsAudioLevelObserverRunning",value:function(){return this._isRemoteParticipantsAudioLevelObserverRunning}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(Ce=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Se(this._callObjectMode,"startCamera()"),Cn(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(d)}catch(c){return Promise.reject(c)}else{if(this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(d),this.properties=L(L({},this.properties),d)}return new Promise(function(c){s._preloadCache.inputSettings=s._prepInputSettingsForSharing(s._inputSettings,!1),s.sendMessageToCallMachine({action:"start-camera",properties:ft(s.properties,s.callClientId),preloadCache:ft(s._preloadCache,s.callClientId)},function(h){c({camera:h.camera,mic:h.mic,speaker:h.speaker})})})}),function(){return Ce.apply(this,arguments)})},{key:"validateCustomTrack",value:function(s,d,c){if(c&&c.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(d&&d!=="music"&&d!=="speech"&&!(d instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(c&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(c))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(s instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return V(),H(this._callState,"startCustomTrack()"),this.validateCustomTrack(d.track,d.mode,d.trackName),new Promise(function(c,h){s._sharedTracks.customTrack=d.track,d.track=je,s.sendMessageToCallMachine({action:"start-custom-track",properties:d},function(m){m.error?h({error:m.error}):c(m.mediaTag)})})}},{key:"stopCustomTrack",value:function(s){var d=this;return V(),H(this._callState,"stopCustomTrack()"),new Promise(function(c){d.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:s},function(h){c(h.mediaTag)})})}},{key:"setCamera",value:function(s){var d=this;return Ot(),fr(this._callMachineInitialized,"setCamera()"),new Promise(function(c){d.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:s},function(h){c({device:h.device})})})}},{key:"setAudioDevice",value:(ae=N(function*(s){return Ot(),this.nativeUtils().setAudioDevice(s),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(s){return ae.apply(this,arguments)})},{key:"cycleCamera",value:function(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(c){s.sendMessageToCallMachine({action:"cycle-camera",properties:d},function(h){c({device:h.device})})})}},{key:"cycleMic",value:function(){var s=this;return V(),new Promise(function(d){s.sendMessageToCallMachine({action:"cycle-mic"},function(c){d({device:c.device})})})}},{key:"getCameraFacingMode",value:function(){var s=this;return Ot(),new Promise(function(d){s.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(c){d(c.facingMode)})})}},{key:"setInputDevicesAsync",value:(G=N(function*(s){var d=this,c=s.audioDeviceId,h=s.videoDeviceId,m=s.audioSource,b=s.videoSource;if(V(),m!==void 0&&(c=m),b!==void 0&&(h=b),typeof c=="boolean"&&(this._setAllowLocalAudio(c),c=void 0),typeof h=="boolean"&&(this._setAllowLocalVideo(h),h=void 0),!c&&!h)return yield this.getInputDevices();var T={};return c&&(c instanceof MediaStreamTrack?(this._sharedTracks.audioTrack=c,c=je,T.audio={settings:{customTrack:c}}):(delete this._sharedTracks.audioTrack,T.audio={settings:{deviceId:c}})),h&&(h instanceof MediaStreamTrack?(this._sharedTracks.videoTrack=h,h=je,T.video={settings:{customTrack:h}}):(delete this._sharedTracks.videoTrack,T.video={settings:{deviceId:h}})),this._callObjectMode&&this.needsLoad()?(this._updatePreloadCacheInputSettings(T,!1),this._devicesFromInputSettings(this._inputSettings)):new Promise(function(A){d.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:c,videoDeviceId:h},function(I){if(delete I.action,delete I.callbackStamp,I.returnPreloadCache)return d._updatePreloadCacheInputSettings(T,!1),void A(d._devicesFromInputSettings(d._inputSettings));A(I)})})}),function(s){return G.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(O=N(function*(s){var d=this,c=s.outputDeviceId;return V(),c&&(this._preloadCache.outputDeviceId=c),this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(h){d.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:c},function(m){delete m.action,delete m.callbackStamp,m.returnPreloadCache?h(d._devicesFromInputSettings(d._inputSettings)):h(m)})})}),function(s){return O.apply(this,arguments)})},{key:"getInputDevices",value:(Ue=N(function*(){var s=this;return this._callObjectMode&&this.needsLoad()?this._devicesFromInputSettings(this._inputSettings):new Promise(function(d){s.sendMessageToCallMachine({action:"get-input-devices"},function(c){c.returnPreloadCache?d(s._devicesFromInputSettings(s._inputSettings)):d({camera:c.camera,mic:c.mic,speaker:c.speaker})})})}),function(){return Ue.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return Ot(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(s){if(Ot(),[Uo,zl].includes(s)){if(s!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=s,!this.disableReactNativeAutoDeviceManagement("audio")&&hr(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",s)}},{key:"preAuth",value:(ne=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Se(this._callObjectMode,"preAuth()"),Cn(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(d)),!d.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(d),this.properties=L(L({},this.properties),d),new Promise(function(c,h){s._preloadCache.inputSettings=s._prepInputSettingsForSharing(s._inputSettings,!1),s.sendMessageToCallMachine({action:"daily-method-preauth",properties:ft(s.properties,s.callClientId),preloadCache:ft(s._preloadCache,s.callClientId)},function(m){return m.error?h(m.error):m.access?(s._didPreAuth=!0,void c({access:m.access})):h(new Error("unknown error in preAuth()"))})})}),function(){return ne.apply(this,arguments)})},{key:"load",value:(W=N(function*(s){var d=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(s&&(this.validateProperties(s),this.properties=L(L({},this.properties),s)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(es),this.emitDailyJSEvent({action:us}),this._callObjectMode?new Promise(function(c,h){d._callObjectLoader.cancel();var m=Date.now();d._callObjectLoader.load(d.properties.dailyConfig,function(b){d._bundleLoadTime=b?"no-op":Date.now()-m,d._updateCallState(ts),b&&d.emitDailyJSEvent({action:nn}),c()},function(b,T){if(d.emitDailyJSEvent({action:ds}),!T){d._updateCallState(Le),d.resetMeetingDependentVars();var A={action:ln,errorMsg:b.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:b,bundleUrl:Ft(d.properties.dailyConfig)}}};d._maybeSendToSentry(A),d.emitDailyJSEvent(A),h(b.msg)}})}):(this._iframe.src=$n(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(c,h){d._loadedCallback=function(m){d._callState!==Le?(d._updateCallState(ts),(d.properties.cssFile||d.properties.cssText)&&d.loadCss(d.properties),c()):h(m)}}))}}),function(s){return W.apply(this,arguments)})},{key:"join",value:(q=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var c=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(d)}catch(h){return this.updateIsPreparingToJoin(!1),Promise.reject(h)}}else{if(c=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(d.token&&d.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(d.url&&!this._callObjectMode&&d.url&&d.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(d.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(d),this.properties=L(L({},this.properties),d)}return d.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!d.showLocalVideo),d.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!d.showParticipantsBar),this._callState===Fe||this._callState===ir?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(ir,!1),this.emitDailyJSEvent({action:fs}),this._preloadCache.inputSettings=this._prepInputSettingsForSharing(this._inputSettings||{},!1),this.sendMessageToCallMachine({action:"join-meeting",properties:ft(this.properties,this.callClientId),preloadCache:ft(this._preloadCache,this.callClientId)}),new Promise(function(h,m){s._joinedCallback=function(b,T){if(s._callState!==Le){if(s._updateCallState(Fe),b)for(var A in b){if(s._callObjectMode){var I=s._callMachine().store;Ao(b[A],I),Oo(b[A],I),Mo(b[A],s._participants[A],I)}s._participants[A]=L({},b[A]),s.toggleParticipantAudioBasedOnNativeAudioFocus()}c&&s.loadCss(s.properties),h(b)}else m(T)}}))}),function(){return q.apply(this,arguments)})},{key:"leave",value:(D=N(function*(){var s=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(d){s._callState===qe||s._callState===Le?d():s._callObjectLoader&&!s._callObjectLoader.loaded?(s._callObjectLoader.cancel(),s._updateCallState(qe),s.resetMeetingDependentVars(),s.emitDailyJSEvent({action:qe}),d()):(s._resolveLeave=d,s.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return D.apply(this,arguments)})},{key:"startScreenShare",value:(j=N(function*(){var s=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fr(this._callMachineInitialized,"startScreenShare()"),d.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",d.screenVideoSendSettings),d.mediaStream&&(this._sharedTracks.screenMediaStream=d.mediaStream,d.mediaStream=je),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var c=this.nativeUtils();if(yield c.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:cn,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});c.setSystemScreenCaptureStartCallback(function(){c.setSystemScreenCaptureStartCallback(null),s.sendMessageToCallMachine({action:no,captureOptions:d})}),c.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:no,captureOptions:d})}),function(){return j.apply(this,arguments)})},{key:"stopScreenShare",value:function(){fr(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=s.type;if(d&&d!=="cloud"&&d!=="raw-tracks"&&d!=="local")throw new Error("invalid type: ".concat(d,", allowed values 'cloud', 'raw-tracks', or 'local'"));this.sendMessageToCallMachine(L({action:"local-recording-start"},s))}},{key:"updateRecording",value:function(s){var d=s.layout,c=d===void 0?{preset:"default"}:d,h=s.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:c,instanceId:h})}},{key:"stopRecording",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(L({action:"local-recording-stop"},s))}},{key:"startLiveStreaming",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(L({action:"daily-method-start-live-streaming"},s))}},{key:"updateLiveStreaming",value:function(s){var d=s.layout,c=d===void 0?{preset:"default"}:d,h=s.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:c,instanceId:h})}},{key:"addLiveStreamingEndpoints",value:function(s){var d=s.endpoints,c=s.instanceId;this.sendMessageToCallMachine({action:io,endpointsOp:_l,endpoints:d,instanceId:c})}},{key:"removeLiveStreamingEndpoints",value:function(s){var d=s.endpoints,c=s.instanceId;this.sendMessageToCallMachine({action:io,endpointsOp:Sl,endpoints:d,instanceId:c})}},{key:"stopLiveStreaming",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(L({action:"daily-method-stop-live-streaming"},s))}},{key:"validateDailyConfig",value:function(s){s.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(s.camSimulcastEncodings)),s.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),ho()&&s.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(s){if(!(s instanceof Array||Array.isArray(s)))throw new Error("encodings must be an Array");if(!oa(s.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var h=0;h<s.length;h++){var m=s[h];for(var b in this._validateEncodingLayerHasValidProperties(m),m)if(En.includes(b)){if(typeof m[b]!="number")throw new Error("".concat(b," must be a number"));if(d){var T=d[b],A=T.min,I=T.max;if(!oa(m[b],A,I))throw new Error("".concat(b," value not in range. valid range: ").concat(A," to ").concat(I))}}else if(!["active","scalabilityMode"].includes(b))throw new Error("Invalid key ".concat(b,", valid keys are:")+Object.values(En));if(c&&!m.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(M=N(function*(s){var d=this,c=s.url,h=s.settings,m=h===void 0?{state:pn.PLAY}:h;try{(function(b){if(typeof b!="string")throw new Error('url parameter must be "string" type')})(c),sa(m),function(b){for(var T in b)if(!Yo.includes(T))throw new Error("Invalid key ".concat(T,", valid keys are: ").concat(Yo));b.simulcastEncodings&&this.validateSimulcastEncodings(b.simulcastEncodings,Go,!0)}(m)}catch(b){throw console.error("invalid argument Error: ".concat(b)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),b}return new Promise(function(b,T){d.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:c,settings:m},function(A){A.error?T({error:A.error,errorMsg:A.errorMsg}):b({session_id:A.session_id,remoteMediaPlayerState:{state:A.state,settings:A.settings}})})})}),function(s){return M.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(C=N(function*(s){var d=this;if(typeof s!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(c,h){d.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:s},function(m){m.error?h({error:m.error,errorMsg:m.errorMsg}):c()})})}),function(s){return C.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(S=N(function*(s){var d=this,c=s.session_id,h=s.settings;try{sa(h)}catch(m){throw console.error("invalid argument Error: ".concat(m)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),m}return new Promise(function(m,b){d.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:c,settings:h},function(T){T.error?b({error:T.error,errorMsg:T.errorMsg}):m({session_id:T.session_id,remoteMediaPlayerState:{state:T.state,settings:T.settings}})})})}),function(s){return S.apply(this,arguments)})},{key:"startTranscription",value:function(s){H(this._callState,"startTranscription()"),this.sendMessageToCallMachine(L({action:"daily-method-start-transcription"},s))}},{key:"updateTranscription",value:function(s){if(H(this._callState,"updateTranscription()"),!s)throw new Error("updateTranscription Error: options is mandatory");if(J(s)!=="object")throw new Error("updateTranscription Error: options must be object type");if(s.participants&&!Array.isArray(s.participants))throw new Error("updateTranscription Error: participants must be an array");this.sendMessageToCallMachine(L({action:"daily-method-update-transcription"},s))}},{key:"stopTranscription",value:function(s){if(H(this._callState,"stopTranscription()"),s&&J(s)!=="object")throw new Error("stopTranscription Error: options must be object type");if(s&&!s.instanceId)throw new Error('"instanceId" not provided');this.sendMessageToCallMachine(L({action:"daily-method-stop-transcription"},s))}},{key:"startDialOut",value:(y=N(function*(s){var d=this;H(this._callState,"startDialOut()");var c=function(T){if(T){if(!Array.isArray(T))throw new Error("Error starting dial out: audio codec must be an array");if(T.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");T.forEach(function(A){if(typeof A!="string")throw new Error("Error starting dial out: audio codec must be a string");if(A!=="OPUS"&&A!=="PCMU"&&A!=="PCMA"&&A!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!s.sipUri&&!s.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(s.sipUri&&s.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(s.sipUri){if(typeof s.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!s.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(s.video&&typeof s.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(T){if(T&&(c(T.audio),T.video)){if(!Array.isArray(T.video))throw new Error("Error starting dial out: video codec must be an array");if(T.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");T.video.forEach(function(A){if(typeof A!="string")throw new Error("Error starting dial out: video codec must be a string");if(A!=="H264"&&A!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(s.codecs)}if(s.phoneNumber){if(typeof s.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(s.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");s.codecs&&c(s.codecs.audio)}if(s.callerId){if(typeof s.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(s.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(s.displayName){if(typeof s.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(s.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}if(s.userId){if(typeof s.userId!="string")throw new Error("Error starting dial out: userId must be a string");if(s.userId.length>36)throw new Error("Error starting dial out: userId length must be less than or equal to 36")}if(s.permissions&&s.permissions.canReceive){var h=te(xo.validateJSONObject(s.permissions.canReceive),2),m=h[0],b=h[1];if(!m)throw new Error(b)}return new Promise(function(T,A){d.sendMessageToCallMachine(L({action:"dialout-start"},s),function(I){I.error?A(I.error):T(I)})})}),function(s){return y.apply(this,arguments)})},{key:"stopDialOut",value:function(s){var d=this;return H(this._callState,"stopDialOut()"),new Promise(function(c,h){d.sendMessageToCallMachine(L({action:"dialout-stop"},s),function(m){m.error?h(m.error):c(m)})})}},{key:"sipCallTransfer",value:(g=N(function*(s){var d=this;if(H(this._callState,"sipCallTransfer()"),!s)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return s.useSipRefer=!1,ia(s,"sipCallTransfer"),new Promise(function(c,h){d.sendMessageToCallMachine(L({action:oo},s),function(m){m.error?h(m.error):c(m)})})}),function(s){return g.apply(this,arguments)})},{key:"sipRefer",value:(_=N(function*(s){var d=this;if(H(this._callState,"sipRefer()"),!s)throw new Error("sessionId and toEndPoint are mandatory parameter");return s.useSipRefer=!0,ia(s,"sipRefer"),new Promise(function(c,h){d.sendMessageToCallMachine(L({action:oo},s),function(m){m.error?h(m.error):c(m)})})}),function(s){return _.apply(this,arguments)})},{key:"sendDTMF",value:(k=N(function*(s){var d=this;return H(this._callState,"sendDTMF()"),function(c){var h=c.sessionId,m=c.tones;if(!h||!m)throw new Error("sessionId and tones are mandatory parameter");if(typeof h!="string"||typeof m!="string")throw new Error("sessionId and tones should be of string type");if(m.length>20)throw new Error("tones string must be upto 20 characters");var b=/[^0-9A-D*#]/g,T=m.match(b);if(T&&T[0])throw new Error("".concat(T[0]," is not valid DTMF tone"))}(s),new Promise(function(c,h){d.sendMessageToCallMachine(L({action:"send-dtmf"},s),function(m){m.error?h(m.error):c(m)})})}),function(s){return k.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var s=this;return this._callState!==Fe?Promise.resolve(L({stats:{latest:{}}},this._network)):new Promise(function(d){s.sendMessageToCallMachine({action:"get-calc-stats"},function(c){d(L(L({},s._network),{},{stats:c.stats}))})})}},{key:"testWebsocketConnectivity",value:(E=N(function*(){var s=this;if(Tn(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(d){return Promise.reject(d)}return new Promise(function(d,c){s.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(h){h.error?c(h.error):d(h.results)})})}),function(){return E.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(s){return s?s instanceof MediaStreamTrack?!!Jl(s)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(v=N(function*(){var s=this;V(),Se(this._callObjectMode,"testCallQuality()"),fr(this._callMachineInitialized,"testCallQuality()",null,!0),Cn(this._callState,this._isPreparingToJoin,"testCallQuality()");var d=this._testCallAlreadyInProgress,c=function(m){d||(s._testCallInProgress=m)};if(c(!0),this.needsLoad())try{var h=this._callState;yield this.load(),this._callState=h}catch(m){return c(!1),Promise.reject(m)}return new Promise(function(m){s.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:s.properties.dailyJsVersion},function(b){var T=b.results,A=T.result,I=In(T,Yl);if(A==="failed"){var F,U=L({},I);(F=I.error)!==null&&F!==void 0&&F.details?(I.error.details=JSON.parse(I.error.details),U.error=L(L({},U.error),{},{details:L({},U.error.details)}),U.error.details.duringTest="testCallQuality"):(U.error=U.error?L({},U.error):{},U.error.details={duringTest:"testCallQuality"}),s._maybeSendToSentry(U)}c(!1),m(L({result:A},I))})})}),function(){return v.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(f=N(function*(s){var d;$()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),d=yield this.testPeerToPeerCallQuality(s)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),d=yield this.testCallQuality());var c={result:d.result,secondsElapsed:d.secondsElapsed};return d.data&&(c.data={maxRTT:d.data.maxRoundTripTime,packetLoss:d.data.avgRecvPacketLoss}),c}),function(s){return f.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(p=N(function*(s){var d=this;if(Tn(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(m){return Promise.reject(m)}var c=s.videoTrack,h=s.duration;if(!this._validateVideoTrackForNetworkTests(c))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=c,new Promise(function(m,b){d.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:h},function(T){T.error?b(T.error):m(T.results)})})}),function(s){return p.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){$()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(u=N(function*(s){var d=this;if(Tn(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}if(!this._validateVideoTrackForNetworkTests(s))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=s,new Promise(function(c,h){d.sendMessageToCallMachine({action:"test-network-connectivity"},function(m){m.error?h(m.error):c(m.results)})})}),function(s){return u.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var s=this;return new Promise(function(d){s._callState===Fe?s.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(c){d(c.cpuStats)}):d({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(s){var d;if(!(((d=Object.keys(s))===null||d===void 0?void 0:d.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(En))}},{key:"_validateVideoSendSettings",value:function(s,d){var c=s==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],h="Video send settings should be either an object or one of the supported presets: ".concat(c.join());if(typeof d=="string"){if(!c.includes(d))throw new Error(h)}else{if(J(d)!=="object")throw new Error(h);if(!d.maxQuality&&!d.encodings&&d.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(d.maxQuality&&["low","medium","high"].indexOf(d.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(d.encodings){var m=!1;switch(Object.keys(d.encodings).length){case 1:m=!d.encodings.low;break;case 2:m=!d.encodings.low||!d.encodings.medium;break;case 3:m=!d.encodings.low||!d.encodings.medium||!d.encodings.high;break;default:m=!0}if(m)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");d.encodings.low&&this._validateEncodingLayerHasValidProperties(d.encodings.low),d.encodings.medium&&this._validateEncodingLayerHasValidProperties(d.encodings.medium),d.encodings.high&&this._validateEncodingLayerHasValidProperties(d.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(s){var d=this;if(!s||Object.keys(s).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(s).forEach(function(c){var h=te(c,2),m=h[0],b=h[1];d._validateVideoSendSettings(m,b)})}},{key:"updateSendSettings",value:function(s){var d=this;return this.validateUpdateSendSettings(s),this.needsLoad()?(this._preloadCache.sendSettings=s,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(c,h){d.sendMessageToCallMachine({action:"update-send-settings",sendSettings:s},function(m){m.error?h(m.error):c(m.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return V(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(s){return V(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:s}),this}},{key:"activeSpeakerMode",value:function(){return V(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(s){return H(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=s,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:s}),this}},{key:"enumerateDevices",value:(l=N(function*(){var s=this;if(this._callObjectMode){var d=yield navigator.mediaDevices.enumerateDevices();return et()==="Firefox"&&cr().major>115&&cr().major<123&&(d=d.filter(function(c){return c.kind!=="audiooutput"})),{devices:d.map(function(c){var h=JSON.parse(JSON.stringify(c));if(!$()&&c.kind==="videoinput"&&c.getCapabilities){var m,b=c.getCapabilities();h.facing=(b==null||(m=b.facingMode)===null||m===void 0?void 0:m.length)>=1?b.facingMode[0]:void 0}return h})}}return new Promise(function(c){s.sendMessageToCallMachine({action:"enumerate-devices"},function(h){c({devices:h.devices})})})}),function(){return l.apply(this,arguments)})},{key:"sendAppMessage",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(H(this._callState,"sendAppMessage()"),JSON.stringify(s).length>this._maxAppMessageSize)throw new Error("Message data too large. Max size is "+this._maxAppMessageSize);return this.sendMessageToCallMachine({action:"app-msg",data:s,to:d}),this}},{key:"addFakeParticipant",value:function(s){return V(),H(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(L({action:"add-fake-participant"},s)),this}},{key:"setShowNamesMode",value:function(s){return de(this._callObjectMode,"setShowNamesMode()"),V(),s&&s!=="always"&&s!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:s}),this)}},{key:"setShowLocalVideo",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return de(this._callObjectMode,"setShowLocalVideo()"),V(),H(this._callState,"setShowLocalVideo()"),typeof s!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:s}),this._showLocalVideo=s,this)}},{key:"showLocalVideo",value:function(){return de(this._callObjectMode,"showLocalVideo()"),V(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var s=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return de(this._callObjectMode,"setShowParticipantsBar()"),V(),H(this._callState,"setShowParticipantsBar()"),typeof s!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:s}),this._showParticipantsBar=s,this)}},{key:"showParticipantsBar",value:function(){return de(this._callObjectMode,"showParticipantsBar()"),V(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return V(),de(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(s){return V(),de(this._callObjectMode,"setCustomIntegrations()"),H(this._callState,"setCustomIntegrations()"),ra(s)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:s}),this._customIntegrations=s,this):this}},{key:"startCustomIntegrations",value:function(s){var d=this;if(V(),de(this._callObjectMode,"startCustomIntegrations()"),H(this._callState,"startCustomIntegrations()"),Array.isArray(s)&&s.some(function(m){return typeof m!="string"})||!Array.isArray(s)&&typeof s!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var c=typeof s=="string"?[s]:s,h=c.filter(function(m){return!(m in d._customIntegrations)});return h.length?(console.error(`Can't find custom integration(s): "`.concat(h.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:c}),this)}},{key:"stopCustomIntegrations",value:function(s){var d=this;if(V(),de(this._callObjectMode,"stopCustomIntegrations()"),H(this._callState,"stopCustomIntegrations()"),Array.isArray(s)&&s.some(function(m){return typeof m!="string"})||!Array.isArray(s)&&typeof s!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var c=typeof s=="string"?[s]:s,h=c.filter(function(m){return!(m in d._customIntegrations)});return h.length?(console.error(`Can't find custom integration(s): "`.concat(h.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:c}),this)}},{key:"customTrayButtons",value:function(){return de(this._callObjectMode,"customTrayButtons()"),V(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(s){return de(this._callObjectMode,"updateCustomTrayButtons()"),V(),H(this._callState,"updateCustomTrayButtons()"),ta(s)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:s}),this._customTrayButtons=s,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(dr))),this)}},{key:"theme",value:function(){return de(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(s){var d=this;return de(this._callObjectMode,"setTheme()"),new Promise(function(c,h){try{d.validateProperties({theme:s}),d.properties.theme=L({},s),d.sendMessageToCallMachine({action:"set-theme",theme:d.properties.theme});try{d.emitDailyJSEvent({action:ls,theme:d.properties.theme})}catch(m){console.log("could not emit 'theme-updated'",m)}c(d.properties.theme)}catch(m){h(m)}})}},{key:"requestFullscreen",value:(a=N(function*(){if(V(),this._iframe&&!document.fullscreenElement&&co())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(s){console.log("could not make video call fullscreen",s)}}),function(){return a.apply(this,arguments)})},{key:"exitFullscreen",value:function(){V(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(o=N(function*(){var s=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(d){s.sendMessageToCallMachine({action:"get-sidebar-view"},function(c){d(c.view)})})}),function(){return o.apply(this,arguments)})},{key:"setSidebarView",value:function(s){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:s}),this)}},{key:"room",value:(i=N(function*(){var s=this,d=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,c=d===void 0||d;return this._accessState.access===sr||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(h){s.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:c},function(m){delete m.action,delete m.callbackStamp,h(m)})})}),function(){return i.apply(this,arguments)})},{key:"geo",value:(n=N(function*(){try{var s=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield s.json()).geo}}catch(d){return console.error("geo lookup failed",d),{current:""}}}),function(){return n.apply(this,arguments)})},{key:"setNetworkTopology",value:(t=N(function*(s){var d=this;return V(),H(this._callState,"setNetworkTopology()"),new Promise(function(c,h){d.sendMessageToCallMachine({action:"set-network-topology",opts:s},function(m){m.error?h({error:m.error}):c({workerId:m.workerId})})})}),function(s){return t.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=N(function*(){var s=this;return new Promise(function(d,c){s.needsLoad()&&d({topology:"none"}),s.sendMessageToCallMachine({action:"get-network-topology"},function(h){h.error?c({error:h.error}):d({topology:h.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(s){if(V(),typeof s!="number"&&s!==!0&&s!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(s));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:s})}},{key:"on",value:function(s,d){return Rt.prototype.on.call(this,s,d)}},{key:"once",value:function(s,d){return Rt.prototype.once.call(this,s,d)}},{key:"off",value:function(s,d){return Rt.prototype.off.call(this,s,d)}},{key:"validateProperties",value:function(s){var d,c;if(s!=null&&(d=s.dailyConfig)!==null&&d!==void 0&&d.userMediaAudioConstraints){var h,m;$()||console.warn("userMediaAudioConstraints is deprecated. You can override constraints with inputSettings.audio.settings, found in DailyCallOptions.");var b=s.inputSettings||{};b.audio=((h=s.inputSettings)===null||h===void 0?void 0:h.audio)||{},b.audio.settings=((m=s.inputSettings)===null||m===void 0||(m=m.audio)===null||m===void 0?void 0:m.settings)||{},b.audio.settings=L(L({},b.audio.settings),s.dailyConfig.userMediaAudioConstraints),s.inputSettings=b,delete s.dailyConfig.userMediaAudioConstraints}if(s!=null&&(c=s.dailyConfig)!==null&&c!==void 0&&c.userMediaVideoConstraints){var T,A;$()||console.warn("userMediaVideoConstraints is deprecated. You can override constraints with inputSettings.video.settings, found in DailyCallOptions.");var I=s.inputSettings||{};I.video=((T=s.inputSettings)===null||T===void 0?void 0:T.video)||{},I.video.settings=((A=s.inputSettings)===null||A===void 0||(A=A.video)===null||A===void 0?void 0:A.settings)||{},I.video.settings=L(L({},I.video.settings),s.dailyConfig.userMediaVideoConstraints),s.inputSettings=I,delete s.dailyConfig.userMediaVideoConstraints}for(var F in s){if(!rt[F])throw new Error("unrecognized property '".concat(F,"'"));if(rt[F].validate&&!rt[F].validate(s[F],this))throw new Error("property '".concat(F,"': ").concat(rt[F].help))}}},{key:"assembleMeetingUrl",value:function(){var s,d,c=L(L({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(s=this.properties.dailyConfig)!==null&&s!==void 0&&s.proxyUrl?encodeURIComponent((d=this.properties.dailyConfig)===null||d===void 0?void 0:d.proxyUrl):void 0}),h=c.url.match(/\?/)?"&":"?";return c.url+h+Object.keys(rt).filter(function(m){return rt[m].queryString&&c[m]!==void 0}).map(function(m){return"".concat(rt[m].queryString,"=").concat(c[m])}).join("&")}},{key:"needsLoad",value:function(){return[tn,es,qe,Le].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(s,d){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(s,d,this.callClientId,this._iframe)}},{key:"forwardPackagedMessageToCallMachine",value:function(s){this._messageChannel.forwardPackagedMessageToCallMachine(s,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(s){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(s,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(s){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(s)}},{key:"handleMessageFromCallMachine",value:function(s){switch(s.action){case as:this.sendMessageToCallMachine(L({action:cs},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var d={action:or,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:Ft(this.properties.dailyConfig)}};this.sendMessageToCallMachine(d),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case nn:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(s);break;case ms:var c,h=L({},s);delete h.internal,this._maxAppMessageSize=((c=s.internal)===null||c===void 0?void 0:c._maxAppMessageSize)||un,this._joinedCallback&&(this._joinedCallback(s.participants),this._joinedCallback=null),this.emitDailyJSEvent(h);break;case vs:case ys:if(this._callState===qe)return;if(s.participant&&s.participant.session_id){var m=s.participant.local?"local":s.participant.session_id;if(this._callObjectMode){var b=this._callMachine().store;Ao(s.participant,b),Oo(s.participant,b),Mo(s.participant,this._participants[m],b)}try{this.maybeParticipantTracksStopped(this._participants[m],s.participant),this.maybeParticipantTracksStarted(this._participants[m],s.participant),this.maybeEventRecordingStopped(this._participants[m],s.participant),this.maybeEventRecordingStarted(this._participants[m],s.participant)}catch(ku){console.error("track events error",ku)}this.compareEqualForParticipantUpdateEvent(s.participant,this._participants[m])||(this._participants[m]=L({},s.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(s))}break;case bs:if(s.participant&&s.participant.session_id){var T=this._participants[s.participant.session_id];T&&this.maybeParticipantTracksStopped(T,null),delete this._participants[s.participant.session_id],this.emitDailyJSEvent(s)}break;case _s:ie(this._participantCounts,s.participantCounts)||(this._participantCounts=s.participantCounts,this.emitDailyJSEvent(s));break;case Ss:var A={access:s.access};s.awaitingAccess&&(A.awaitingAccess=s.awaitingAccess),ie(this._accessState,A)||(this._accessState=A,this.emitDailyJSEvent(s));break;case ws:if(s.meetingSession){this._meetingSessionSummary=s.meetingSession,this.emitDailyJSEvent(s);var I=L(L({},s),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(I)}break;case ln:var F;this._iframe&&!s.preserveIframe&&(this._iframe.src=""),this._updateCallState(Le),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(s.errorMsg),this._loadedCallback=null),s.preserveIframe;var U=In(s,Wl);U!=null&&(F=U.error)!==null&&F!==void 0&&F.details&&(U.error.details=JSON.parse(U.error.details)),this._maybeSendToSentry(s),this._joinedCallback&&(this._joinedCallback(null,U),this._joinedCallback=null),this.emitDailyJSEvent(U);break;case gs:this._callState!==Le&&this._updateCallState(qe),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(s);break;case"selected-devices-updated":s.devices&&this.emitDailyJSEvent(s);break;case Ys:var Te=s.state,nt=s.threshold,Mt=s.quality,Z=Te.state,ge=Te.reasons;Z===this._network.networkState&&ie(ge,this._network.networkStateReasons)&&nt===this._network.threshold&&Mt===this._network.quality||(this._network.networkState=Z,this._network.networkStateReasons=ge,this._network.quality=Mt,this._network.threshold=nt,s.networkState=Z,ge.length&&(s.networkStateReasons=ge),delete s.state,this.emitDailyJSEvent(s));break;case zs:s&&s.cpuLoadState&&this.emitDailyJSEvent(s);break;case Hs:s&&s.faceCounts!==void 0&&this.emitDailyJSEvent(s);break;case Bs:var it=s.activeSpeaker;this._activeSpeaker.peerId!==it.peerId&&(this._activeSpeaker.peerId=it.peerId,this.emitDailyJSEvent({action:s.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var Pt=s.show;this._showLocalVideo=Pt,this.emitDailyJSEvent({action:s.action,show:Pt});break;case Gs:var yr=s.enabled;this._activeSpeakerMode!==yr&&(this._activeSpeakerMode=yr,this.emitDailyJSEvent({action:s.action,enabled:this._activeSpeakerMode}));break;case ks:case Cs:case Ts:this._waitingParticipants=s.allWaitingParticipants,this.emitDailyJSEvent({action:s.action,participant:s.participant});break;case to:ie(this._receiveSettings,s.receiveSettings)||(this._receiveSettings=s.receiveSettings,this.emitDailyJSEvent({action:s.action,receiveSettings:s.receiveSettings}));break;case an:this._maybeUpdateInputSettings(s.inputSettings);break;case"send-settings-updated":ie(this._sendSettings,s.sendSettings)||(this._sendSettings=s.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:s.action,sendSettings:s.sendSettings}));break;case"local-audio-level":this._localAudioLevel=s.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(s);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=s.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(s);break;case Fs:var It=s.session_id;this._rmpPlayerState[It]=s.playerState,this.emitDailyJSEvent(s);break;case Vs:delete this._rmpPlayerState[s.session_id],this.emitDailyJSEvent(s);break;case qs:var Lt=s.session_id,Ma=this._rmpPlayerState[Lt];Ma&&this.compareEqualForRMPUpdateEvent(Ma,s.remoteMediaPlayerState)||(this._rmpPlayerState[Lt]=s.remoteMediaPlayerState,this.emitDailyJSEvent(s));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(s);break;case Es:var Eu=this._meetingSessionState.topology!==(s.meetingSessionState&&s.meetingSessionState.topology);this._meetingSessionState=On(s.meetingSessionState,this._callObjectMode),(this._callObjectMode||Eu)&&this.emitDailyJSEvent(s);break;case $s:this._isScreenSharing=!0,this.emitDailyJSEvent(s);break;case Us:case Js:this._isScreenSharing=!1,this.emitDailyJSEvent(s);break;case sn:case on:case Ls:case js:case Ds:case Ms:case Ps:case Is:case ps:case hs:case Rs:case xs:case"test-completed":case Ws:case Ns:case Qs:case Ks:case Xs:case Zs:case cn:case eo:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(s);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(s,d){var c="record";s&&(d.local||d[c]!==!1||s[c]===d[c]||this.emitDailyJSEvent({action:on}))}},{key:"maybeEventRecordingStarted",value:function(s,d){var c="record";s&&(d.local||d[c]!==!0||s[c]===d[c]||this.emitDailyJSEvent({action:sn}))}},{key:"_trackStatePlayable",value:function(s){return!(!s||s.state!==rs)}},{key:"_trackChanged",value:function(s,d){return(s==null?void 0:s.id)!==(d==null?void 0:d.id)}},{key:"maybeEventTrackStopped",value:function(s,d,c){var h,m,b=(h=d==null?void 0:d.tracks[s])!==null&&h!==void 0?h:null,T=(m=c==null?void 0:c.tracks[s])!==null&&m!==void 0?m:null,A=b==null?void 0:b.track;if(A){var I=this._trackStatePlayable(b),F=this._trackStatePlayable(T),U=this._trackChanged(A,T==null?void 0:T.track);I&&(F&&!U||this.emitDailyJSEvent({action:Os,track:A,participant:c??d,type:s}))}}},{key:"maybeEventTrackStarted",value:function(s,d,c){var h,m,b=(h=d==null?void 0:d.tracks[s])!==null&&h!==void 0?h:null,T=(m=c==null?void 0:c.tracks[s])!==null&&m!==void 0?m:null,A=T==null?void 0:T.track;if(A){var I=this._trackStatePlayable(b),F=this._trackStatePlayable(T),U=this._trackChanged(b==null?void 0:b.track,A);F&&(I&&!U||this.emitDailyJSEvent({action:As,track:A,participant:c,type:s}))}}},{key:"maybeParticipantTracksStopped",value:function(s,d){if(s)for(var c in s.tracks)this.maybeEventTrackStopped(c,s,d)}},{key:"maybeParticipantTracksStarted",value:function(s,d){if(d)for(var c in d.tracks)this.maybeEventTrackStarted(c,s,d)}},{key:"compareEqualForRMPUpdateEvent",value:function(s,d){var c,h;return s.state===d.state&&((c=s.settings)===null||c===void 0?void 0:c.volume)===((h=d.settings)===null||h===void 0?void 0:h.volume)}},{key:"emitDailyJSEvent",value:function(s){try{s.callClientId=this.callClientId,this.emit(s.action,s)}catch(d){console.log("could not emit",s,d)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(s,d){return!!ie(s,d)&&(!s.videoTrack||!d.videoTrack||s.videoTrack.id===d.videoTrack.id&&s.videoTrack.muted===d.videoTrack.muted&&s.videoTrack.enabled===d.videoTrack.enabled)&&(!s.audioTrack||!d.audioTrack||s.audioTrack.id===d.audioTrack.id&&s.audioTrack.muted===d.audioTrack.muted&&s.audioTrack.enabled===d.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return $()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(s){this._updateCallState(this._callState,s)}},{key:"_updateCallState",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(s!==this._callState||d!==this._isPreparingToJoin){var c=this._callState,h=this._isPreparingToJoin;this._callState=s,this._isPreparingToJoin=d;var m=this._callState===Fe;this.updateShowAndroidOngoingMeetingNotification(m);var b=hr(c,h),T=hr(this._callState,this._isPreparingToJoin);b!==T&&(this.updateKeepDeviceAwake(T),this.updateDeviceAudioMode(T),this.updateNoOpRecordingEnsuringBackgroundContinuity(T))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=Bo,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:sr},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=On(Jo,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._isLocalAudioLevelObserverRunning=!1,this._remoteParticipantsAudioLevel={},this._isRemoteParticipantsAudioLevelObserverRunning=!1,this._maxAppMessageSize=un,this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(s){$()&&this.nativeUtils().setKeepDeviceAwake(s,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(s){if($()&&!this.disableReactNativeAutoDeviceManagement("audio")){var d=s?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(d)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(s){if($()&&this.nativeUtils().setShowOngoingMeetingNotification){var d,c,h,m;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var b=this.properties.reactNativeConfig.androidInCallNotification;d=b.title,c=b.subtitle,h=b.iconName,m=b.disableForCustomOverride}m&&(s=!1),this.nativeUtils().setShowOngoingMeetingNotification(s,d,c,h,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(s){$()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(s)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var s;if($()){var d=(s=this._callMachine())===null||s===void 0||(s=s.store)===null||s===void 0?void 0:s.getState();for(var c in d==null?void 0:d.streams){var h=d.streams[c];h&&h.pendingTrack&&h.pendingTrack.kind==="audio"&&(h.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(s){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[s]}},{key:"absoluteUrl",value:function(s){if(s!==void 0){var d=document.createElement("a");return d.href=s,d.href}}},{key:"sayHello",value:function(){var s="hello, world.";return console.log(s),s}},{key:"_logUseAfterDestroy",value:function(){var s=Object.values(tt)[0];if(this.needsLoad())if(s&&!s.needsLoad()){var d={action:or,level:"error",code:this.strictMode?9995:9997};s.sendMessageToCallMachine(d)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var c={action:or,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(c,null,this.callClientId,this._iframe)}}},{key:"_logDuplicateInstanceAttempt",value:function(){for(var s=0,d=Object.values(tt);s<d.length;s++){var c=d[s];c._callMachineInitialized?(c.sendMessageToCallMachine({action:or,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),c._delayDuplicateInstanceLog=!1):c._delayDuplicateInstanceLog=!0}}},{key:"_maybeSendToSentry",value:function(s){var d,c,h,m;if(!((d=s.error)!==null&&d!==void 0&&d.type&&(![os,ss,rn].includes(s.error.type)||s.error.type===rn&&s.error.msg.includes("deleted")))){var b=(c=this.properties)!==null&&c!==void 0&&c.url?new URL(this.properties.url):void 0,T="production";b&&b.host.includes(".staging.daily")&&(T="staging");var A,I,F,U,Te,nt=function(It){const Lt=[gc(),fc(),Uc(),Vc(),Wc(),Hc(),_c(),zc()];return It.autoSessionTracking!==!1&&Lt.push(Yc()),Lt}({}).filter(function(It){return!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(It.name)}),Mt=new Oc({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:jc,stackParser:qc,integrations:nt,environment:T}),Z=new xe;if(Z.setClient(Mt),Mt.init(),this.session_id&&Z.setExtra("sessionId",this.session_id),this.properties){var ge=L({},this.properties);ge.userName=ge.userName?"[Filtered]":void 0,ge.userData=ge.userData?"[Filtered]":void 0,ge.token=ge.token?"[Filtered]":void 0,Z.setExtra("properties",ge)}if(b){var it=b.searchParams.get("domain");if(!it){var Pt=b.host.match(/(.*?)\./);it=Pt&&Pt[1]||""}it&&Z.setTag("domain",it)}s.error&&(Z.setTag("fatalErrorType",s.error.type),Z.setExtra("errorDetails",s.error.details),!((A=s.error.details)===null||A===void 0)&&A.uri&&Z.setTag("serverAddress",s.error.details.uri),!((I=s.error.details)===null||I===void 0)&&I.workerGroup&&Z.setTag("workerGroup",s.error.details.workerGroup),!((F=s.error.details)===null||F===void 0)&&F.geoGroup&&Z.setTag("geoGroup",s.error.details.geoGroup),!((U=s.error.details)===null||U===void 0)&&U.on&&Z.setTag("connectionAttempt",s.error.details.on),(Te=s.error.details)!==null&&Te!==void 0&&Te.bundleUrl&&(Z.setTag("bundleUrl",s.error.details.bundleUrl),Z.setTag("bundleError",s.error.details.sourceError.type))),Z.setTags({callMode:this._callObjectMode?$()?"reactNative":(h=this.properties)!==null&&h!==void 0&&(h=h.dailyConfig)!==null&&h!==void 0&&(h=h.callMode)!==null&&h!==void 0&&h.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:r.version()});var yr=((m=s.error)===null||m===void 0?void 0:m.msg)||s.errorMsg;Z.captureException(new Error(yr))}}},{key:"_callMachine",value:function(){var s;return(s=window._daily)===null||s===void 0||(s=s.instances)===null||s===void 0||(s=s[this.callClientId])===null||s===void 0?void 0:s.callMachine}},{key:"_maybeUpdateInputSettings",value:function(s){if(!ie(this._inputSettings,s)){var d=this._getInputSettings();this._inputSettings=s;var c=this._getInputSettings();ie(d,c)||this.emitDailyJSEvent({action:an,inputSettings:c})}}}],[{key:"supportedBrowser",value:function(){if($())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var s=Ra.getParser(me());return{supported:!!po(),mobile:s.getPlatformType()==="mobile",name:s.getBrowserName(),version:s.getBrowserVersion(),supportsFullscreen:!!co(),supportsScreenShare:!!wl(),supportsSfu:!!po(),supportsVideoProcessing:lo(),supportsAudioProcessing:uo()}}},{key:"version",value:function(){return"0.80.0"}},{key:"createCallObject",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return s.layout="none",new r(null,s)}},{key:"wrap",value:function(s){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(V(),!s||!s.contentWindow||typeof s.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return d.layout||(d.customLayout?d.layout="custom-v1":d.layout="browser"),new r(s,d)}},{key:"createFrame",value:function(s,d){var c,h;V(),s&&d?(c=s,h=d):s&&s.append?(c=s,h={}):(c=document.body,h=s||{});var m=h.iframeStyle;m||(m=c===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var b=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?b.allow="microphone, camera":b.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",b.style.visibility="hidden",c.appendChild(b),b.style.visibility=null,Object.keys(m).forEach(function(T){return b.style[T]=m[T]}),h.layout||(h.customLayout?h.layout="custom-v1":h.layout="browser");try{return new r(b,h)}catch(T){throw c.removeChild(b),T}}},{key:"createTransparentFrame",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};V();var d=document.createElement("iframe");return d.allow="microphone; camera; autoplay",d.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(d),s.layout||(s.layout="custom-v1"),r.wrap(d,s)}},{key:"getCallInstance",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return s?tt[s]:Object.values(tt)[0]}}]);var e,t,n,i,o,a,l,u,p,f,v,E,k,_,g,y,S,C,M,j,D,q,W,ne,Ue,O,G,ae,Ce,_a,Sa,wa,Ea,ka,Ca,Ta,Aa,Oa}();function ft(r,e){var t={};for(var n in r)if(r[n]instanceof MediaStreamTrack)console.warn("MediaStreamTrack found in props or cache.",n),t[n]=je;else if(n==="dailyConfig"){if(r[n].modifyLocalSdpHook){var i=window._daily.instances[e].customCallbacks||{};i.modifyLocalSdpHook=r[n].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=i,delete r[n].modifyLocalSdpHook}if(r[n].modifyRemoteSdpHook){var o=window._daily.instances[e].customCallbacks||{};o.modifyRemoteSdpHook=r[n].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=o,delete r[n].modifyRemoteSdpHook}t[n]=r[n]}else t[n]=r[n];return t}function H(r){var e=arguments.length>2?arguments[2]:void 0;if(r!==Fe){var t="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(t+=" ".concat(e)),console.error(t),new Error(t)}}function hr(r,e){return[ir,Fe].includes(r)||e}function Cn(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",n=arguments.length>3?arguments[3]:void 0;if(hr(r,e)){var i="".concat(t," not supported after joining a meeting.");throw n&&(i+=" ".concat(n)),console.error(i),new Error(i)}}function fr(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",t=arguments.length>2?arguments[2]:void 0;if(!r){var n="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw t&&(n+=" ".concat(t)),console.error(n),new Error(n)}}function Tn(r){if(r){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function Se(r){if(!r){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function de(r){if(r){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function V(){if($())throw new Error("This daily-js method is not currently supported in React Native")}function Ot(){if(!$())throw new Error("This daily-js method is only supported in React Native")}function zo(r){if(r===void 0)return!0;var e;if(typeof r=="string")e=r;else try{e=JSON.stringify(r),ie(JSON.parse(e),r)||console.warn("The userData provided will be modified when serialized.")}catch(t){throw Error("userData must be serializable to JSON: ".concat(t))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Ho(r,e){for(var t=e.allowAllParticipantsKey,n=function(v){var E=["local"];return t||E.push("*"),v&&!E.includes(v)},i=function(v){return!!(v.layer===void 0||Number.isInteger(v.layer)&&v.layer>=0||v.layer==="inherit")},o=function(v){return!!v&&!(v.video&&!i(v.video))&&!(v.screenVideo&&!i(v.screenVideo))},a=0,l=Object.entries(r);a<l.length;a++){var u=te(l[a],2),p=u[0],f=u[1];if(!n(p)||!o(f))return!1}return!0}function Qo(r){if(J(r)!=="object")return!1;for(var e=0,t=Object.entries(r);e<t.length;e++){var n=te(t[e],2),i=n[0],o=n[1];switch(i){case"video":if(J(o)!=="object")return!1;for(var a=0,l=Object.entries(o);a<l.length;a++){var u=te(l[a],2),p=u[0],f=u[1];switch(p){case"processor":if(!Kl(f))return!1;break;case"settings":if(!Xo(f))return!1;break;default:return!1}}break;case"audio":if(J(o)!=="object")return!1;for(var v=0,E=Object.entries(o);v<E.length;v++){var k=te(E[v],2),_=k[0],g=k[1];switch(_){case"processor":if(!Ql(g))return!1;break;case"settings":if(!Xo(g))return!1;break;default:return!1}}break;default:return!1}}return!0}function Ko(r,e,t){var n,i=[];r.video&&r.video.processor&&(lo((n=e==null?void 0:e.useLegacyVideoProcessor)!==null&&n!==void 0&&n)||(r.video.settings?delete r.video.processor:delete r.video,i.push("video"))),r.audio&&r.audio.processor&&(uo()||(r.audio.settings?delete r.audio.processor:delete r.audio,i.push("audio"))),i.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(i.join(", "))),r.audio&&r.audio.settings&&(r.audio.settings.customTrack?(t.audioTrack=r.audio.settings.customTrack,r.audio.settings={customTrack:je}):delete t.audioTrack),r.video&&r.video.settings&&(r.video.settings.customTrack?(t.videoTrack=r.video.settings.customTrack,r.video.settings={customTrack:je}):delete t.videoTrack)}function Ql(r){if($())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type"];return!!r&&J(r)==="object"&&(Object.keys(r).filter(function(t){return!e.includes(t)}).forEach(function(t){console.warn("invalid key inputSettings -> audio -> processor : ".concat(t)),delete r[t]}),!!function(t){return typeof t!="string"?!1:Object.values(so).includes(t)?!0:(console.error("inputSettings audio processor type invalid"),!1)}(r.type))}function Kl(r){if($())return console.warn("Video processing is not yet supported in React Native"),!1;var e=["type","config"];return!r||J(r)!=="object"||!function(t){return typeof t!="string"?!1:Object.values(ar).includes(t)?!0:(console.error("inputSettings video processor type invalid"),!1)}(r.type)||r.config&&(J(r.config)!=="object"||!function(t,n){var i=Object.keys(n);if(i.length===0)return!0;var o="invalid object in inputSettings -> video -> processor -> config";switch(t){case ar.BGBLUR:return i.length>1||i[0]!=="strength"?(console.error(o),!1):!(typeof n.strength!="number"||n.strength<=0||n.strength>1||isNaN(n.strength))||(console.error("".concat(o,"; expected: {0 < strength <= 1}, got: ").concat(n.strength)),!1);case ar.BGIMAGE:return!(n.source!==void 0&&!function(a){if(a.source==="default")return a.type="default",!0;if(a.source instanceof ArrayBuffer)return!0;if(qt(a.source))return a.type="url",!!function(p){var f=new URL(p),v=f.pathname;if(f.protocol==="data:")try{var E=v.substring(v.indexOf(":")+1,v.indexOf(";")).split("/")[1];return hn.includes(E)}catch(_){return console.error("failed to deduce blob content type",_),!1}var k=v.split(".").at(-1).toLowerCase().trim();return hn.includes(k)}(a.source)||(console.error("invalid image type; supported types: [".concat(hn.join(", "),"]")),!1);return l=a.source,u=Number(l),isNaN(u)||!Number.isInteger(u)||u<=0||u>10?(console.error("invalid image selection; must be an int, > 0, <= ".concat(10)),!1):(a.type="daily-preselect",!0);var l,u}(n));default:return!0}}(r.type,r.config))?!1:(Object.keys(r).filter(function(t){return!e.includes(t)}).forEach(function(t){console.warn("invalid key inputSettings -> video -> processor : ".concat(t)),delete r[t]}),!0)}function Xo(r){return J(r)==="object"&&(!r.customTrack||r.customTrack instanceof MediaStreamTrack)}function An(){var r=Object.values(ar).join(" | "),e=Object.values(so).join(" | ");return"inputSettings must be of the form: { video?: { processor?: { type: [ ".concat(r," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function Zo(r){var e=r.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(is).concat(e?' | "'.concat("*",'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function ea(){return"customIntegrations should be an object of type ".concat(JSON.stringify(kn),".")}function ta(r){if(r&&J(r)!=="object"||Array.isArray(r))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(dr),".")),!1;if(r)for(var e=0,t=Object.entries(r);e<t.length;e++)for(var n=te(t[e],1)[0],i=0,o=Object.entries(r[n]);i<o.length;i++){var a=te(o[i],2),l=a[0],u=a[1],p=dr.id[l];if(!p)return console.error("customTrayButton does not support key ".concat(l)),!1;switch(l){case"iconPath":case"iconPathDarkMode":if(!qt(u))return console.error("customTrayButton ".concat(l," should be a url.")),!1;break;case"visualState":if(!["default","sidebar-open","active"].includes(u))return console.error("customTrayButton ".concat(l," should be ").concat(p,". Got: ").concat(u)),!1;break;default:if(J(u)!==p)return console.error("customTrayButton ".concat(l," should be a ").concat(p,".")),!1}}return!0}function ra(r){if(!r||r&&J(r)!=="object"||Array.isArray(r))return console.error(ea()),!1;for(var e=function(v){return"".concat(v," should be ").concat(kn.id[v])},t=function(v,E){return console.error("customIntegration ".concat(v,": ").concat(E))},n=0,i=Object.entries(r);n<i.length;n++){var o=te(i[n],1)[0];if(!("label"in r[o]))return t(o,"label is required"),!1;if(!("location"in r[o]))return t(o,"location is required"),!1;if(!("src"in r[o])&&!("srcdoc"in r[o]))return t(o,"src or srcdoc is required"),!1;for(var a=0,l=Object.entries(r[o]);a<l.length;a++){var u=te(l[a],2),p=u[0],f=u[1];switch(p){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof f!="string")return t(o,e(p)),!1;break;case"iconURL":if(!qt(f))return t(o,"".concat(p," should be a url")),!1;break;case"src":if("srcdoc"in r[o])return t(o,"cannot have both src and srcdoc"),!1;if(!qt(f))return t(o,'src "'.concat(f,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in r[o])return t(o,"cannot have both src and srcdoc"),!1;if(typeof f!="string")return t(o,e(p)),!1;break;case"location":if(!["main","sidebar"].includes(f))return t(o,e(p)),!1;break;case"controlledBy":if(f!=="*"&&f!=="owners"&&(!Array.isArray(f)||f.some(function(v){return typeof v!="string"})))return t(o,e(p)),!1;break;case"shared":if((!Array.isArray(f)||f.some(function(v){return typeof v!="string"}))&&f!=="owners"&&typeof f!="boolean")return t(o,e(p)),!1;break;default:if(!kn.id[p])return console.error("customIntegration does not support key ".concat(p)),!1}}}return!0}function na(r,e){if(e===void 0)return!1;switch(J(e)){case"string":return J(r)===e;case"object":if(J(r)!=="object")return!1;for(var t in r)if(!na(r[t],e[t]))return!1;return!0;default:return!1}}function ia(r,e){var t=r.sessionId,n=r.toEndPoint,i=r.callerId,o=r.useSipRefer;if(!t||!n)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof t!="string"||typeof n!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(o&&!n.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!n.startsWith("sip:")&&!n.startsWith("+"))throw new Error("toEndPoint: ".concat(n,' must starts with either "sip:" or "+"'));if(i&&typeof i!="string")throw new Error("callerId must be of type string");if(i&&!n.startsWith("+"))throw new Error("callerId is only valid when transferring to a PSTN number")}function sa(r){if(J(r)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(r.state&&!Object.values(pn).includes(r.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(pn));if(r.volume){if(typeof r.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(r.volume<0||r.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function oa(r,e,t){return!(typeof r!="number"||r<e||r>t)}function On(r,e){return r&&!e&&delete r.data,r}const Xl=Ae(Object.freeze(Object.defineProperty({__proto__:null,DAILY_ACCESS_LEVEL_FULL:ns,DAILY_ACCESS_LEVEL_LOBBY:tl,DAILY_ACCESS_LEVEL_NONE:rl,DAILY_ACCESS_UNKNOWN:sr,DAILY_CAMERA_ERROR_CAM_AND_MIC_IN_USE:hl,DAILY_CAMERA_ERROR_CAM_IN_USE:dl,DAILY_CAMERA_ERROR_CONSTRAINTS:vl,DAILY_CAMERA_ERROR_MIC_IN_USE:pl,DAILY_CAMERA_ERROR_NOT_FOUND:gl,DAILY_CAMERA_ERROR_PERMISSIONS:fl,DAILY_CAMERA_ERROR_UNDEF_MEDIADEVICES:ml,DAILY_CAMERA_ERROR_UNKNOWN:yl,DAILY_EVENT_ACCESS_STATE_UPDATED:Ss,DAILY_EVENT_ACTIVE_SPEAKER_CHANGE:Bs,DAILY_EVENT_ACTIVE_SPEAKER_MODE_CHANGE:Gs,DAILY_EVENT_APP_MSG:Rs,DAILY_EVENT_CAMERA_ERROR:hs,DAILY_EVENT_CPU_LOAD_CHANGE:zs,DAILY_EVENT_ERROR:ln,DAILY_EVENT_EXIT_FULLSCREEN:kt,DAILY_EVENT_FACE_COUNTS_UPDATED:Hs,DAILY_EVENT_FULLSCREEN:Et,DAILY_EVENT_IFRAME_LAUNCH_CONFIG:cs,DAILY_EVENT_IFRAME_READY_FOR_LAUNCH_CONFIG:as,DAILY_EVENT_INPUT_SETTINGS_UPDATED:an,DAILY_EVENT_JOINED_MEETING:ms,DAILY_EVENT_JOINING_MEETING:fs,DAILY_EVENT_LANG_UPDATED:eo,DAILY_EVENT_LEFT_MEETING:gs,DAILY_EVENT_LIVE_STREAMING_ERROR:Zs,DAILY_EVENT_LIVE_STREAMING_STARTED:Qs,DAILY_EVENT_LIVE_STREAMING_STOPPED:Xs,DAILY_EVENT_LIVE_STREAMING_UPDATED:Ks,DAILY_EVENT_LOADED:nn,DAILY_EVENT_LOADING:us,DAILY_EVENT_LOAD_ATTEMPT_FAILED:ds,DAILY_EVENT_LOCAL_SCREEN_SHARE_CANCELED:Js,DAILY_EVENT_LOCAL_SCREEN_SHARE_STARTED:$s,DAILY_EVENT_LOCAL_SCREEN_SHARE_STOPPED:Us,DAILY_EVENT_MEETING_SESSION_DATA_ERROR:bl,DAILY_EVENT_MEETING_SESSION_STATE_UPDATED:Es,DAILY_EVENT_MEETING_SESSION_SUMMARY_UPDATED:ws,DAILY_EVENT_NETWORK_CONNECTION:Ws,DAILY_EVENT_NETWORK_QUALITY_CHANGE:Ys,DAILY_EVENT_NONFATAL_ERROR:cn,DAILY_EVENT_PARTICIPANT_COUNTS_UPDATED:_s,DAILY_EVENT_PARTICIPANT_JOINED:vs,DAILY_EVENT_PARTICIPANT_LEFT:bs,DAILY_EVENT_PARTICIPANT_UPDATED:ys,DAILY_EVENT_RECEIVE_SETTINGS_UPDATED:to,DAILY_EVENT_RECORDING_DATA:Ns,DAILY_EVENT_RECORDING_ERROR:js,DAILY_EVENT_RECORDING_STARTED:sn,DAILY_EVENT_RECORDING_STATS:Ls,DAILY_EVENT_RECORDING_STOPPED:on,DAILY_EVENT_RECORDING_UPLOAD_COMPLETED:Ds,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STARTED:Fs,DAILY_EVENT_REMOTE_MEDIA_PLAYER_STOPPED:Vs,DAILY_EVENT_REMOTE_MEDIA_PLAYER_UPDATED:qs,DAILY_EVENT_STARTED_CAMERA:ps,DAILY_EVENT_THEME_UPDATED:ls,DAILY_EVENT_TRACK_STARTED:As,DAILY_EVENT_TRACK_STOPPED:Os,DAILY_EVENT_TRANSCRIPTION_ERROR:Is,DAILY_EVENT_TRANSCRIPTION_MSG:xs,DAILY_EVENT_TRANSCRIPTION_STARTED:Ms,DAILY_EVENT_TRANSCRIPTION_STOPPED:Ps,DAILY_EVENT_WAITING_PARTICIPANT_ADDED:ks,DAILY_EVENT_WAITING_PARTICIPANT_REMOVED:Ts,DAILY_EVENT_WAITING_PARTICIPANT_UPDATED:Cs,DAILY_FATAL_ERROR_CONNECTION:os,DAILY_FATAL_ERROR_EJECTED:il,DAILY_FATAL_ERROR_EOL:ss,DAILY_FATAL_ERROR_EXP_ROOM:al,DAILY_FATAL_ERROR_EXP_TOKEN:cl,DAILY_FATAL_ERROR_MEETING_FULL:ll,DAILY_FATAL_ERROR_NBF_ROOM:sl,DAILY_FATAL_ERROR_NBF_TOKEN:ol,DAILY_FATAL_ERROR_NOT_ALLOWED:ul,DAILY_FATAL_ERROR_NO_ROOM:rn,DAILY_RECEIVE_SETTINGS_ALL_PARTICIPANTS_KEY:nl,DAILY_RECEIVE_SETTINGS_BASE_KEY:is,DAILY_STATE_ERROR:Le,DAILY_STATE_JOINED:Fe,DAILY_STATE_JOINING:ir,DAILY_STATE_LEFT:qe,DAILY_STATE_NEW:tn,DAILY_TRACK_STATE_BLOCKED:Qc,DAILY_TRACK_STATE_INTERRUPTED:el,DAILY_TRACK_STATE_LOADING:Zc,DAILY_TRACK_STATE_OFF:Kc,DAILY_TRACK_STATE_PLAYABLE:rs,DAILY_TRACK_STATE_SENDABLE:Xc,default:Hl},Symbol.toStringTag,{value:"Module"})));var Mn={exports:{}},mt=typeof Reflect=="object"?Reflect:null,aa=mt&&typeof mt.apply=="function"?mt.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},mr;mt&&typeof mt.ownKeys=="function"?mr=mt.ownKeys:Object.getOwnPropertySymbols?mr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:mr=function(e){return Object.getOwnPropertyNames(e)};function Zl(r){console&&console.warn&&console.warn(r)}var ca=Number.isNaN||function(e){return e!==e};function Y(){Y.init.call(this)}Mn.exports=Y,Mn.exports.once=nu,Y.EventEmitter=Y,Y.prototype._events=void 0,Y.prototype._eventsCount=0,Y.prototype._maxListeners=void 0;var la=10;function gr(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Y,"defaultMaxListeners",{enumerable:!0,get:function(){return la},set:function(r){if(typeof r!="number"||r<0||ca(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");la=r}}),Y.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Y.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ca(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ua(r){return r._maxListeners===void 0?Y.defaultMaxListeners:r._maxListeners}Y.prototype.getMaxListeners=function(){return ua(this)},Y.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var l=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw l.context=a,l}var u=o[e];if(u===void 0)return!1;if(typeof u=="function")aa(u,this,t);else for(var p=u.length,f=ma(u,p),n=0;n<p;++n)aa(f[n],this,t);return!0};function da(r,e,t,n){var i,o,a;if(gr(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),a=o[e]),a===void 0)a=o[e]=t,++r._eventsCount;else if(typeof a=="function"?a=o[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=ua(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=r,l.type=e,l.count=a.length,Zl(l)}return r}Y.prototype.addListener=function(e,t){return da(this,e,t,!1)},Y.prototype.on=Y.prototype.addListener,Y.prototype.prependListener=function(e,t){return da(this,e,t,!0)};function eu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pa(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=eu.bind(n);return i.listener=t,n.wrapFn=i,i}Y.prototype.once=function(e,t){return gr(t),this.on(e,pa(this,e,t)),this},Y.prototype.prependOnceListener=function(e,t){return gr(t),this.prependListener(e,pa(this,e,t)),this},Y.prototype.removeListener=function(e,t){var n,i,o,a,l;if(gr(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){l=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():tu(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,l||t)}return this},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function ha(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?ru(i):ma(i,i.length)}Y.prototype.listeners=function(e){return ha(this,e,!0)},Y.prototype.rawListeners=function(e){return ha(this,e,!1)},Y.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):fa.call(r,e)},Y.prototype.listenerCount=fa;function fa(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Y.prototype.eventNames=function(){return this._eventsCount>0?mr(this._events):[]};function ma(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function tu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function ru(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function nu(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,o),n(a)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}ga(r,e,o,{once:!0}),e!=="error"&&iu(r,i,{once:!0})})}function iu(r,e,t){typeof r.on=="function"&&ga(r,"error",e,t)}function ga(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var su=Mn.exports,vr={},$e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.Api=$e.HttpClient=$e.ContentType=void 0;var P;(function(r){r.Json="application/json",r.JsonApi="application/vnd.api+json",r.FormData="multipart/form-data",r.UrlEncoded="application/x-www-form-urlencoded",r.Text="text/plain"})(P||($e.ContentType=P={}));class va{constructor(e={}){x(this,"baseUrl","https://api.vapi.ai");x(this,"securityData",null);x(this,"securityWorker");x(this,"abortControllers",new Map);x(this,"customFetch",(...e)=>fetch(...e));x(this,"baseApiParams",{credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"});x(this,"setSecurityData",e=>{this.securityData=e});x(this,"contentFormatters",{[P.Json]:e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,[P.JsonApi]:e=>e!==null&&(typeof e=="object"||typeof e=="string")?JSON.stringify(e):e,[P.Text]:e=>e!==null&&typeof e!="string"?JSON.stringify(e):e,[P.FormData]:e=>Object.keys(e||{}).reduce((t,n)=>{const i=e[n];return t.append(n,i instanceof Blob?i:typeof i=="object"&&i!==null?JSON.stringify(i):`${i}`),t},new FormData),[P.UrlEncoded]:e=>this.toQueryString(e)});x(this,"createAbortSignal",e=>{if(this.abortControllers.has(e)){const n=this.abortControllers.get(e);return n?n.signal:void 0}const t=new AbortController;return this.abortControllers.set(e,t),t.signal});x(this,"abortRequest",e=>{const t=this.abortControllers.get(e);t&&(t.abort(),this.abortControllers.delete(e))});x(this,"request",async({body:e,secure:t,path:n,type:i,query:o,format:a,baseUrl:l,cancelToken:u,...p})=>{const f=(typeof t=="boolean"?t:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},v=this.mergeRequestParams(p,f),E=o&&this.toQueryString(o),k=this.contentFormatters[i||P.Json],_=a||v.format;return this.customFetch(`${l||this.baseUrl||""}${n}${E?`?${E}`:""}`,{...v,headers:{...v.headers||{},...i&&i!==P.FormData?{"Content-Type":i}:{}},signal:(u?this.createAbortSignal(u):v.signal)||null,body:typeof e>"u"||e===null?null:k(e)}).then(async g=>{const y=g.clone();y.data=null,y.error=null;const S=_?await g[_]().then(C=>(y.ok?y.data=C:y.error=C,y)).catch(C=>(y.error=C,y)):y;if(u&&this.abortControllers.delete(u),!g.ok)throw S;return S})});Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(i=>this.encodeQueryParam(t,i)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(i=>typeof t[i]<"u").map(i=>Array.isArray(t[i])?this.addArrayQueryParam(t,i):this.addQueryParam(t,i)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}}$e.HttpClient=va;class ou extends va{constructor(){super(...arguments);x(this,"call",{callControllerCreate:(t,n={})=>this.request({path:"/call",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),callControllerFindAll:(t,n={})=>this.request({path:"/call",method:"GET",query:t,secure:!0,format:"json",...n}),callControllerFindOne:(t,n={})=>this.request({path:`/call/${t}`,method:"GET",secure:!0,format:"json",...n}),callControllerUpdate:(t,n,i={})=>this.request({path:`/call/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),callControllerDeleteCallData:(t,n={})=>this.request({path:`/call/${t}`,method:"DELETE",secure:!0,format:"json",...n}),callControllerCreatePhoneCall:(t,n={})=>this.request({path:"/call/phone",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),callControllerCreateWebCall:(t,n={})=>this.request({path:"/call/web",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n})});x(this,"v2",{callControllerCallsExport:(t,n={})=>this.request({path:"/v2/call/export",method:"GET",query:t,secure:!0,...n}),callControllerFindAllPaginated:(t,n={})=>this.request({path:"/v2/call",method:"GET",query:t,secure:!0,format:"json",...n}),callControllerFindAllMetadataPaginated:(t,n={})=>this.request({path:"/v2/call/metadata",method:"GET",query:t,secure:!0,format:"json",...n}),assistantControllerFindAllPaginated:(t,n={})=>this.request({path:"/v2/assistant",method:"GET",query:t,secure:!0,format:"json",...n}),phoneNumberControllerFindAllPaginated:(t,n={})=>this.request({path:"/v2/phone-number",method:"GET",query:t,secure:!0,format:"json",...n})});x(this,"chat",{chatControllerListChats:(t,n={})=>this.request({path:"/chat",method:"GET",query:t,secure:!0,format:"json",...n}),chatControllerCreateChat:(t,n={})=>this.request({path:"/chat",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),chatControllerGetChat:(t,n={})=>this.request({path:`/chat/${t}`,method:"GET",secure:!0,format:"json",...n}),chatControllerDeleteChat:(t,n={})=>this.request({path:`/chat/${t}`,method:"DELETE",secure:!0,format:"json",...n}),chatControllerCreateOpenAiChat:(t,n={})=>this.request({path:"/chat/responses",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),chatControllerCreateWebChat:(t,n={})=>this.request({path:"/chat/web",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),chatControllerCreateOpenAiWebChat:(t,n={})=>this.request({path:"/chat/web/responses",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n})});x(this,"campaign",{campaignControllerCreate:(t,n={})=>this.request({path:"/campaign",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),campaignControllerFindAll:(t,n={})=>this.request({path:"/campaign",method:"GET",query:t,secure:!0,format:"json",...n}),campaignControllerFindOne:(t,n={})=>this.request({path:`/campaign/${t}`,method:"GET",secure:!0,format:"json",...n}),campaignControllerUpdate:(t,n,i={})=>this.request({path:`/campaign/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),campaignControllerRemove:(t,n={})=>this.request({path:`/campaign/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"session",{sessionControllerCreate:(t,n={})=>this.request({path:"/session",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),sessionControllerFindAllPaginated:(t,n={})=>this.request({path:"/session",method:"GET",query:t,secure:!0,format:"json",...n}),sessionControllerFindOne:(t,n={})=>this.request({path:`/session/${t}`,method:"GET",secure:!0,format:"json",...n}),sessionControllerUpdate:(t,n,i={})=>this.request({path:`/session/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),sessionControllerRemove:(t,n={})=>this.request({path:`/session/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"assistant",{assistantControllerCreate:(t,n={})=>this.request({path:"/assistant",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),assistantControllerFindAll:(t,n={})=>this.request({path:"/assistant",method:"GET",query:t,secure:!0,format:"json",...n}),assistantControllerFindOne:(t,n={})=>this.request({path:`/assistant/${t}`,method:"GET",secure:!0,format:"json",...n}),assistantControllerUpdate:(t,n,i={})=>this.request({path:`/assistant/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),assistantControllerReplace:(t,n,i={})=>this.request({path:`/assistant/${t}`,method:"PUT",body:n,secure:!0,type:P.Json,format:"json",...i}),assistantControllerRemove:(t,n={})=>this.request({path:`/assistant/${t}`,method:"DELETE",secure:!0,format:"json",...n}),assistantControllerFindVersions:(t,n,i={})=>this.request({path:`/assistant/${t}/version`,method:"GET",query:n,secure:!0,format:"json",...i})});x(this,"phoneNumber",{phoneNumberControllerImportTwilio:(t,n={})=>this.request({path:"/phone-number/import/twilio",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),phoneNumberControllerImportVonage:(t,n={})=>this.request({path:"/phone-number/import/vonage",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),phoneNumberControllerCreate:(t,n={})=>this.request({path:"/phone-number",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),phoneNumberControllerFindAll:(t,n={})=>this.request({path:"/phone-number",method:"GET",query:t,secure:!0,format:"json",...n}),phoneNumberControllerFindOne:(t,n={})=>this.request({path:`/phone-number/${t}`,method:"GET",secure:!0,format:"json",...n}),phoneNumberControllerUpdate:(t,n,i={})=>this.request({path:`/phone-number/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),phoneNumberControllerRemove:(t,n={})=>this.request({path:`/phone-number/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"tool",{toolControllerCreate:(t,n={})=>this.request({path:"/tool",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),toolControllerFindAll:(t,n={})=>this.request({path:"/tool",method:"GET",query:t,secure:!0,format:"json",...n}),toolControllerFindOne:(t,n={})=>this.request({path:`/tool/${t}`,method:"GET",secure:!0,format:"json",...n}),toolControllerUpdate:(t,n,i={})=>this.request({path:`/tool/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),toolControllerRemove:(t,n={})=>this.request({path:`/tool/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"file",{fileControllerCreateDeprecated:(t,n={})=>this.request({path:"/file/upload",method:"POST",body:t,secure:!0,type:P.FormData,format:"json",...n}),fileControllerCreate:(t,n={})=>this.request({path:"/file",method:"POST",body:t,secure:!0,type:P.FormData,format:"json",...n}),fileControllerFindAll:(t={})=>this.request({path:"/file",method:"GET",secure:!0,format:"json",...t}),fileControllerFindOne:(t,n={})=>this.request({path:`/file/${t}`,method:"GET",secure:!0,format:"json",...n}),fileControllerUpdate:(t,n,i={})=>this.request({path:`/file/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),fileControllerRemove:(t,n={})=>this.request({path:`/file/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"knowledgeBase",{knowledgeBaseControllerCreate:(t,n={})=>this.request({path:"/knowledge-base",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),knowledgeBaseControllerFindAll:(t,n={})=>this.request({path:"/knowledge-base",method:"GET",query:t,secure:!0,format:"json",...n}),knowledgeBaseControllerFindOne:(t,n={})=>this.request({path:`/knowledge-base/${t}`,method:"GET",secure:!0,format:"json",...n}),knowledgeBaseControllerUpdate:(t,n,i={})=>this.request({path:`/knowledge-base/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),knowledgeBaseControllerRemove:(t,n={})=>this.request({path:`/knowledge-base/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"workflow",{workflowControllerFindAll:(t={})=>this.request({path:"/workflow",method:"GET",secure:!0,format:"json",...t}),workflowControllerCreate:(t,n={})=>this.request({path:"/workflow",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),workflowControllerFindOne:(t,n={})=>this.request({path:`/workflow/${t}`,method:"GET",secure:!0,format:"json",...n}),workflowControllerDelete:(t,n={})=>this.request({path:`/workflow/${t}`,method:"DELETE",secure:!0,format:"json",...n}),workflowControllerUpdate:(t,n,i={})=>this.request({path:`/workflow/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i})});x(this,"squad",{squadControllerCreate:(t,n={})=>this.request({path:"/squad",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),squadControllerFindAll:(t,n={})=>this.request({path:"/squad",method:"GET",query:t,secure:!0,format:"json",...n}),squadControllerFindOne:(t,n={})=>this.request({path:`/squad/${t}`,method:"GET",secure:!0,format:"json",...n}),squadControllerUpdate:(t,n,i={})=>this.request({path:`/squad/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),squadControllerRemove:(t,n={})=>this.request({path:`/squad/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"testSuite",{testSuiteControllerFindAllPaginated:(t,n={})=>this.request({path:"/test-suite",method:"GET",query:t,secure:!0,format:"json",...n}),testSuiteControllerCreate:(t,n={})=>this.request({path:"/test-suite",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),testSuiteControllerFindOne:(t,n={})=>this.request({path:`/test-suite/${t}`,method:"GET",secure:!0,format:"json",...n}),testSuiteControllerUpdate:(t,n,i={})=>this.request({path:`/test-suite/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),testSuiteControllerRemove:(t,n={})=>this.request({path:`/test-suite/${t}`,method:"DELETE",secure:!0,format:"json",...n}),testSuiteTestControllerFindAllPaginated:(t,n,i={})=>this.request({path:`/test-suite/${t}/test`,method:"GET",query:n,secure:!0,format:"json",...i}),testSuiteTestControllerCreate:(t,n,i={})=>this.request({path:`/test-suite/${t}/test`,method:"POST",body:n,secure:!0,type:P.Json,format:"json",...i}),testSuiteTestControllerFindOne:(t,n,i={})=>this.request({path:`/test-suite/${t}/test/${n}`,method:"GET",secure:!0,format:"json",...i}),testSuiteTestControllerUpdate:(t,n,i,o={})=>this.request({path:`/test-suite/${t}/test/${n}`,method:"PATCH",body:i,secure:!0,type:P.Json,format:"json",...o}),testSuiteTestControllerRemove:(t,n,i={})=>this.request({path:`/test-suite/${t}/test/${n}`,method:"DELETE",secure:!0,format:"json",...i}),testSuiteRunControllerFindAllPaginated:(t,n,i={})=>this.request({path:`/test-suite/${t}/run`,method:"GET",query:n,secure:!0,format:"json",...i}),testSuiteRunControllerCreate:(t,n,i={})=>this.request({path:`/test-suite/${t}/run`,method:"POST",body:n,secure:!0,type:P.Json,format:"json",...i}),testSuiteRunControllerFindOne:(t,n,i={})=>this.request({path:`/test-suite/${t}/run/${n}`,method:"GET",secure:!0,format:"json",...i}),testSuiteRunControllerUpdate:(t,n,i,o={})=>this.request({path:`/test-suite/${t}/run/${n}`,method:"PATCH",body:i,secure:!0,type:P.Json,format:"json",...o}),testSuiteRunControllerRemove:(t,n,i={})=>this.request({path:`/test-suite/${t}/run/${n}`,method:"DELETE",secure:!0,format:"json",...i})});x(this,"analytics",{analyticsControllerQuery:(t,n={})=>this.request({path:"/analytics",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n})});x(this,"log",{loggingControllerCallLogsQuery:(t,n={})=>this.request({path:"/log",method:"GET",query:t,secure:!0,format:"json",...n}),loggingControllerCallLogsDeleteQuery:(t,n={})=>this.request({path:"/log",method:"DELETE",query:t,secure:!0,...n})});x(this,"logs",{loggingControllerLogsQuery:(t,n={})=>this.request({path:"/logs",method:"GET",query:t,secure:!0,format:"json",...n}),loggingControllerLogsDeleteQuery:(t,n={})=>this.request({path:"/logs",method:"DELETE",query:t,secure:!0,...n})});x(this,"structuredOutput",{structuredOutputControllerFindAll:(t,n={})=>this.request({path:"/structured-output",method:"GET",query:t,secure:!0,format:"json",...n}),structuredOutputControllerCreate:(t,n={})=>this.request({path:"/structured-output",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),structuredOutputControllerFindOne:(t,n={})=>this.request({path:`/structured-output/${t}`,method:"GET",secure:!0,format:"json",...n}),structuredOutputControllerUpdate:(t,n,i,o={})=>this.request({path:`/structured-output/${t}`,method:"PATCH",query:n,body:i,secure:!0,type:P.Json,format:"json",...o}),structuredOutputControllerRemove:(t,n={})=>this.request({path:`/structured-output/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"org",{orgControllerCreate:(t,n={})=>this.request({path:"/org",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),orgControllerFindAll:(t={})=>this.request({path:"/org",method:"GET",secure:!0,format:"json",...t}),orgControllerFeatureFlagEnabled:(t,n={})=>this.request({path:"/org/feature-flag",method:"GET",query:t,secure:!0,format:"json",...n}),orgControllerFindOne:(t,n={})=>this.request({path:`/org/${t}`,method:"GET",secure:!0,format:"json",...n}),orgControllerUpdate:(t,n,i={})=>this.request({path:`/org/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),orgControllerDeleteOrg:(t,n={})=>this.request({path:`/org/${t}`,method:"DELETE",secure:!0,...n}),orgControllerFindAllUsers:(t,n={})=>this.request({path:`/org/${t}/user`,method:"GET",secure:!0,format:"json",...n}),orgControllerOrgLeave:(t,n={})=>this.request({path:`/org/${t}/leave`,method:"DELETE",secure:!0,...n}),orgControllerOrgRemoveUser:(t,n,i={})=>this.request({path:`/org/${t}/member/${n}/leave`,method:"DELETE",secure:!0,...i}),orgControllerUsersInvite:(t,n,i={})=>this.request({path:`/org/${t}/invite`,method:"POST",body:n,secure:!0,type:P.Json,...i}),orgControllerUserUpdate:(t,n,i={})=>this.request({path:`/org/${t}/role`,method:"PATCH",body:n,secure:!0,type:P.Json,...i}),orgControllerOrgToken:(t,n={})=>this.request({path:`/org/${t}/auth`,method:"GET",secure:!0,format:"json",...n})});x(this,"token",{tokenControllerCreate:(t,n={})=>this.request({path:"/token",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),tokenControllerFindAll:(t,n={})=>this.request({path:"/token",method:"GET",query:t,secure:!0,format:"json",...n}),tokenControllerFindOne:(t,n={})=>this.request({path:`/token/${t}`,method:"GET",secure:!0,format:"json",...n}),tokenControllerUpdate:(t,n,i={})=>this.request({path:`/token/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),tokenControllerRemove:(t,n={})=>this.request({path:`/token/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"credential",{credentialControllerCreate:(t,n={})=>this.request({path:"/credential",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),credentialControllerFindAll:(t,n={})=>this.request({path:"/credential",method:"GET",query:t,secure:!0,format:"json",...n}),credentialControllerFindOne:(t,n={})=>this.request({path:`/credential/${t}`,method:"GET",secure:!0,format:"json",...n}),credentialControllerUpdate:(t,n,i={})=>this.request({path:`/credential/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),credentialControllerRemove:(t,n={})=>this.request({path:`/credential/${t}`,method:"DELETE",secure:!0,format:"json",...n}),credentialControllerGenerateSession:(t,n={})=>this.request({path:"/credential/session",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),credentialControllerHandleWebhook:(t,n={})=>this.request({path:"/credential/webhook",method:"POST",body:t,type:P.Json,...n}),credentialControllerTriggerCredentialAction:(t,n={})=>this.request({path:"/credential/trigger",method:"POST",body:t,secure:!0,type:P.Json,...n})});x(this,"template",{templateControllerCreate:(t,n={})=>this.request({path:"/template",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),templateControllerFindAll:(t,n={})=>this.request({path:"/template",method:"GET",query:t,secure:!0,format:"json",...n}),templateControllerFindAllPinned:(t={})=>this.request({path:"/template/pinned",method:"GET",secure:!0,format:"json",...t}),templateControllerFindOne:(t,n={})=>this.request({path:`/template/${t}`,method:"GET",secure:!0,format:"json",...n}),templateControllerUpdate:(t,n,i={})=>this.request({path:`/template/${t}`,method:"PATCH",body:n,secure:!0,type:P.Json,format:"json",...i}),templateControllerRemove:(t,n={})=>this.request({path:`/template/${t}`,method:"DELETE",secure:!0,format:"json",...n})});x(this,"voiceLibrary",{voiceLibraryControllerVoiceGetByProvider:(t,n,i={})=>this.request({path:`/voice-library/${t}`,method:"GET",query:n,secure:!0,format:"json",...i}),voiceLibraryControllerVoiceGetAccentsByProvider:(t,n={})=>this.request({path:`/voice-library/${t}/accents`,method:"GET",secure:!0,format:"json",...n}),voiceLibraryControllerVoiceLibrarySyncByProvider:(t,n={})=>this.request({path:`/voice-library/sync/${t}`,method:"POST",secure:!0,format:"json",...n}),voiceLibraryControllerVoiceLibrarySyncDefaultVoices:(t,n={})=>this.request({path:"/voice-library/sync",method:"POST",body:t,secure:!0,type:P.Json,format:"json",...n}),voiceLibraryControllerVoiceLibraryCreateSesameVoice:(t,n={})=>this.request({path:"/voice-library/create-sesame-voice",method:"POST",body:t,secure:!0,type:P.Json,...n})});x(this,"provider",{providerResourceControllerCreateProviderResource:(t,n,i={})=>this.request({path:`/provider/${t}/${n}`,method:"POST",secure:!0,format:"json",...i}),providerResourceControllerGetProviderResourcesPaginated:(t,n,i,o={})=>this.request({path:`/provider/${t}/${n}`,method:"GET",query:i,secure:!0,format:"json",...o}),providerResourceControllerGetProviderResource:(t,n,i,o={})=>this.request({path:`/provider/${t}/${n}/${i}`,method:"GET",secure:!0,format:"json",...o}),providerResourceControllerDeleteProviderResource:(t,n,i,o={})=>this.request({path:`/provider/${t}/${n}/${i}`,method:"DELETE",secure:!0,format:"json",...o}),providerResourceControllerUpdateProviderResource:(t,n,i,o={})=>this.request({path:`/provider/${t}/${n}/${i}`,method:"PATCH",secure:!0,format:"json",...o}),providerControllerGetWorkflows:(t,n,i={})=>this.request({path:`/${t}/workflows`,method:"GET",query:n,secure:!0,format:"json",...i}),providerControllerGetWorkflowTriggerHook:(t,n,i={})=>this.request({path:`/${t}/workflows/${n}/hooks`,method:"GET",secure:!0,format:"json",...i}),providerControllerGetLocations:(t,n={})=>this.request({path:`/${t}/locations`,method:"GET",secure:!0,format:"json",...n}),voiceProviderControllerSearchVoices:(t,n,i={})=>this.request({path:`/${t}/voices/search`,method:"GET",query:n,secure:!0,format:"json",...i}),voiceProviderControllerSearchVoice:(t,n,i={})=>this.request({path:`/${t}/voice/search`,method:"GET",query:n,secure:!0,format:"json",...i}),voiceProviderControllerAddVoices:(t,n,i={})=>this.request({path:`/${t}/voices/add`,method:"POST",body:n,secure:!0,type:P.Json,format:"json",...i}),voiceProviderControllerAddVoice:(t,n,i={})=>this.request({path:`/${t}/voice/add`,method:"POST",body:n,secure:!0,type:P.Json,format:"json",...i})});x(this,"v11Labs",{voiceProviderControllerCloneVoices:(t,n={})=>this.request({path:"/11labs/voice/clone",method:"POST",body:t,secure:!0,type:P.FormData,...n})})}}$e.Api=ou,Object.defineProperty(vr,"__esModule",{value:!0}),vr.client=void 0;const au=$e,cu=new au.Api({baseUrl:"https://api.vapi.ai",baseApiParams:{secure:!0},securityWorker:async r=>{if(r)return{headers:{Authorization:`Bearer ${r}`}}}});vr.client=cu;var ya=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Je,"__esModule",{value:!0});const lu=ya(Xl),uu=ya(su),Pn=vr;async function du(r,e){r.muted=!1,r.autoplay=!0,e!=null&&(r.srcObject=new MediaStream([e]),await r.play())}async function pu(r,e){const t=document.createElement("audio");return t.dataset.participantId=e,document.body.appendChild(t),await du(t,r),t}function hu(r){const e=document.querySelector(`audio[data-participant-id="${r}"]`);e==null||e.remove()}function fu(r,e,t,n){r.participant.local||e.updateParticipant(r.participant.session_id,{setSubscribedTracks:{audio:!0,video:t||n}})}class mu extends uu.default{on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}emit(e,...t){return super.emit(e,...t)}removeListener(e,t){return super.removeListener(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}}class gu extends mu{constructor(t,n,i,o){super();x(this,"started",!1);x(this,"call",null);x(this,"speakingTimeout",null);x(this,"dailyCallConfig",{});x(this,"dailyCallObject",{});x(this,"hasEmittedCallEndedStatus",!1);Pn.client.baseUrl=n??"https://api.vapi.ai",Pn.client.setSecurityData(t),this.dailyCallConfig=i??{},this.dailyCallObject=o??{}}cleanup(){var t;this.started=!1,this.hasEmittedCallEndedStatus=!1,(t=this.call)==null||t.destroy(),this.call=null,this.speakingTimeout=null}isMobileDevice(){if(typeof navigator>"u")return!1;const t=navigator.userAgent;return/android|iphone|ipad|ipod|iemobile|blackberry|bada/i.test(t.toLowerCase())}async sleep(t){return new Promise(n=>setTimeout(n,t))}async start(t,n,i,o,a){var u,p,f,v,E,k,_;const l=Date.now();if(!t&&!i&&!o){const g=new Error("Assistant or Squad or Workflow must be provided.");throw this.emit("error",{type:"validation-error",stage:"input-validation",message:g.message,timestamp:new Date().toISOString()}),g}if(this.started)return this.emit("call-start-progress",{stage:"validation",status:"failed",timestamp:new Date().toISOString(),metadata:{reason:"already-started"}}),null;this.emit("call-start-progress",{stage:"initialization",status:"started",timestamp:new Date().toISOString(),metadata:{hasAssistant:!!t,hasSquad:!!i,hasWorkflow:!!o}}),this.started=!0;try{this.emit("call-start-progress",{stage:"web-call-creation",status:"started",timestamp:new Date().toISOString()});const g=Date.now(),y=(await Pn.client.call.callControllerCreateWebCall({assistant:typeof t=="string"?void 0:t,assistantId:typeof t=="string"?t:void 0,assistantOverrides:n,squad:typeof i=="string"?void 0:i,squadId:typeof i=="string"?i:void 0,workflow:typeof o=="string"?void 0:o,workflowId:typeof o=="string"?o:void 0,workflowOverrides:a})).data,S=Date.now()-g;this.emit("call-start-progress",{stage:"web-call-creation",status:"completed",duration:S,timestamp:new Date().toISOString(),metadata:{callId:(y==null?void 0:y.id)||"unknown",videoRecordingEnabled:((u=y==null?void 0:y.artifactPlan)==null?void 0:u.videoRecordingEnabled)??!1,voiceProvider:((f=(p=y==null?void 0:y.assistant)==null?void 0:p.voice)==null?void 0:f.provider)||"unknown"}}),this.call&&(this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{action:"cleanup-existing"}}),this.cleanup());const C=((v=y==null?void 0:y.artifactPlan)==null?void 0:v.videoRecordingEnabled)??!1,M=((k=(E=y==null?void 0:y.assistant)==null?void 0:E.voice)==null?void 0:k.provider)==="tavus";this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"started",timestamp:new Date().toISOString(),metadata:{audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??C,isVideoRecordingEnabled:C,isVideoEnabled:M}});const j=Date.now();try{this.call=lu.default.createCallObject({audioSource:this.dailyCallObject.audioSource??!0,videoSource:this.dailyCallObject.videoSource??C,dailyConfig:this.dailyCallConfig});const O=Date.now()-j;this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"completed",duration:O,timestamp:new Date().toISOString()})}catch(O){const G=Date.now()-j;throw this.emit("call-start-progress",{stage:"daily-call-object-creation",status:"failed",duration:G,timestamp:new Date().toISOString(),metadata:{error:O==null?void 0:O.toString()}}),this.emit("error",{type:"daily-call-object-creation-error",stage:"daily-call-object-creation",error:O,timestamp:new Date().toISOString()}),O}(_=this.call.iframe())==null||_.style.setProperty("display","none"),this.call.on("left-meeting",()=>{var O;this.emit("call-end"),this.hasEmittedCallEndedStatus||(this.emit("message",{type:"status-update",status:"ended",endedReason:"customer-ended-call"}),this.hasEmittedCallEndedStatus=!0),C&&((O=this.call)==null||O.stopRecording()),this.cleanup()}),this.call.on("error",O=>{var G;this.emit("error",O),C&&((G=this.call)==null||G.stopRecording())}),this.call.on("camera-error",O=>{this.emit("camera-error",O)}),this.call.on("network-quality-change",O=>{this.emit("network-quality-change",O)}),this.call.on("network-connection",O=>{this.emit("network-connection",O)}),this.call.on("track-started",async O=>{var G,ae,Ce;!O||!O.participant||(G=O.participant)!=null&&G.local||((ae=O.participant)==null?void 0:ae.user_name)==="Vapi Speaker"&&(O.track.kind==="video"&&this.emit("video",O.track),O.track.kind==="audio"&&await pu(O.track,O.participant.session_id),(Ce=this.call)==null||Ce.sendAppMessage("playable"))}),this.call.on("participant-joined",O=>{!O||!this.call||fu(O,this.call,C,M)}),this.call.on("participant-updated",O=>{O&&this.emit("daily-participant-updated",O.participant)}),this.call.on("participant-left",O=>{O&&hu(O.participant.session_id)});const D=this.isMobileDevice();if(this.emit("call-start-progress",{stage:"mobile-permissions",status:"started",timestamp:new Date().toISOString(),metadata:{isMobile:D}}),D){const O=Date.now();await this.sleep(1e3);const G=Date.now()-O;this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",duration:G,timestamp:new Date().toISOString(),metadata:{action:"permissions-wait"}})}else this.emit("call-start-progress",{stage:"mobile-permissions",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-mobile"}});this.emit("call-start-progress",{stage:"daily-call-join",status:"started",timestamp:new Date().toISOString()});const q=Date.now();try{await this.call.join({url:y.webCallUrl,subscribeToTracksAutomatically:!1});const O=Date.now()-q;this.emit("call-start-progress",{stage:"daily-call-join",status:"completed",duration:O,timestamp:new Date().toISOString()})}catch(O){const G=Date.now()-q;throw this.emit("call-start-progress",{stage:"daily-call-join",status:"failed",duration:G,timestamp:new Date().toISOString(),metadata:{error:O==null?void 0:O.toString()}}),this.emit("error",{type:"daily-call-join-error",stage:"daily-call-join",error:O,duration:G,timestamp:new Date().toISOString()}),O}if(C){this.emit("call-start-progress",{stage:"video-recording-setup",status:"started",timestamp:new Date().toISOString()});const O=new Date().getTime(),G=Date.now();try{this.call.startRecording({width:1280,height:720,backgroundColor:"#FF1F2D3D",layout:{preset:"default"}});const ae=Date.now()-G;this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",duration:ae,timestamp:new Date().toISOString()}),this.call.on("recording-started",()=>{const Ce=(new Date().getTime()-O)/1e3;this.emit("call-start-progress",{stage:"video-recording-started",status:"completed",timestamp:new Date().toISOString(),metadata:{delaySeconds:Ce}}),this.send({type:"control",control:"say-first-message",videoRecordingStartDelaySeconds:Ce})})}catch(ae){const Ce=Date.now()-G;this.emit("call-start-progress",{stage:"video-recording-setup",status:"failed",duration:Ce,timestamp:new Date().toISOString(),metadata:{error:ae==null?void 0:ae.toString()}}),this.emit("error",{type:"video-recording-setup-error",stage:"video-recording-setup",error:ae,timestamp:new Date().toISOString()})}}else this.emit("call-start-progress",{stage:"video-recording-setup",status:"completed",timestamp:new Date().toISOString(),metadata:{action:"skipped-not-enabled"}});this.emit("call-start-progress",{stage:"audio-observer-setup",status:"started",timestamp:new Date().toISOString()});const W=Date.now();try{this.call.startRemoteParticipantsAudioLevelObserver(100);const O=Date.now()-W;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"completed",duration:O,timestamp:new Date().toISOString()})}catch(O){const G=Date.now()-W;this.emit("call-start-progress",{stage:"audio-observer-setup",status:"failed",duration:G,timestamp:new Date().toISOString(),metadata:{error:O==null?void 0:O.toString()}}),this.emit("error",{type:"audio-observer-setup-error",stage:"audio-observer-setup",error:O,timestamp:new Date().toISOString()})}this.call.on("remote-participants-audio-level",O=>{O&&this.handleRemoteParticipantsAudioLevel(O)}),this.call.on("app-message",O=>this.onAppMessage(O)),this.call.on("nonfatal-error",O=>{var G;(O==null?void 0:O.type)==="audio-processor-error"&&((G=this.call)==null||G.updateInputSettings({audio:{processor:{type:"none"}}}).then(()=>{var ae;(ae=this.call)==null||ae.setLocalAudio(!0)}))}),this.emit("call-start-progress",{stage:"audio-processing-setup",status:"started",timestamp:new Date().toISOString()});const ne=Date.now();try{this.call.updateInputSettings({audio:{processor:{type:"noise-cancellation"}}});const O=Date.now()-ne;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"completed",duration:O,timestamp:new Date().toISOString()})}catch(O){const G=Date.now()-ne;this.emit("call-start-progress",{stage:"audio-processing-setup",status:"failed",duration:G,timestamp:new Date().toISOString(),metadata:{error:O==null?void 0:O.toString()}}),this.emit("error",{type:"audio-processing-setup-error",stage:"audio-processing-setup",error:O,timestamp:new Date().toISOString()})}const Ue=Date.now()-l;return this.emit("call-start-success",{totalDuration:Ue,callId:(y==null?void 0:y.id)||"unknown",timestamp:new Date().toISOString()}),y}catch(g){const y=Date.now()-l;return this.emit("call-start-failed",{stage:"unknown",totalDuration:y,error:(g==null?void 0:g.toString())||"Unknown error occurred",errorStack:g instanceof Error?g.stack:"No stack trace available",timestamp:new Date().toISOString(),context:{hasAssistant:!!t,hasSquad:!!i,hasWorkflow:!!o,isMobile:this.isMobileDevice()}}),this.emit("error",{type:"start-method-error",stage:"unknown",error:g,totalDuration:y,timestamp:new Date().toISOString(),context:{hasAssistant:!!t,hasSquad:!!i,hasWorkflow:!!o,isMobile:this.isMobileDevice()}}),this.cleanup(),null}}onAppMessage(t){if(t)try{if(t.data==="listening")return this.emit("call-start");try{const n=JSON.parse(t.data);this.emit("message",n),n&&"type"in n&&"status"in n&&n.type==="status-update"&&n.status==="ended"&&(this.hasEmittedCallEndedStatus=!0)}catch(n){console.log("Error parsing message data: ",n)}}catch(n){console.error(n)}}handleRemoteParticipantsAudioLevel(t){const n=Object.values(t.participantsAudioLevel).reduce((o,a)=>o+a,0);this.emit("volume-level",Math.min(1,n/.15)),n>.01&&(this.speakingTimeout?(clearTimeout(this.speakingTimeout),this.speakingTimeout=null):this.emit("speech-start"),this.speakingTimeout=setTimeout(()=>{this.emit("speech-end"),this.speakingTimeout=null},1e3))}stop(){var t;this.started=!1,(t=this.call)==null||t.destroy(),this.call=null}send(t){var n;(n=this.call)==null||n.sendAppMessage(JSON.stringify(t))}setMuted(t){if(!this.call)throw new Error("Call object is not available.");this.call.setLocalAudio(!t)}isMuted(){return this.call?this.call.localAudio()===!1:!1}say(t,n,i,o){this.send({type:"say",message:t,endCallAfterSpoken:n,interruptionsEnabled:i??!1,interruptAssistantEnabled:o??!1})}setInputDevicesAsync(t){var n;(n=this.call)==null||n.setInputDevicesAsync(t)}async increaseMicLevel(t){if(!this.call)throw new Error("Call object is not available.");try{const n=await navigator.mediaDevices.getUserMedia({audio:!0}),i=new AudioContext,o=i.createMediaStreamSource(n),a=i.createGain();a.gain.value=t,o.connect(a);const l=i.createMediaStreamDestination();a.connect(l);const[u]=l.stream.getAudioTracks();await this.call.setInputDevicesAsync({audioSource:u})}catch(n){console.error("Error adjusting microphone level:",n)}}setOutputDeviceAsync(t){var n;(n=this.call)==null||n.setOutputDeviceAsync(t)}getDailyCallObject(){return this.call}startScreenSharing(t,n){var i;(i=this.call)==null||i.startScreenShare({displayMediaOptions:t,screenVideoSendSettings:n})}stopScreenSharing(){var t;(t=this.call)==null||t.stopScreenShare()}}var vu=Je.default=gu;const yu=({idle:r,loading:e,active:t,width:n,height:i,position:o,offset:a})=>{const l=parseInt(n)/2,u=parseInt(i)/2,p={"bottom-right":`bottom: ${a}; right: ${a};`,"bottom-left":`bottom: ${a}; left: ${a};`,"top-right":`top: ${a}; right: ${a};`,"top-left":`top: ${a}; left: ${a};`,bottom:`bottom: ${a}; left: 50%; margin-left: -${l}px;`,right:`top: 50%; right: ${a}; margin-top: -${u}px;`,left:`top: 50%; left: ${a}; margin-top: -${u}px;`,top:`top: ${a}; left: 50%; margin-left: -${l}px;`},f=document.createElement("style");f.innerText=`
    @keyframes bounce {
      30% {
        transform: translateY(0%);
      }
      40% {
        transform: translateY(-5%);
      }
      50% {
        transform: translateY(-10%);
      }
      60% {
        transform: translateY(-5%);
      }
      70% {
        transform: translateY(0%);
      }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .vapi-btn {
      border-radius: 50%;
      min-width: ${n};
      height: ${i};
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease-in-out;
      display: flex;
      text-align: left;
      align-items: center;
      position: absolute;
      padding: 0;
      animation: bounce 2s ease-in-out infinite;
      ${p[o]}
    }
    .vapi-btn-round {
      justify-content: center;
    }
    .vapi-btn-pill {
      border-radius: 8px;
      color: black;
      background: white;
      justify-content: flex-start;
      padding: 0px 10px;
    }
    .vapi-btn:hover {
      animation: none;
      transform: translateY(-5px);
    }
    #vapi-icon-container {
      padding: 5px;
      margin: 5px;
      border-radius: 5px;
    }

    #vapi-title-container {
      padding: 5px 10px;
    }
    #vapi-title {
      font-size: 1.1em;
    }
    #vapi-subtitle {
      font-size: 0.9em;
    }

    .vapi-btn-is-loading > #vapi-icon-container > img {
      animation: spin 1s linear infinite;
    }

    .vapi-btn-is-active {
      background: ${t.color};
      box-shadow: 1px 1px 80px 20px ${t.color};
    }
    .vapi-btn-pill.vapi-btn-is-active {
      background: white;
    }
    .vapi-btn-pill.vapi-btn-is-active > #vapi-icon-container {
      background: ${t.color};
    }


    .vapi-btn-is-idle {
      background: ${r.color};
      box-shadow: 1px 1px 10px ${r.color};
    }
    .vapi-btn-pill.vapi-btn-is-idle {
      background: white;
    }
    .vapi-btn-pill.vapi-btn-is-idle > #vapi-icon-container {
      background: ${r.color};
    }

    .vapi-btn-is-loading {
      background: ${e.color};
      box-shadow: 1px 1px 80px 20px ${e.color};
    }
    .vapi-btn-pill.vapi-btn-is-loading {
      background: white;
    }
    .vapi-btn-pill.vapi-btn-is-loading > #vapi-icon-container {
      background: ${e.color};
    }
    .vapi-btn-is-speaking {
      // Add speaking styles if different from active/loading/idle
    }
    @font-face {
      font-family: 'LucideIcons';
      src: url(https://unpkg.com/lucide-static@latest/font/Lucide.ttf) format('truetype');
    }
  `;for(let v=0;v<=10;v++)f.innerText+=`
      .vapi-btn-volume-${v} {
        box-shadow: 1px 1px ${5+v*2}px ${v*2}px ${t.color}, inset 0px 0px 10px 0px rgba(0,0,0,0.1);
      }
    `;document.head.appendChild(f)},bu=({position:r="bottom",offset:e="40px",width:t="50px",height:n="50px",idle:i,loading:o,active:a},l="vapi-support-btn")=>{yu({idle:i,loading:o,active:a,width:t,height:n,position:r,offset:e});const u=document.createElement("button");return u.id=l,u.className="vapi-btn vapi-btn-round vapi-btn-is-idle",u.onclick=()=>{},u},ba="https://unpkg.com/lucide-static@0.321.0/icons/phone.svg",_u=r=>(e,t)=>{const n=r[t];if(n){if(e.className=`vapi-btn vapi-btn-is-${t} ${n.type==="pill"?"vapi-btn-pill":n.type==="round"?"vapi-btn-round":""}`,e.innerHTML="",e.title=n.title??"",n.type==="pill"){const i=document.createElement("div");i.id="vapi-icon-container";const o=document.createElement("img");o.src=n.icon||ba,o.alt="Icon",i.appendChild(o);const a=document.createElement("div");a.id="vapi-title-container";const l=document.createElement("div");l.id="vapi-title",l.textContent=n.title;const u=document.createElement("div");u.id="vapi-subtitle",u.textContent=n.subtitle,a.appendChild(l),a.appendChild(u),e.appendChild(i),e.appendChild(a)}else if(n.type==="round"){const i=document.createElement("div");i.id="vapi-icon-container";const o=document.createElement("img");o.src=n.icon||ba,o.alt="Icon",i.appendChild(o),e.appendChild(i)}}};function Su(r,e,t,n,i,o){let a=!1;const l=()=>{o(e,"loading"),a?(r.stop(),a=!1):(t||n?r.start(t,n):(console.log("squad ,",i,t,n),r.start(void 0,void 0,i)),a=!0)};r.on("call-start",()=>{o(e,"active")}),r.on("call-end",()=>{o(e,"idle")}),r.on("speech-start",()=>{e.classList.add("vapi-btn-is-speaking")}),r.on("speech-end",()=>{e.classList.remove("vapi-btn-is-speaking")}),e.addEventListener("click",l),r.on("volume-level",u=>{const p=Math.floor(u*10);for(let f=0;f<=10;f++)e.classList.remove(`vapi-btn-volume-${f}`);e.classList.add(`vapi-btn-volume-${p}`)})}const wu=({apiKey:r="",assistant:e,assistantOverrides:t,squad:n,config:i={},...o})=>{function a(p,f){const v={...p};return Object.keys(f).forEach(E=>{typeof f[E]=="object"&&f[E]!==null&&!Array.isArray(f[E])?v[E]=a(p[E]||{},f[E]):v[E]=f[E]}),v}const u=a({position:"bottom",offset:"40px",width:"50px",height:"50px",idle:{color:"rgb(93, 254, 202)",type:"round",title:"Have a quick question?",subtitle:"Talk with our AI assistant",icon:"https://unpkg.com/lucide-static@0.321.0/icons/phone.svg"},loading:{color:"rgb(93, 124, 202)",type:"round",title:"Connecting...",subtitle:"Please wait",icon:"https://unpkg.com/lucide-static@0.321.0/icons/loader-2.svg"},active:{color:"rgb(255, 0, 0)",type:"round",title:"Call is in progress...",subtitle:"End the call.",icon:"https://unpkg.com/lucide-static@0.321.0/icons/phone-off.svg"}},i);if(r&&(e||n)){const p=new vu(r),f=bu(u),v=_u(u);return document.body.appendChild(f),v(f,"idle"),Su(p,f,e,t,n,v),window.vapiSDK.vapi=p,p}else return console.error("API Key and Assistant Configurations are required. are required"),null};window.vapiSDK={run:wu}});
